import{_ as Q}from"./BhO_ksgI.js";import{b as Y,a0 as Z,a as tt,a1 as et,o as st,h as at,C as r,N as n,D as e,U as g,V as k,R as t,M as i,F as R,O as u,S as x,W as f,E as ot,n as _,l as F,B as l,P as m,X as lt,t as d,k as nt}from"./D9Gj93nn.js";import D from"./BTl0NxUM.js";import y from"./Y7r-k2LO.js";import C from"./Dl-X0CC4.js";import z from"./D_hdh7AO.js";import{C as rt}from"./CiuyRWfL.js";import{C as it,P as ct}from"./oddCwiQW.js";import{c as dt}from"./ZqIlnLQN.js";import{S as ut}from"./DNR732mu.js";import{B as pt}from"./NjISSGdm.js";import"./CkYB-R1u.js";import"./c5FhCeC0.js";const P=dt("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),xt={class:"min-h-screen bg-slate-100/60 text-slate-900"},mt={class:"lg:pl-72"},vt={class:"sticky top-0 z-30 border-b border-slate-200/80 bg-white/95 backdrop-blur"},ft={class:"px-4 py-4 sm:px-6"},bt={class:"flex flex-wrap items-start justify-between gap-4"},ht={class:"min-w-0"},gt={class:"flex items-center gap-2 text-xs text-slate-500"},_t={key:1,class:"text-slate-700"},wt={class:"mt-1 truncate text-2xl font-semibold tracking-tight text-slate-900"},kt={class:"flex flex-wrap items-center gap-2"},yt={class:"relative","data-context-menu-root":""},Ct={class:"hidden max-w-[180px] min-w-[120px] sm:block"},zt={class:"truncate text-sm font-semibold text-slate-800"},$t={class:"text-xs text-slate-500"},Nt={key:0,class:"absolute right-0 z-40 mt-2 w-80 rounded-2xl border border-slate-200 bg-white p-2 shadow-2xl"},Bt={key:0,class:"mb-1 space-y-1"},St=["onClick"],Lt={class:"min-w-0 flex-1"},At={class:"truncate text-sm font-medium text-slate-800"},Mt={key:1,class:"space-y-1"},Ot=["onClick"],Tt={class:"min-w-0 flex-1"},It={class:"truncate text-sm font-medium text-slate-800"},Ut={class:"relative","data-create-menu-root":""},Vt={key:0,class:"absolute right-0 z-40 mt-2 w-72 rounded-2xl border border-slate-200 bg-white p-2 shadow-2xl"},Wt={class:"-mx-1 mt-4 flex gap-2 overflow-x-auto px-1 pb-1 lg:hidden"},Et={class:"px-4 py-6 sm:px-6"},te=Y({__name:"default",setup(Rt){const j=[{label:"Дашборд",to:"/"},{label:"События",to:"/events"},{label:"Аудитория",to:"/audience"},{label:"Маркетинг",to:"/marketing"},{label:"Финансы",to:"/finance"},{label:"Профиль",to:"/settings/profile"}],q=[{label:"Обзор",to:"/venue/overview"},{label:"Календарь занятости",to:"/venue/calendar"},{label:"Настройки профиля",to:"/settings/profile"}],c=Z(),$=tt(),{currentContext:p,availableContexts:N}=et($),B=d(()=>{const o=c.meta.title;return o||M.value.find(v=>v.to==="/"?c.path==="/":c.path.startsWith(v.to))?.label||"Workspace"}),S=d(()=>{const o=c.meta.breadcrumbs;return o?.length?o:[{label:p.value?.data?.name||"SmartEvents"},{label:B.value}]}),L=d(()=>c.meta.actionLabel),A=d(()=>c.meta.actionTo),M=d(()=>p.value?.type==="venue"?q:j),O=d(()=>p.value?.data?.name||"Выберите контекст"),G=d(()=>p.value?.type==="venue"?"Площадка":"Организатор"),X=d(()=>O.value.trim().charAt(0).toUpperCase()||"S"),H=d(()=>p.value?.data?.logo_url||""),T=d(()=>N.value.filter(o=>o.type==="organizer")),I=d(()=>N.value.filter(o=>o.type==="venue")),b=F(!1),h=F(!1),J=()=>{A.value&&_(A.value)},K=o=>o==="venue"?"/venue/overview":"/",U=async(o,a)=>{const v=$.selectContext(o,a);if(b.value=!1,!!v){if(c.path==="/onboarding"){await _(K(o));return}o==="venue"&&!c.path.startsWith("/venue")&&await _("/venue/overview"),o==="organizer"&&c.path.startsWith("/venue")&&await _("/")}},V=async o=>{h.value=!1,await _({path:"/onboarding",query:{create:o}})},W=o=>{const a=o.target;a?.closest("[data-context-menu-root]")||(b.value=!1),a?.closest("[data-create-menu-root]")||(h.value=!1)};return st(()=>{window.addEventListener("click",W)}),at(()=>{window.removeEventListener("click",W)}),(o,a)=>{const v=nt("OrganizerSidebar"),E=Q;return l(),r("div",xt,[n(v),e("div",mt,[e("header",vt,[e("div",ft,[e("div",bt,[e("div",ht,[e("nav",gt,[(l(!0),r(g,null,k(t(S),(s,w)=>(l(),r(g,{key:`${s.label}-${w}`},[s.to?(l(),f(E,{key:0,to:s.to,class:"hover:text-slate-900"},{default:u(()=>[m(i(s.label),1)]),_:2},1032,["to"])):(l(),r("span",_t,i(s.label),1)),w<t(S).length-1?(l(),f(t(rt),{key:2,class:"h-3 w-3 text-slate-400"})):x("",!0)],64))),128))]),e("h1",wt,i(t(B)),1)]),e("div",kt,[e("div",yt,[e("button",{class:"inline-flex items-center gap-3 rounded-xl border border-slate-200 bg-white px-3 py-2 text-left shadow-sm transition hover:border-slate-300",onClick:a[0]||(a[0]=R(s=>b.value=!t(b),["stop"]))},[n(t(y),{class:"h-8 w-8 border border-slate-200"},{default:u(()=>[n(t(C),{src:t(H)},null,8,["src"]),n(t(z),{class:"bg-slate-100 text-slate-700 font-semibold"},{default:u(()=>[m(i(t(X)),1)]),_:1})]),_:1}),e("div",Ct,[e("p",zt,i(t(O)),1),e("p",$t,i(t(G)),1)]),n(t(it),{class:"h-4 w-4 text-slate-400"})]),t(b)?(l(),r("div",Nt,[a[8]||(a[8]=e("div",{class:"px-2 py-2 text-xs font-semibold uppercase tracking-[0.18em] text-slate-400"}," Контекст ",-1)),t(T).length?(l(),r("div",Bt,[a[5]||(a[5]=e("p",{class:"px-2 pt-1 text-[11px] font-semibold uppercase tracking-[0.16em] text-slate-400"}," Организаторы ",-1)),(l(!0),r(g,null,k(t(T),s=>(l(),r("button",{key:`organizer-${s.id}`,class:"flex w-full items-center gap-3 rounded-xl px-3 py-2 text-left transition hover:bg-slate-100",onClick:w=>U("organizer",s.id)},[n(t(y),{class:"h-8 w-8 border border-slate-200"},{default:u(()=>[n(t(C),{src:s.data.logo_url||""},null,8,["src"]),n(t(z),{class:"bg-cyan-50 text-cyan-700 font-semibold"},{default:u(()=>[m(i(s.data.name.charAt(0).toUpperCase()),1)]),_:2},1024)]),_:2},1024),e("div",Lt,[e("p",At,i(s.data.name),1),a[4]||(a[4]=e("p",{class:"text-xs text-slate-500"},"Organizer",-1))]),t(p)?.type===s.type&&t(p)?.id===s.id?(l(),f(t(P),{key:0,class:"h-4 w-4 text-cyan-600"})):x("",!0)],8,St))),128))])):x("",!0),t(I).length?(l(),r("div",Mt,[a[7]||(a[7]=e("p",{class:"px-2 pt-1 text-[11px] font-semibold uppercase tracking-[0.16em] text-slate-400"}," Площадки ",-1)),(l(!0),r(g,null,k(t(I),s=>(l(),r("button",{key:`venue-${s.id}`,class:"flex w-full items-center gap-3 rounded-xl px-3 py-2 text-left transition hover:bg-slate-100",onClick:w=>U("venue",s.id)},[n(t(y),{class:"h-8 w-8 border border-slate-200"},{default:u(()=>[n(t(C),{src:s.data.logo_url||""},null,8,["src"]),n(t(z),{class:"bg-amber-50 text-amber-700 font-semibold"},{default:u(()=>[m(i(s.data.name.charAt(0).toUpperCase()),1)]),_:2},1024)]),_:2},1024),e("div",Tt,[e("p",It,i(s.data.name),1),a[6]||(a[6]=e("p",{class:"text-xs text-slate-500"},"Venue",-1))]),t(p)?.type===s.type&&t(p)?.id===s.id?(l(),f(t(P),{key:0,class:"h-4 w-4 text-cyan-600"})):x("",!0)],8,Ot))),128))])):x("",!0)])):x("",!0)]),e("div",Ut,[n(t(D),{variant:"outline",class:"gap-2 border-slate-300 bg-white text-slate-700 hover:bg-slate-50",onClick:a[1]||(a[1]=R(s=>h.value=!t(h),["stop"]))},{default:u(()=>[n(t(ct),{class:"h-4 w-4"}),a[9]||(a[9]=m(" Создать ",-1))]),_:1}),t(h)?(l(),r("div",Vt,[e("button",{class:"flex w-full items-center gap-3 rounded-xl px-3 py-2 text-left transition hover:bg-slate-100",onClick:a[2]||(a[2]=s=>V("organizer"))},[n(t(ut),{class:"h-4 w-4 text-cyan-600"}),a[10]||(a[10]=e("div",null,[e("p",{class:"text-sm font-medium text-slate-800"},"Новый организатор"),e("p",{class:"text-xs text-slate-500"},"Запустить новый бренд событий")],-1))]),e("button",{class:"mt-1 flex w-full items-center gap-3 rounded-xl px-3 py-2 text-left transition hover:bg-slate-100",onClick:a[3]||(a[3]=s=>V("venue"))},[n(t(pt),{class:"h-4 w-4 text-amber-600"}),a[11]||(a[11]=e("div",null,[e("p",{class:"text-sm font-medium text-slate-800"},"Новая площадка"),e("p",{class:"text-xs text-slate-500"},"Добавить пространство под ивенты")],-1))])])):x("",!0)]),t(L)?(l(),f(t(D),{key:0,onClick:J},{default:u(()=>[m(i(t(L)),1)]),_:1})):x("",!0)])]),e("nav",Wt,[(l(!0),r(g,null,k(t(M),s=>(l(),f(E,{key:`mobile-${s.to}`,to:s.to,class:lt(["whitespace-nowrap rounded-full px-3 py-1.5 text-sm font-medium transition",s.to==="/"?t(c).path==="/"?"bg-slate-900 text-white":"bg-white text-slate-600":t(c).path.startsWith(s.to)?"bg-slate-900 text-white":"bg-white text-slate-600"])},{default:u(()=>[m(i(s.label),1)]),_:2},1032,["to","class"]))),128))])])]),e("main",Et,[ot(o.$slots,"default")])])])}}});export{te as default};
