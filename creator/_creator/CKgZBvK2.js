import{_ as Z}from"./BuzY33i2.js";import{b as ee,a0 as te,a as se,a1 as ae,o as oe,h as ne,C as r,N as l,D as s,U as g,V as k,R as e,M as i,F as R,O as c,S as p,W as f,E as le,n as _,l as F,B as n,P as m,X as re,t as d,k as ie}from"./CKBAJM5x.js";import D from"./C3SSI5uS.js";import C from"./Cx0D2y_q.js";import z from"./DCB5rKQq.js";import N from"./DGFE_S-c.js";import{C as ce}from"./C5zPbI0c.js";import{C as de,P as j}from"./DhXPwc4G.js";import{c as ue}from"./rZUYJyJg.js";import{S as xe}from"./ptOWNeUL.js";import{B as pe}from"./syO-qAK8.js";import"./CkYB-R1u.js";import"./c5FhCeC0.js";const q=ue("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),ve={class:"min-h-screen bg-slate-100/60 text-slate-900"},me={class:"lg:pl-72"},fe={class:"sticky top-0 z-30 border-b border-slate-200/80 bg-white/95 backdrop-blur"},be={class:"px-4 py-4 sm:px-6"},he={class:"flex flex-wrap items-start justify-between gap-4"},ge={class:"min-w-0"},_e={class:"flex items-center gap-2 text-xs text-slate-500"},we={key:1,class:"text-slate-700"},ke={class:"mt-1 truncate text-2xl font-semibold tracking-tight text-slate-900"},ye={class:"flex flex-wrap items-center gap-2"},Ce={class:"relative","data-context-menu-root":""},ze={class:"hidden max-w-[180px] min-w-[120px] sm:block"},Ne={class:"truncate text-sm font-semibold text-slate-800"},$e={class:"text-xs text-slate-500"},Be={key:0,class:"absolute right-0 z-40 mt-2 w-80 rounded-2xl border border-slate-200 bg-white p-2 shadow-2xl"},Pe={key:0,class:"mb-1 space-y-1"},Se=["onClick"],Le={class:"min-w-0 flex-1"},Ae={class:"truncate text-sm font-medium text-slate-800"},Ie={key:1,class:"space-y-1"},Me=["onClick"],Oe={class:"min-w-0 flex-1"},Te={class:"truncate text-sm font-medium text-slate-800"},Ue={class:"relative","data-create-menu-root":""},Ve={key:0,class:"absolute right-0 z-40 mt-2 w-72 rounded-2xl border border-slate-200 bg-white p-2 shadow-2xl"},We={key:0,class:"mt-4 lg:hidden"},Ee={class:"-mx-1 mt-3 flex gap-2 overflow-x-auto px-1 pb-1 lg:hidden"},Re={class:"px-4 py-6 sm:px-6"},st=ee({__name:"default",setup(Fe){const G=[{label:"Дашборд",to:"/"},{label:"События",to:"/events",activePrefixes:["/events"]},{label:"Check-in",to:"/events/check-in",activePrefixes:["/events/check-in","/checkin"]},{label:"Аудитория",to:"/audience"},{label:"Маркетинг",to:"/marketing"},{label:"Финансы / Wallet",to:"/finance",activePrefixes:["/finance","/wallet"]},{label:"Профиль / Настройки",to:"/settings/profile",activePrefixes:["/settings"]}],X=[{label:"Обзор",to:"/venue/overview"},{label:"Календарь занятости",to:"/venue/calendar"},{label:"Настройки профиля",to:"/settings/profile",activePrefixes:["/settings"]}],x=te(),$=se(),{currentContext:u,availableContexts:B}=ae($),P=o=>(o.activePrefixes?.length?o.activePrefixes:[o.to]).some(v=>v==="/"?x.path==="/":x.path.startsWith(v)),S=d(()=>{const o=x.meta.title;return o||M.value.find(v=>P(v))?.label||"Workspace"}),L=d(()=>{const o=x.meta.breadcrumbs;return o?.length?o:[{label:u.value?.data?.name||"SmartEvents"},{label:S.value}]}),A=d(()=>x.meta.actionLabel),I=d(()=>x.meta.actionTo),M=d(()=>u.value?.type==="venue"?X:G),O=d(()=>u.value?.data?.name||"Выберите контекст"),H=d(()=>u.value?.type==="venue"?"Площадка":"Организатор"),J=d(()=>O.value.trim().charAt(0).toUpperCase()||"S"),K=d(()=>u.value?.data?.logo_url||""),T=d(()=>B.value.filter(o=>o.type==="organizer")),U=d(()=>B.value.filter(o=>o.type==="venue")),b=F(!1),h=F(!1),Q=()=>{I.value&&_(I.value)},Y=o=>o==="venue"?"/venue/overview":"/",V=async(o,t)=>{const v=$.selectContext(o,t);if(b.value=!1,!!v){if(x.path==="/onboarding"){await _(Y(o));return}o==="venue"&&!x.path.startsWith("/venue")&&await _("/venue/overview"),o==="organizer"&&x.path.startsWith("/venue")&&await _("/")}},W=async o=>{h.value=!1,await _({path:"/onboarding",query:{create:o}})},E=o=>{const t=o.target;t?.closest("[data-context-menu-root]")||(b.value=!1),t?.closest("[data-create-menu-root]")||(h.value=!1)};return oe(()=>{window.addEventListener("click",E)}),ne(()=>{window.removeEventListener("click",E)}),(o,t)=>{const v=ie("OrganizerSidebar"),y=Z;return n(),r("div",ve,[l(v),s("div",me,[s("header",fe,[s("div",be,[s("div",he,[s("div",ge,[s("nav",_e,[(n(!0),r(g,null,k(e(L),(a,w)=>(n(),r(g,{key:`${a.label}-${w}`},[a.to?(n(),f(y,{key:0,to:a.to,class:"hover:text-slate-900"},{default:c(()=>[m(i(a.label),1)]),_:2},1032,["to"])):(n(),r("span",we,i(a.label),1)),w<e(L).length-1?(n(),f(e(ce),{key:2,class:"h-3 w-3 text-slate-400"})):p("",!0)],64))),128))]),s("h1",ke,i(e(S)),1)]),s("div",ye,[s("div",Ce,[s("button",{class:"inline-flex items-center gap-3 rounded-xl border border-slate-200 bg-white px-3 py-2 text-left shadow-sm transition hover:border-slate-300",onClick:t[0]||(t[0]=R(a=>b.value=!e(b),["stop"]))},[l(e(C),{class:"h-8 w-8 border border-slate-200"},{default:c(()=>[l(e(z),{src:e(K)},null,8,["src"]),l(e(N),{class:"bg-slate-100 text-slate-700 font-semibold"},{default:c(()=>[m(i(e(J)),1)]),_:1})]),_:1}),s("div",ze,[s("p",Ne,i(e(O)),1),s("p",$e,i(e(H)),1)]),l(e(de),{class:"h-4 w-4 text-slate-400"})]),e(b)?(n(),r("div",Be,[t[8]||(t[8]=s("div",{class:"px-2 py-2 text-xs font-semibold uppercase tracking-[0.18em] text-slate-400"}," Контекст ",-1)),e(T).length?(n(),r("div",Pe,[t[5]||(t[5]=s("p",{class:"px-2 pt-1 text-[11px] font-semibold uppercase tracking-[0.16em] text-slate-400"}," Организаторы ",-1)),(n(!0),r(g,null,k(e(T),a=>(n(),r("button",{key:`organizer-${a.id}`,class:"flex w-full items-center gap-3 rounded-xl px-3 py-2 text-left transition hover:bg-slate-100",onClick:w=>V("organizer",a.id)},[l(e(C),{class:"h-8 w-8 border border-slate-200"},{default:c(()=>[l(e(z),{src:a.data.logo_url||""},null,8,["src"]),l(e(N),{class:"bg-cyan-50 text-cyan-700 font-semibold"},{default:c(()=>[m(i(a.data.name.charAt(0).toUpperCase()),1)]),_:2},1024)]),_:2},1024),s("div",Le,[s("p",Ae,i(a.data.name),1),t[4]||(t[4]=s("p",{class:"text-xs text-slate-500"},"Organizer",-1))]),e(u)?.type===a.type&&e(u)?.id===a.id?(n(),f(e(q),{key:0,class:"h-4 w-4 text-cyan-600"})):p("",!0)],8,Se))),128))])):p("",!0),e(U).length?(n(),r("div",Ie,[t[7]||(t[7]=s("p",{class:"px-2 pt-1 text-[11px] font-semibold uppercase tracking-[0.16em] text-slate-400"}," Площадки ",-1)),(n(!0),r(g,null,k(e(U),a=>(n(),r("button",{key:`venue-${a.id}`,class:"flex w-full items-center gap-3 rounded-xl px-3 py-2 text-left transition hover:bg-slate-100",onClick:w=>V("venue",a.id)},[l(e(C),{class:"h-8 w-8 border border-slate-200"},{default:c(()=>[l(e(z),{src:a.data.logo_url||""},null,8,["src"]),l(e(N),{class:"bg-amber-50 text-amber-700 font-semibold"},{default:c(()=>[m(i(a.data.name.charAt(0).toUpperCase()),1)]),_:2},1024)]),_:2},1024),s("div",Oe,[s("p",Te,i(a.data.name),1),t[6]||(t[6]=s("p",{class:"text-xs text-slate-500"},"Venue",-1))]),e(u)?.type===a.type&&e(u)?.id===a.id?(n(),f(e(q),{key:0,class:"h-4 w-4 text-cyan-600"})):p("",!0)],8,Me))),128))])):p("",!0)])):p("",!0)]),s("div",Ue,[l(e(D),{variant:"outline",class:"gap-2 border-slate-300 bg-white text-slate-700 hover:bg-slate-50",onClick:t[1]||(t[1]=R(a=>h.value=!e(h),["stop"]))},{default:c(()=>[l(e(j),{class:"h-4 w-4"}),t[9]||(t[9]=m(" Создать ",-1))]),_:1}),e(h)?(n(),r("div",Ve,[s("button",{class:"flex w-full items-center gap-3 rounded-xl px-3 py-2 text-left transition hover:bg-slate-100",onClick:t[2]||(t[2]=a=>W("organizer"))},[l(e(xe),{class:"h-4 w-4 text-cyan-600"}),t[10]||(t[10]=s("div",null,[s("p",{class:"text-sm font-medium text-slate-800"},"Новый организатор"),s("p",{class:"text-xs text-slate-500"},"Запустить новый бренд событий")],-1))]),s("button",{class:"mt-1 flex w-full items-center gap-3 rounded-xl px-3 py-2 text-left transition hover:bg-slate-100",onClick:t[3]||(t[3]=a=>W("venue"))},[l(e(pe),{class:"h-4 w-4 text-amber-600"}),t[11]||(t[11]=s("div",null,[s("p",{class:"text-sm font-medium text-slate-800"},"Новая площадка"),s("p",{class:"text-xs text-slate-500"},"Добавить пространство под ивенты")],-1))])])):p("",!0)]),e(A)?(n(),f(e(D),{key:0,onClick:Q},{default:c(()=>[m(i(e(A)),1)]),_:1})):p("",!0)])]),e(u)?.type!=="venue"?(n(),r("div",We,[l(y,{to:"/events/create",class:"inline-flex items-center gap-2 rounded-full bg-slate-900 px-4 py-2 text-sm font-medium text-white transition hover:bg-slate-800"},{default:c(()=>[l(e(j),{class:"h-4 w-4"}),t[12]||(t[12]=m(" Создать событие ",-1))]),_:1})])):p("",!0),s("nav",Ee,[(n(!0),r(g,null,k(e(M),a=>(n(),f(y,{key:`mobile-${a.to}`,to:a.to,class:re(["whitespace-nowrap rounded-full px-3 py-1.5 text-sm font-medium transition",P(a)?"bg-slate-900 text-white":"bg-white text-slate-600"])},{default:c(()=>[m(i(a.label),1)]),_:2},1032,["to","class"]))),128))])])]),s("main",Re,[le(o.$slots,"default")])])])}}});export{st as default};
