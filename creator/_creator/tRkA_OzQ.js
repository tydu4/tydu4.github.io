import{b as Te,a as qe,u as De,a1 as Ge,G as pe,C as i,D as o,M as b,R as s,U as W,N as d,P as y,F as He,S as k,O as w,W as p,V as ee,J as me,Z as ge,X as We,l as u,$ as Je,a2 as F,B as n,t as M}from"./D9Gj93nn.js";import _ from"./BTl0NxUM.js";import x from"./CFXH2yXk.js";import Ke from"./96D5_NCN.js";import{c as j}from"./ZqIlnLQN.js";import{X as te}from"./8ZRxM4AB.js";import{S as Xe}from"./CLW889pg.js";import"./CkYB-R1u.js";import"./c5FhCeC0.js";const Ye=j("image-plus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]);const S=j("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const Ze=j("locate-fixed",[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const fe=j("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);const Qe=j("shield-ellipsis",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}]]);const se=j("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),et={class:"space-y-6"},tt={class:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm"},st={class:"text-xl font-semibold tracking-tight text-slate-900"},lt={key:0,class:"rounded-2xl border border-dashed border-slate-300 bg-white p-8 text-center"},at={key:0,class:"rounded-2xl border border-slate-200 bg-white p-8"},ot={class:"flex items-center gap-3 text-sm text-slate-600"},rt={class:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm"},nt={key:0,class:"mt-4 rounded-xl border border-amber-200 bg-amber-50 px-3 py-2 text-sm text-amber-700"},it={key:1,class:"mt-4 rounded-xl border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-700"},dt={class:"mt-6 grid gap-4 md:grid-cols-2"},ut={class:"rounded-xl border border-slate-200 p-4"},ct={class:"mt-3 flex h-40 items-center justify-center overflow-hidden rounded-lg border border-dashed border-slate-300 bg-slate-50"},pt=["src"],mt={key:1,class:"text-xs text-slate-500"},gt={class:"mt-3 flex gap-2"},ft={class:"rounded-xl border border-slate-200 p-4"},yt={class:"mt-3 flex h-40 items-center justify-center overflow-hidden rounded-lg border border-dashed border-slate-300 bg-slate-50"},vt=["src"],bt={key:1,class:"text-xs text-slate-500"},xt={class:"mt-3 flex gap-2"},ht={class:"mt-6 grid gap-4 md:grid-cols-2"},kt={class:"space-y-2"},wt={class:"space-y-2"},_t={class:"space-y-2 md:col-span-2"},Ut={class:"mt-6 grid gap-4 md:grid-cols-3"},Vt={class:"space-y-2"},Ct={class:"space-y-2"},St={class:"space-y-2"},Lt={class:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm"},zt={class:"mt-4 grid gap-4 md:grid-cols-2"},Ft={class:"text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},Mt={key:0,class:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm"},jt={class:"mt-4 grid gap-4 md:grid-cols-2"},It={class:"space-y-2"},$t={class:"space-y-2"},Pt={class:"mt-4 grid gap-4 lg:grid-cols-[1fr_280px]"},Rt={class:"overflow-hidden rounded-xl border border-slate-200"},Bt=["src"],At={class:"space-y-3 rounded-xl border border-slate-200 p-4"},Ot={class:"space-y-2"},Et={class:"space-y-2"},Nt={class:"mt-4 grid gap-4 md:grid-cols-3"},Tt={class:"space-y-2"},qt={class:"flex items-center gap-3 rounded-xl border border-slate-200 px-3 py-2 text-sm text-slate-700"},Dt={class:"flex items-center gap-3 rounded-xl border border-slate-200 px-3 py-2 text-sm text-slate-700"},Gt={class:"mt-6"},Ht={class:"flex items-center justify-between gap-3"},Wt={key:0,class:"mt-3 grid gap-3 sm:grid-cols-2 lg:grid-cols-3"},Jt=["src","alt"],Kt=["onClick"],Xt={key:1,class:"mt-3 text-sm text-slate-500"},Yt={class:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm"},Zt={class:"mt-4 flex flex-wrap items-center gap-3"},Qt={key:0,class:"mt-4 space-y-2 rounded-xl border border-slate-200 bg-slate-50 p-3 text-sm text-slate-700"},es={class:"truncate"},ts={class:"text-xs text-slate-500"},ss={key:1,class:"mt-4 rounded-xl border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-700"},ls={key:2,class:"mt-4 rounded-xl border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-700"},as={class:"mt-4 flex justify-end"},os={class:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm"},rs={class:"flex flex-wrap items-center justify-between gap-3"},ns={key:0,class:"text-sm text-rose-600"},is={key:1,class:"text-sm text-emerald-600"},ds={key:2,class:"text-sm text-slate-500"},hs=Te({__name:"index",setup(us){const J=[{key:"telegram",label:"Telegram",placeholder:"https://t.me/brand"},{key:"vk",label:"VK",placeholder:"https://vk.com/brand"},{key:"instagram",label:"Instagram",placeholder:"https://instagram.com/brand"},{key:"youtube",label:"YouTube",placeholder:"https://youtube.com/@brand"}],le=()=>({name:"",slug:"",bio:"",phone:"",website:"",email:"",logoUrl:"",coverUrl:"",address:"",city:"",lat:"",lon:"",capacity:"",parking:!1,wifi:!1,galleryUrls:[],socialLinks:{telegram:"",vk:"",instagram:"",youtube:""}}),ae=qe(),L=De(),{currentContext:h}=Ge(ae),t=Je(le()),K=u(!1),B=u(""),A=u(!1),I=u(""),m=u(""),v=u(""),O=u(!1),E=u(!1),N=u(!1),$=u(!1),T=u(!1),g=u("unverified"),U=u([]),q=u(!1),z=u(""),C=u(""),oe=u(null),re=u(null),ne=u(null),D=u(null),ye=M(()=>!!h.value),X=M(()=>h.value?.type==="venue"),ve=M(()=>X.value?"площадки":"организатора"),be=M(()=>g.value==="verified"?"Подтвержден":g.value==="pending"?"На проверке":"Не подтвержден"),xe=M(()=>g.value==="verified"?"border-emerald-200 bg-emerald-50 text-emerald-700":g.value==="pending"?"border-amber-200 bg-amber-50 text-amber-700":"border-slate-200 bg-slate-100 text-slate-700"),he=M(()=>{const l=G(t.lat),e=G(t.lon);if(l!==null&&e!==null)return`https://www.google.com/maps?q=${l},${e}&z=16&output=embed`;const a=[t.address.trim(),t.city.trim()].filter(Boolean).join(", ");return a?`https://www.google.com/maps?q=${encodeURIComponent(a)}&output=embed`:"https://www.google.com/maps?q=Moscow&output=embed"}),V=l=>l.trim()||null,Y=l=>l.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),G=l=>{const e=l.trim().replace(",",".");if(!e)return null;const a=Number(e);return Number.isFinite(a)?a:null},ie=l=>{if(!l)return!1;const e=l.toLowerCase();return e==="true"||e==="1"||e==="yes"||e==="on"},de=l=>{if(!l||typeof l!="object")return{};const e=l,a={};for(const[r,c]of Object.entries(e)){if(typeof c=="string"&&c.trim()){a[r]=c.trim();continue}(typeof c=="number"||typeof c=="boolean")&&(a[r]=String(c))}return a},ke=l=>{if(typeof l=="string")return l;if(!l||typeof l!="object")return"";const e=l;if(typeof e.url=="string")return e.url;if(typeof e.image_url=="string")return e.image_url;const a=e.data;if(a&&typeof a=="object"){const r=a;if(typeof r.url=="string")return r.url;if(typeof r.image_url=="string")return r.image_url}return""},Z=(l,e)=>{const a=l;if(typeof a?.data?.detail=="string"&&a.data.detail.trim())return a.data.detail;if(Array.isArray(a?.data?.detail)&&a.data?.detail.length){const r=a.data.detail[0];if(typeof r?.msg=="string"&&r.msg.trim())return r.msg}return typeof a?.data?.message=="string"&&a.data.message.trim()?a.data.message:typeof a?.statusMessage=="string"&&a.statusMessage.trim()?a.statusMessage:typeof a?.message=="string"&&a.message.trim()?a.message:e},we=l=>l<1024?`${l} B`:l<1024*1024?`${Math.round(l/1024)} KB`:`${(l/(1024*1024)).toFixed(1)} MB`,_e=()=>{const l=le();Object.assign(t,l),T.value=!1,v.value="",g.value="unverified"},ue=l=>{for(const e of J)t.socialLinks[e.key]=l[e.key]||"";t.email=l.email||""},Ue=l=>{const e=de(l.social_links);if(t.name=l.name||"",t.slug=l.slug||"",t.bio=l.description||"",t.logoUrl=l.logo_url||"",t.coverUrl=l.cover_image_url||"",t.website=l.website||"",t.phone=e.phone||"",ue(e),l.is_verified)g.value="verified";else{const a=e.verification_status;g.value=a==="pending"?"pending":"unverified"}},Ve=l=>{const e=de(l.social_links);t.name=l.name||"",t.slug=l.slug||"",t.bio=l.description||"",t.address=l.address||"",t.city=l.city||"",t.lat=l.lat!==void 0&&l.lat!==null?String(l.lat):"",t.lon=l.lon!==void 0&&l.lon!==null?String(l.lon):"",t.phone=l.contact_phone||e.phone||"",t.website=e.website||"",t.logoUrl=e.logo_url||"",t.coverUrl=e.cover_image_url||"",t.galleryUrls=Array.isArray(l.images)?[...l.images]:[],t.capacity=e.capacity||"",t.parking=ie(e.parking),t.wifi=ie(e.wifi),ue(e);const a=e.verification_status;g.value=a==="verified"?"verified":a==="pending"?"pending":"unverified"},Ce=()=>{const l=h.value;l&&(t.name=l.data?.name||"",t.slug=l.data?.slug||"",t.logoUrl=l.data?.logo_url||"")};let P=0;const ce=async()=>{const l=h.value;if(_e(),B.value="",I.value="",m.value="",z.value="",C.value="",U.value=[],!l)return;const e=++P;K.value=!0,Ce();try{const a=l.data?.slug;if(!a)return;if(l.type==="organizer"){const c=await L.apiFetch(`/api/v1/public/organizers/${a}`,{baseURL:F("/api/v1/public/organizers")});if(e!==P)return;Ue(c);return}const r=await L.apiFetch(`/api/v1/public/venues/${a}`,{baseURL:F("/api/v1/public/venues")});if(e!==P)return;Ve(r)}catch(a){if(e!==P)return;B.value=Z(a,"Не удалось загрузить полный профиль. Показаны базовые данные из текущего контекста.")}finally{e===P&&(K.value=!1)}};pe(()=>[h.value?.type,h.value?.id,h.value?.data?.slug],()=>{ce()},{immediate:!0}),pe(()=>t.name,l=>{T.value||(t.slug=Y(l))});const Se=l=>{T.value=!0,t.slug=l},Le=()=>{T.value=!0,t.slug=Y(t.slug||t.name)},ze=()=>oe.value?.click(),Fe=()=>re.value?.click(),Me=()=>ne.value?.click(),je=()=>D.value?.click(),H=async l=>{if(!l.type.startsWith("image/"))return v.value="Поддерживаются только изображения.",null;if(l.size>10*1024*1024)return v.value="Максимальный размер файла: 10 MB.",null;try{const e=new FormData;e.append("file",l);const a=await L.apiFetch("/api/v1/events/upload-image",{method:"POST",baseURL:F("/api/v1/events/upload-image"),body:e}),r=ke(a);return r||(v.value="Сервер не вернул URL загруженного файла.",null)}catch{return v.value="Ошибка загрузки файла.",null}},Ie=async l=>{const e=l.target,a=e?.files?.[0];if(!a)return;v.value="",O.value=!0;const r=await H(a);r&&(t.logoUrl=r),O.value=!1,e&&(e.value="")},$e=async l=>{const e=l.target,a=e?.files?.[0];if(!a)return;v.value="",E.value=!0;const r=await H(a);r&&(t.coverUrl=r),E.value=!1,e&&(e.value="")},Pe=async l=>{const e=l.target,a=e?.files?Array.from(e.files):[];if(a.length){v.value="",N.value=!0;for(const r of a){const c=await H(r);c&&!t.galleryUrls.includes(c)&&t.galleryUrls.push(c)}N.value=!1,e&&(e.value="")}},Re=l=>{t.galleryUrls.splice(l,1)},Be=()=>{if(!navigator.geolocation){m.value="Геолокация недоступна в текущем браузере.";return}$.value=!0,m.value="",navigator.geolocation.getCurrentPosition(({coords:l})=>{t.lat=l.latitude.toFixed(6),t.lon=l.longitude.toFixed(6),$.value=!1},()=>{$.value=!1,m.value="Не удалось получить координаты. Проверьте доступ к геолокации."},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},Ae=()=>{const l={};for(const a of J){const r=t.socialLinks[a.key].trim();r&&(l[a.key]=r)}const e=t.email.trim();return e&&(l.email=e),g.value!=="unverified"&&(l.verification_status=g.value),l},Oe=async()=>{const l=h.value;if(!l)return;I.value="",m.value="",v.value="";const e=t.name.trim();if(!e){m.value="Введите название.";return}const a=Y(t.slug||t.name);if(!a){m.value="Slug может содержать только латиницу и цифры.";return}t.slug=a;const r=G(t.lat),c=G(t.lon);if(t.lat.trim()&&r===null){m.value="Некорректный формат latitude.";return}if(t.lon.trim()&&c===null){m.value="Некорректный формат longitude.";return}if(X.value){if(!t.address.trim()){m.value="Для площадки укажите адрес.";return}if(!t.city.trim()){m.value="Для площадки укажите город.";return}}A.value=!0;try{const f=Ae();if(l.type==="organizer"){const R=t.phone.trim();R&&(f.phone=R);const Q={name:e,slug:a,description:V(t.bio),logo_url:V(t.logoUrl),cover_image_url:V(t.coverUrl),website:V(t.website),social_links:Object.keys(f).length?f:null};await L.apiFetch(`/api/v1/management/organizers/${l.id}`,{method:"PATCH",baseURL:F("/api/v1/management/organizers"),body:Q})}else{const R=t.website.trim();R&&(f.website=R),t.logoUrl.trim()&&(f.logo_url=t.logoUrl.trim()),t.coverUrl.trim()&&(f.cover_image_url=t.coverUrl.trim()),t.capacity.trim()&&(f.capacity=t.capacity.trim()),f.parking=t.parking,f.wifi=t.wifi;const Q={name:e,slug:a,address:V(t.address),city:V(t.city),lat:r,lon:c,description:V(t.bio),contact_phone:V(t.phone),images:t.galleryUrls.length?[...t.galleryUrls]:null,social_links:Object.keys(f).length?f:null};await L.apiFetch(`/api/v1/management/venues/${l.id}`,{method:"PATCH",baseURL:F("/api/v1/management/venues"),body:Q})}await ae.fetchMyEntities({force:!0}),await ce(),I.value="Изменения сохранены."}catch(f){m.value=Z(f,"Не удалось сохранить изменения.")}finally{A.value=!1}},Ee=l=>{const e=l.target,a=e?.files?Array.from(e.files):[];U.value=a,z.value="",C.value=""},Ne=async()=>{const l=h.value;if(l){if(!U.value.length){C.value="Добавьте документы перед отправкой запроса.";return}q.value=!0,z.value="",C.value="";try{const e=[];for(const r of U.value){let c=null;r.type.startsWith("image/")&&(c=await H(r)),e.push({name:r.name,size:r.size,type:r.type||"application/octet-stream",url:c})}const a=JSON.stringify({source:"organizer-profile-settings",requested_at:new Date().toISOString(),context_type:l.type,documents:e});await L.apiFetch("/api/v1/management/claim",{method:"POST",baseURL:F("/api/v1/management/claim"),body:{entity_type:l.type,entity_id:l.id,proof_data:a}}),g.value="pending",z.value="Запрос на верификацию отправлен.",U.value=[],D.value&&(D.value.value="")}catch(e){C.value=Z(e,"Не удалось отправить запрос на верификацию.")}finally{q.value=!1}}};return(l,e)=>(n(),i("div",et,[o("section",tt,[o("h2",st," Профиль "+b(s(ve)),1),e[14]||(e[14]=o("p",{class:"mt-1 text-sm text-slate-600"}," Обновляйте публичные данные и контактную информацию текущей сущности. ",-1))]),s(ye)?(n(),i(W,{key:1},[s(K)?(n(),i("section",at,[o("div",ot,[d(s(S),{class:"h-4 w-4 animate-spin"}),e[16]||(e[16]=y(" Загрузка профиля... ",-1))])])):(n(),i("form",{key:1,class:"space-y-6",onSubmit:He(Oe,["prevent"])},[o("section",rt,[e[29]||(e[29]=o("h3",{class:"text-base font-semibold text-slate-900"},"Общие настройки",-1)),e[30]||(e[30]=o("p",{class:"mt-1 text-sm text-slate-600"}," Логотип, обложка, описание и контактные данные. ",-1)),s(B)?(n(),i("p",nt,b(s(B)),1)):k("",!0),s(v)?(n(),i("p",it,b(s(v)),1)):k("",!0),o("div",dt,[o("div",ut,[e[19]||(e[19]=o("p",{class:"text-sm font-semibold text-slate-900"},"Логотип",-1)),o("div",ct,[s(t).logoUrl?(n(),i("img",{key:0,src:s(t).logoUrl,alt:"Logo",class:"h-full w-full object-cover"},null,8,pt)):(n(),i("span",mt,"Нет загруженного логотипа"))]),o("input",{ref_key:"logoInputRef",ref:oe,type:"file",class:"hidden",accept:"image/*",onChange:Ie},null,544),o("div",gt,[d(s(_),{type:"button",variant:"outline",class:"gap-2",disabled:s(O),onClick:ze},{default:w(()=>[s(O)?(n(),p(s(S),{key:0,class:"h-4 w-4 animate-spin"})):(n(),p(s(se),{key:1,class:"h-4 w-4"})),e[17]||(e[17]=y(" Загрузить ",-1))]),_:1},8,["disabled"]),s(t).logoUrl?(n(),p(s(_),{key:0,type:"button",variant:"ghost",class:"gap-2 text-slate-600",onClick:e[0]||(e[0]=a=>s(t).logoUrl="")},{default:w(()=>[d(s(te),{class:"h-4 w-4"}),e[18]||(e[18]=y(" Очистить ",-1))]),_:1})):k("",!0)])]),o("div",ft,[e[22]||(e[22]=o("p",{class:"text-sm font-semibold text-slate-900"},"Обложка",-1)),o("div",yt,[s(t).coverUrl?(n(),i("img",{key:0,src:s(t).coverUrl,alt:"Cover",class:"h-full w-full object-cover"},null,8,vt)):(n(),i("span",bt,"Нет загруженной обложки"))]),o("input",{ref_key:"coverInputRef",ref:re,type:"file",class:"hidden",accept:"image/*",onChange:$e},null,544),o("div",xt,[d(s(_),{type:"button",variant:"outline",class:"gap-2",disabled:s(E),onClick:Fe},{default:w(()=>[s(E)?(n(),p(s(S),{key:0,class:"h-4 w-4 animate-spin"})):(n(),p(s(Ye),{key:1,class:"h-4 w-4"})),e[20]||(e[20]=y(" Загрузить ",-1))]),_:1},8,["disabled"]),s(t).coverUrl?(n(),p(s(_),{key:0,type:"button",variant:"ghost",class:"gap-2 text-slate-600",onClick:e[1]||(e[1]=a=>s(t).coverUrl="")},{default:w(()=>[d(s(te),{class:"h-4 w-4"}),e[21]||(e[21]=y(" Очистить ",-1))]),_:1})):k("",!0)])])]),o("div",ht,[o("div",kt,[e[23]||(e[23]=o("label",{class:"text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"}," Название ",-1)),d(s(x),{modelValue:s(t).name,"onUpdate:modelValue":e[2]||(e[2]=a=>s(t).name=a),placeholder:"Smart Events"},null,8,["modelValue"])]),o("div",wt,[o("div",{class:"flex items-center justify-between gap-2"},[e[24]||(e[24]=o("label",{class:"text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"}," Slug ",-1)),o("button",{type:"button",class:"text-xs font-medium text-cyan-700 hover:text-cyan-800",onClick:Le}," Нормализовать ")]),d(s(x),{"model-value":s(t).slug,placeholder:"smart-events","onUpdate:modelValue":Se},null,8,["model-value"])]),o("div",_t,[e[25]||(e[25]=o("label",{class:"text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"}," Описание ",-1)),d(s(Ke),{modelValue:s(t).bio,"onUpdate:modelValue":e[3]||(e[3]=a=>s(t).bio=a),rows:4,placeholder:"Кратко расскажите о деятельности."},null,8,["modelValue"])])]),o("div",Ut,[o("div",Vt,[e[26]||(e[26]=o("label",{class:"text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"}," Телефон ",-1)),d(s(x),{modelValue:s(t).phone,"onUpdate:modelValue":e[4]||(e[4]=a=>s(t).phone=a),type:"tel",placeholder:"+7 (900) 000-00-00"},null,8,["modelValue"])]),o("div",Ct,[e[27]||(e[27]=o("label",{class:"text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"}," Сайт ",-1)),d(s(x),{modelValue:s(t).website,"onUpdate:modelValue":e[5]||(e[5]=a=>s(t).website=a),type:"url",placeholder:"https://example.com"},null,8,["modelValue"])]),o("div",St,[e[28]||(e[28]=o("label",{class:"text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"}," Email ",-1)),d(s(x),{modelValue:s(t).email,"onUpdate:modelValue":e[6]||(e[6]=a=>s(t).email=a),type:"email",placeholder:"team@example.com"},null,8,["modelValue"])])])]),o("section",Lt,[e[31]||(e[31]=o("h3",{class:"text-base font-semibold text-slate-900"},"Социальные сети",-1)),e[32]||(e[32]=o("p",{class:"mt-1 text-sm text-slate-600"}," Список полей формируется динамически и сохраняется в social_links. ",-1)),o("div",zt,[(n(),i(W,null,ee(J,a=>o("div",{key:a.key,class:"space-y-2"},[o("label",Ft,b(a.label),1),d(s(x),{modelValue:s(t).socialLinks[a.key],"onUpdate:modelValue":r=>s(t).socialLinks[a.key]=r,placeholder:a.placeholder,type:"url"},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),64))])]),s(X)?(n(),i("section",Mt,[e[43]||(e[43]=o("h3",{class:"text-base font-semibold text-slate-900"},"Параметры площадки",-1)),e[44]||(e[44]=o("p",{class:"mt-1 text-sm text-slate-600"}," Адрес, пин на карте, характеристики и галерея интерьера. ",-1)),o("div",jt,[o("div",It,[e[33]||(e[33]=o("label",{class:"text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"}," Город ",-1)),d(s(x),{modelValue:s(t).city,"onUpdate:modelValue":e[7]||(e[7]=a=>s(t).city=a),placeholder:"Москва"},null,8,["modelValue"])]),o("div",$t,[e[34]||(e[34]=o("label",{class:"text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"}," Адрес ",-1)),d(s(x),{modelValue:s(t).address,"onUpdate:modelValue":e[8]||(e[8]=a=>s(t).address=a),placeholder:"ул. Пример, 10"},null,8,["modelValue"])])]),o("div",Pt,[o("div",Rt,[o("iframe",{class:"h-[260px] w-full",src:s(he),loading:"lazy",referrerpolicy:"no-referrer-when-downgrade"},null,8,Bt)]),o("div",At,[o("div",Ot,[e[35]||(e[35]=o("label",{class:"text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"}," Latitude ",-1)),d(s(x),{modelValue:s(t).lat,"onUpdate:modelValue":e[9]||(e[9]=a=>s(t).lat=a),type:"text",placeholder:"55.7558"},null,8,["modelValue"])]),o("div",Et,[e[36]||(e[36]=o("label",{class:"text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"}," Longitude ",-1)),d(s(x),{modelValue:s(t).lon,"onUpdate:modelValue":e[10]||(e[10]=a=>s(t).lon=a),type:"text",placeholder:"37.6173"},null,8,["modelValue"])]),d(s(_),{type:"button",variant:"outline",class:"w-full gap-2",disabled:s($),onClick:Be},{default:w(()=>[s($)?(n(),p(s(S),{key:0,class:"h-4 w-4 animate-spin"})):(n(),p(s(Ze),{key:1,class:"h-4 w-4"})),e[37]||(e[37]=y(" Использовать геопозицию ",-1))]),_:1},8,["disabled"])])]),o("div",Nt,[o("div",Tt,[e[38]||(e[38]=o("label",{class:"text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"}," Вместимость ",-1)),d(s(x),{modelValue:s(t).capacity,"onUpdate:modelValue":e[11]||(e[11]=a=>s(t).capacity=a),type:"number",placeholder:"250"},null,8,["modelValue"])]),o("label",qt,[me(o("input",{"onUpdate:modelValue":e[12]||(e[12]=a=>s(t).parking=a),type:"checkbox",class:"h-4 w-4 rounded border-slate-300 text-cyan-600 focus:ring-cyan-500"},null,512),[[ge,s(t).parking]]),e[39]||(e[39]=y(" Парковка ",-1))]),o("label",Dt,[me(o("input",{"onUpdate:modelValue":e[13]||(e[13]=a=>s(t).wifi=a),type:"checkbox",class:"h-4 w-4 rounded border-slate-300 text-cyan-600 focus:ring-cyan-500"},null,512),[[ge,s(t).wifi]]),e[40]||(e[40]=y(" Wi-Fi ",-1))])]),o("div",Gt,[o("div",Ht,[e[42]||(e[42]=o("h4",{class:"text-sm font-semibold text-slate-900"},"Галерея интерьера",-1)),d(s(_),{type:"button",variant:"outline",class:"gap-2",disabled:s(N),onClick:Me},{default:w(()=>[s(N)?(n(),p(s(S),{key:0,class:"h-4 w-4 animate-spin"})):(n(),p(s(se),{key:1,class:"h-4 w-4"})),e[41]||(e[41]=y(" Добавить фото ",-1))]),_:1},8,["disabled"])]),o("input",{ref_key:"galleryInputRef",ref:ne,type:"file",class:"hidden",accept:"image/*",multiple:"",onChange:Pe},null,544),s(t).galleryUrls.length?(n(),i("div",Wt,[(n(!0),i(W,null,ee(s(t).galleryUrls,(a,r)=>(n(),i("div",{key:`${a}-${r}`,class:"group relative overflow-hidden rounded-xl border border-slate-200"},[o("img",{src:a,alt:`Gallery ${r+1}`,class:"h-28 w-full object-cover"},null,8,Jt),o("button",{type:"button",class:"absolute right-2 top-2 rounded-full bg-black/60 p-1 text-white opacity-0 transition group-hover:opacity-100",onClick:c=>Re(r)},[d(s(te),{class:"h-3 w-3"})],8,Kt)]))),128))])):(n(),i("p",Xt,"Фотографии интерьера пока не добавлены."))])])):k("",!0),o("section",Yt,[e[47]||(e[47]=o("h3",{class:"text-base font-semibold text-slate-900"},"Верификация",-1)),e[48]||(e[48]=o("p",{class:"mt-1 text-sm text-slate-600"}," Загрузите документы и отправьте запрос на верификацию сущности. ",-1)),o("div",Zt,[o("span",{class:We(["inline-flex items-center gap-2 rounded-full border px-3 py-1 text-xs font-semibold",s(xe)])},[s(g)==="verified"?(n(),p(s(Xe),{key:0,class:"h-3.5 w-3.5"})):s(g)==="pending"?(n(),p(s(Qe),{key:1,class:"h-3.5 w-3.5"})):(n(),p(s(fe),{key:2,class:"h-3.5 w-3.5"})),y(" "+b(s(be)),1)],2),d(s(_),{type:"button",variant:"outline",class:"gap-2",onClick:je},{default:w(()=>[d(s(se),{class:"h-4 w-4"}),e[45]||(e[45]=y(" Загрузить документы ",-1))]),_:1}),o("input",{ref_key:"verificationInputRef",ref:D,type:"file",class:"hidden",accept:".pdf,image/*",multiple:"",onChange:Ee},null,544)]),s(U).length?(n(),i("ul",Qt,[(n(!0),i(W,null,ee(s(U),a=>(n(),i("li",{key:`${a.name}-${a.size}`,class:"flex items-center justify-between gap-3"},[o("span",es,b(a.name),1),o("span",ts,b(we(a.size)),1)]))),128))])):k("",!0),s(C)?(n(),i("p",ss,b(s(C)),1)):k("",!0),s(z)?(n(),i("p",ls,b(s(z)),1)):k("",!0),o("div",as,[d(s(_),{type:"button",class:"gap-2",disabled:s(q)||!s(U).length,onClick:Ne},{default:w(()=>[s(q)?(n(),p(s(S),{key:0,class:"h-4 w-4 animate-spin"})):(n(),p(s(fe),{key:1,class:"h-4 w-4"})),e[46]||(e[46]=y(" Запросить верификацию ",-1))]),_:1},8,["disabled"])])]),o("section",os,[o("div",rs,[o("div",null,[s(m)?(n(),i("p",ns,b(s(m)),1)):s(I)?(n(),i("p",is,b(s(I)),1)):(n(),i("p",ds,"Сохраните изменения, чтобы обновить профиль."))]),d(s(_),{type:"submit",class:"gap-2",disabled:s(A)},{default:w(()=>[s(A)?(n(),p(s(S),{key:0,class:"h-4 w-4 animate-spin"})):k("",!0),e[49]||(e[49]=y(" Сохранить изменения ",-1))]),_:1},8,["disabled"])])])],32))],64)):(n(),i("section",lt,[...e[15]||(e[15]=[o("p",{class:"text-sm text-slate-600"},"Текущий контекст не выбран.",-1)])]))]))}});export{hs as default};
