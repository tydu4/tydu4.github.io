import{b as Y,a as Z,a1 as tt,C as v,D as o,M as d,R as e,N as r,O as n,S as w,Q as et,P as a,F as ot,W as S,l as u,B as f,U as st,V as rt,$ as nt,t as D}from"./Ca6rub8f.js";import b from"./Bc1u1-yo.js";import T from"./C3H3F2YC.js";import B from"./CMZtORL8.js";import lt from"./OaEq_N85.js";import at from"./UmBt094f.js";import dt from"./CIIq8pwL.js";import I from"./C1DnOOhT.js";import R from"./CqcWBI6N.js";import P from"./BmWhZwNF.js";import{M as U}from"./DqSu5gD2.js";import{c as j}from"./Cibw3ATY.js";import"./CkYB-R1u.js";import"./c5FhCeC0.js";const it=j("radio-tower",[["path",{d:"M4.9 16.1C1 12.2 1 5.8 4.9 1.9",key:"s0qx1y"}],["path",{d:"M7.8 4.7a6.14 6.14 0 0 0-.8 7.5",key:"1idnkw"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}],["path",{d:"M16.2 4.8c2 2 2.26 5.11.8 7.47",key:"ojru2q"}],["path",{d:"M19.1 1.9a9.96 9.96 0 0 1 0 14.1",key:"rhi7fg"}],["path",{d:"M9.5 18h5",key:"mfy3pd"}],["path",{d:"m8 22 4-11 4 11",key:"25yftu"}]]);const ut=j("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),mt={class:"space-y-6 pb-4"},ft={class:"rounded-2xl border border-border bg-card p-6 shadow-sm"},ct={class:"flex flex-wrap items-start justify-between gap-4"},xt={class:"mt-1 text-2xl font-semibold tracking-tight text-foreground"},pt={class:"grid gap-4 lg:grid-cols-3"},vt={class:"rounded-2xl border border-border bg-card p-5 shadow-sm"},bt={class:"inline-flex rounded-xl bg-cyan-50 p-2 text-cyan-700"},gt={class:"rounded-2xl border border-border bg-card p-5 shadow-sm"},yt={class:"inline-flex rounded-xl bg-amber-50 p-2 text-amber-700"},wt={class:"rounded-2xl border border-border bg-card p-5 shadow-sm"},kt={class:"inline-flex rounded-xl bg-emerald-50 p-2 text-emerald-700"},_t={class:"grid gap-4 lg:grid-cols-2"},Pt={class:"rounded-2xl border border-border bg-card p-6 shadow-sm"},Ct={class:"flex items-start justify-between gap-3"},Nt={class:"mt-4 text-3xl font-bold leading-tight text-foreground"},Vt={class:"mt-4 flex flex-wrap items-center gap-3"},ht={key:0,class:"text-xs text-muted-foreground"},Lt={key:0,class:"mt-3 text-sm text-emerald-600"},Tt={class:"rounded-2xl border border-border bg-card p-6 shadow-sm"},Rt={class:"flex items-start justify-between gap-3"},Mt={class:"mt-2 flex flex-wrap items-center gap-3"},Ft={class:"w-full max-w-[220px]"},St={class:"mt-4 text-sm text-muted-foreground"},Bt={class:"font-semibold text-foreground"},It={class:"mt-1 text-sm text-muted-foreground"},$t={class:"font-semibold text-foreground"},Dt={key:0,class:"mt-3 text-sm text-emerald-600"},Ut={class:"rounded-2xl border border-border bg-card p-6 shadow-sm"},jt={class:"flex flex-wrap items-start justify-between gap-3"},Et={class:"flex gap-2"},zt={key:0,class:"mt-3 text-sm text-destructive"},At={key:1,class:"mt-3 text-sm text-emerald-600"},Ht={class:"mt-5 rounded-xl border border-border"},qt={class:"flex justify-end gap-2"},le=Y({__name:"index",setup(Gt){const E=Z(),{currentContext:z}=tt(E),C=u(50),k=u(!1),N=u(""),M=u(null),_=u("100"),V=u(100),F=u(150),h=u(""),m=u([{id:1,name:"FRIENDS10",discountPercent:10,activationLimit:220},{id:2,name:"NIGHT25",discountPercent:25,activationLimit:80}]),i=nt({name:"",discountPercent:"",activationLimit:""}),x=u(null),c=u(""),g=u(""),A=new Intl.NumberFormat("ru-RU"),H=new Intl.DateTimeFormat("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),q=D(()=>m.value.reduce((s,t)=>s+t.activationLimit,0)),G=D(()=>V.value*F.value),p=s=>A.format(s),O=s=>s?H.format(s):"",K=async()=>{if(!(k.value||C.value<=0)){k.value=!0,N.value="";try{await new Promise(s=>setTimeout(s,700)),M.value=new Date,N.value=`Push отправлен для ${p(C.value)} ожидающих.`}finally{k.value=!1}}},Q=()=>{const s=Number(_.value);if(!Number.isFinite(s)||s<=0){h.value="Введите корректную награду за друга.";return}V.value=Math.floor(s),_.value=String(V.value),h.value=`Награда обновлена: ${p(V.value)} бонусов.`},L=()=>{i.name="",i.discountPercent="",i.activationLimit="",x.value=null,c.value=""},W=s=>{x.value=s.id,i.name=s.name,i.discountPercent=String(s.discountPercent),i.activationLimit=String(s.activationLimit),c.value="",g.value=`Редактирование промокода ${s.name}.`},J=()=>{c.value="";const s=i.name.trim().toUpperCase(),t=Number(i.discountPercent),l=Number(i.activationLimit);if(!s){c.value="Укажите название промокода.";return}if(!Number.isFinite(t)||t<=0||t>100){c.value="Скидка должна быть в диапазоне от 1 до 100%.";return}if(!Number.isInteger(l)||l<0){c.value="Количество активаций должно быть целым числом от 0.";return}if(m.value.some(y=>y.name===s&&y.id!==x.value)){c.value="Промокод с таким названием уже существует.";return}if(x.value===null){m.value.unshift({id:Date.now(),name:s,discountPercent:Math.floor(t),activationLimit:l}),g.value=`Промокод ${s} создан.`,L();return}m.value=m.value.map(y=>y.id===x.value?{...y,name:s,discountPercent:Math.floor(t),activationLimit:l}:y),g.value=`Промокод ${s} обновлен.`,L()},X=s=>{const t=m.value.find(l=>l.id===s);m.value=m.value.filter(l=>l.id!==s),x.value===s&&L(),t&&(g.value=`Промокод ${t.name} удален.`)};return(s,t)=>(f(),v("div",mt,[o("section",ft,[o("div",ct,[o("div",null,[t[4]||(t[4]=o("p",{class:"text-xs font-semibold uppercase tracking-[0.25em] text-muted-foreground"},"Growth Lab",-1)),o("h2",xt," Маркетинг для "+d(e(z)?.data?.name||"вашего бренда"),1),t[5]||(t[5]=o("p",{class:"mt-2 text-sm text-muted-foreground"}," Управляйте спросом, реферальной программой и промокодами из одного центра. ",-1))]),r(e(b),{class:"gap-2"},{default:n(()=>[r(e(U),{class:"h-4 w-4"}),t[6]||(t[6]=a(" Запустить кампанию ",-1))]),_:1})])]),o("section",pt,[o("div",vt,[o("div",bt,[r(e(ut),{class:"h-4 w-4"})]),t[7]||(t[7]=o("h3",{class:"mt-4 text-base font-semibold text-foreground"},"Performance",-1)),t[8]||(t[8]=o("p",{class:"mt-1 text-sm text-muted-foreground"},"CTR кампаний",-1)),t[9]||(t[9]=o("p",{class:"mt-3 text-2xl font-semibold text-foreground"},"7.8%",-1))]),o("div",gt,[o("div",yt,[r(e(it),{class:"h-4 w-4"})]),t[10]||(t[10]=o("h3",{class:"mt-4 text-base font-semibold text-foreground"},"Reach",-1)),t[11]||(t[11]=o("p",{class:"mt-1 text-sm text-muted-foreground"},"Охват за 30 дней",-1)),t[12]||(t[12]=o("p",{class:"mt-3 text-2xl font-semibold text-foreground"},"124K",-1))]),o("div",wt,[o("div",kt,[r(e(U),{class:"h-4 w-4"})]),t[13]||(t[13]=o("h3",{class:"mt-4 text-base font-semibold text-foreground"},"Retention",-1)),t[14]||(t[14]=o("p",{class:"mt-1 text-sm text-muted-foreground"},"Повторные покупки",-1)),t[15]||(t[15]=o("p",{class:"mt-3 text-2xl font-semibold text-foreground"},"41%",-1))])]),o("section",_t,[o("article",Pt,[o("div",Ct,[t[17]||(t[17]=o("div",null,[o("p",{class:"text-xs font-semibold uppercase tracking-[0.2em] text-muted-foreground"},"Crowd Demand"),o("h3",{class:"mt-1 text-xl font-semibold text-foreground"},"Спрос на вечеринку")],-1)),r(e(B),{variant:"secondary"},{default:n(()=>[...t[16]||(t[16]=[a("Live",-1)])]),_:1})]),o("p",Nt,d(p(e(C)))+" человек ждут вечеринку ",1),t[18]||(t[18]=o("p",{class:"mt-2 text-sm text-muted-foreground"}," Отправьте push-уведомление тем, кто уже проявил интерес к событию. ",-1)),o("div",Vt,[r(e(b),{disabled:e(k)||e(C)===0,onClick:K},{default:n(()=>[a(d(e(k)?"Отправка...":"Анонсировать событие"),1)]),_:1},8,["disabled"]),e(M)?(f(),v("p",ht," Последний анонс: "+d(O(e(M))),1)):w("",!0)]),e(N)?(f(),v("p",Lt,d(e(N)),1)):w("",!0)]),o("article",Tt,[o("div",Rt,[t[19]||(t[19]=o("div",null,[o("p",{class:"text-xs font-semibold uppercase tracking-[0.2em] text-muted-foreground"},"Referral"),o("h3",{class:"mt-1 text-xl font-semibold text-foreground"},"Реферальная программа")],-1)),r(e(B),{variant:"secondary"},{default:n(()=>[a(d(p(e(F))),1)]),_:1})]),t[23]||(t[23]=o("label",{class:"mt-4 block text-sm font-medium text-foreground"},"Награда за друга",-1)),o("div",Mt,[o("div",Ft,[r(e(T),{modelValue:e(_),"onUpdate:modelValue":t[0]||(t[0]=l=>et(_)?_.value=l:null),type:"number",min:"1",placeholder:"100"},null,8,["modelValue"])]),r(e(b),{variant:"outline",onClick:Q},{default:n(()=>[...t[20]||(t[20]=[a("Сохранить",-1)])]),_:1})]),o("p",St,[t[21]||(t[21]=a(" Приведено по ссылкам: ",-1)),o("span",Bt,d(p(e(F)))+" человек",1)]),o("p",It,[t[22]||(t[22]=a(" Начислено бонусов: ",-1)),o("span",$t,d(p(e(G))),1)]),e(h)?(f(),v("p",Dt,d(e(h)),1)):w("",!0)])]),o("section",Ut,[o("div",jt,[t[24]||(t[24]=o("div",null,[o("p",{class:"text-xs font-semibold uppercase tracking-[0.2em] text-muted-foreground"},"Promo Codes"),o("h3",{class:"mt-1 text-xl font-semibold text-foreground"},"Промокоды"),o("p",{class:"mt-2 text-sm text-muted-foreground"},"Название, скидка и лимит активаций в одном журнале.")],-1)),r(e(B),{variant:"secondary"},{default:n(()=>[a("Всего активаций: "+d(p(e(q))),1)]),_:1})]),o("form",{class:"mt-5 grid gap-3 md:grid-cols-4",onSubmit:ot(J,["prevent"])},[r(e(T),{modelValue:e(i).name,"onUpdate:modelValue":t[1]||(t[1]=l=>e(i).name=l),placeholder:"Название"},null,8,["modelValue"]),r(e(T),{modelValue:e(i).discountPercent,"onUpdate:modelValue":t[2]||(t[2]=l=>e(i).discountPercent=l),type:"number",min:"1",max:"100",placeholder:"Скидка %"},null,8,["modelValue"]),r(e(T),{modelValue:e(i).activationLimit,"onUpdate:modelValue":t[3]||(t[3]=l=>e(i).activationLimit=l),type:"number",min:"0",placeholder:"Кол-во активаций"},null,8,["modelValue"]),o("div",Et,[r(e(b),{type:"submit",class:"w-full"},{default:n(()=>[a(d(e(x)!==null?"Сохранить":"Добавить"),1)]),_:1}),e(x)!==null?(f(),S(e(b),{key:0,type:"button",variant:"outline",class:"w-full",onClick:L},{default:n(()=>[...t[25]||(t[25]=[a(" Отмена ",-1)])]),_:1})):w("",!0)])],32),e(c)?(f(),v("p",zt,d(e(c)),1)):e(g)?(f(),v("p",At,d(e(g)),1)):w("",!0),o("div",Ht,[r(e(lt),null,{default:n(()=>[r(e(at),null,{default:n(()=>[r(e(I),null,{default:n(()=>[r(e(R),null,{default:n(()=>[...t[26]||(t[26]=[a("Название",-1)])]),_:1}),r(e(R),null,{default:n(()=>[...t[27]||(t[27]=[a("Скидка %",-1)])]),_:1}),r(e(R),null,{default:n(()=>[...t[28]||(t[28]=[a("Кол-во активаций",-1)])]),_:1}),r(e(R),{class:"text-right"},{default:n(()=>[...t[29]||(t[29]=[a("Действия",-1)])]),_:1})]),_:1})]),_:1}),r(e(dt),null,{default:n(()=>[(f(!0),v(st,null,rt(e(m),l=>(f(),S(e(I),{key:l.id},{default:n(()=>[r(e(P),{class:"font-medium text-foreground"},{default:n(()=>[a(d(l.name),1)]),_:2},1024),r(e(P),null,{default:n(()=>[a(d(l.discountPercent)+"%",1)]),_:2},1024),r(e(P),null,{default:n(()=>[a(d(p(l.activationLimit)),1)]),_:2},1024),r(e(P),null,{default:n(()=>[o("div",qt,[r(e(b),{type:"button",variant:"outline",size:"sm",onClick:$=>W(l)},{default:n(()=>[...t[30]||(t[30]=[a("Редактировать",-1)])]),_:1},8,["onClick"]),r(e(b),{type:"button",variant:"destructive",size:"sm",onClick:$=>X(l.id)},{default:n(()=>[...t[31]||(t[31]=[a("Удалить",-1)])]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128)),e(m).length===0?(f(),S(e(I),{key:0},{default:n(()=>[r(e(P),{colspan:"4",class:"text-sm text-muted-foreground"},{default:n(()=>[...t[32]||(t[32]=[a("Промокодов пока нет.",-1)])]),_:1})]),_:1})):w("",!0)]),_:1})]),_:1})])])]))}});export{le as default};
