import{ad as I,Y as q,ae as G,y as E,a5 as m,af as K,X as T,f as Y,c as J,ag as X,G as M,H as b,O as a,S as V,K as n,L as l,F as L,M as h,J as B}from"./CJct0Du1.js";import{u as Q}from"./DBhd_BX4.js";import"./CrKAO1Du.js";import"./BCmSOTEA.js";import"./B5uDJmdT.js";import"./D96hOBhx.js";import"./CTF75BhX.js";import"./-ph6IaWM.js";import"./B9WBDtYp.js";import"./DwUrod7N.js";import"./nvNydXzv.js";import"./5Tvz58Fd.js";import"./3luMke7s.js";import"./DBN8MR29.js";import v from"./otl20aZW.js";import k from"./DZdvKC0b.js";import C from"./VXFjAwDO.js";import"./DVEWYwXv.js";import U from"./Cv6uNvyJ.js";import"./Xz7cpnIQ.js";import"./CkYB-R1u.js";import"./c5FhCeC0.js";const W=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Z=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",x=[];class st{_data=new D;_hash=new D([...W]);_nDataBytes=0;_minBufferSize=0;finalize(e){e&&this._append(e);const s=this._nDataBytes*8,t=this._data.sigBytes*8;return this._data.words[t>>>5]|=128<<24-t%32,this._data.words[(t+64>>>9<<4)+14]=Math.floor(s/4294967296),this._data.words[(t+64>>>9<<4)+15]=s,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}_doProcessBlock(e,s){const t=this._hash.words;let o=t[0],i=t[1],c=t[2],f=t[3],u=t[4],p=t[5],_=t[6],y=t[7];for(let r=0;r<64;r++){if(r<16)x[r]=e[s+r]|0;else{const g=x[r-15],z=(g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3,w=x[r-2],N=(w<<15|w>>>17)^(w<<13|w>>>19)^w>>>10;x[r]=z+x[r-7]+N+x[r-16]}const A=u&p^~u&_,O=o&i^o&c^i&c,R=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),j=(u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25),F=y+j+A+Z[r]+x[r],$=R+O;y=_,_=p,p=u,u=f+F|0,f=c,c=i,i=o,o=F+$|0}t[0]=t[0]+o|0,t[1]=t[1]+i|0,t[2]=t[2]+c|0,t[3]=t[3]+f|0,t[4]=t[4]+u|0,t[5]=t[5]+p|0,t[6]=t[6]+_|0,t[7]=t[7]+y|0}_append(e){typeof e=="string"&&(e=D.fromUtf8(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_process(e){let s,t=this._data.sigBytes/64;e?t=Math.ceil(t):t=Math.max((t|0)-this._minBufferSize,0);const o=t*16,i=Math.min(o*4,this._data.sigBytes);if(o){for(let c=0;c<o;c+=16)this._doProcessBlock(this._data.words,c);s=this._data.words.splice(0,o),this._data.sigBytes-=i}return new D(s,i)}}class D{words;sigBytes;constructor(e,s){e=this.words=e||[],this.sigBytes=s===void 0?e.length*4:s}static fromUtf8(e){const s=unescape(encodeURIComponent(e)),t=s.length,o=[];for(let i=0;i<t;i++)o[i>>>2]|=(s.charCodeAt(i)&255)<<24-i%4*8;return new D(o,t)}toBase64(){const e=[];for(let s=0;s<this.sigBytes;s+=3){const t=this.words[s>>>2]>>>24-s%4*8&255,o=this.words[s+1>>>2]>>>24-(s+1)%4*8&255,i=this.words[s+2>>>2]>>>24-(s+2)%4*8&255,c=t<<16|o<<8|i;for(let f=0;f<4&&s*8+f*6<this.sigBytes*8;f++)e.push(tt.charAt(c>>>6*(3-f)&63))}return e.join("")}concat(e){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let s=0;s<e.sigBytes;s++){const t=e.words[s>>>2]>>>24-s%4*8&255;this.words[this.sigBytes+s>>>2]|=t<<24-(this.sigBytes+s)%4*8}else for(let s=0;s<e.sigBytes;s+=4)this.words[this.sigBytes+s>>>2]=e.words[s>>>2];this.sigBytes+=e.sigBytes}}function et(d){return new st().finalize(d).toBase64()}function S(d){return et(I(d))}function P(d,e,s){const[t={},o]=typeof e=="string"?[{},e]:[e,s],i=E(()=>m(d)),c=E(()=>m(t.key)||"$f"+S([o,typeof i.value=="string"?i.value:"",...at(t)]));if(!t.baseURL&&typeof i.value=="string"&&i.value[0]==="/"&&i.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:f,lazy:u,default:p,transform:_,pick:y,watch:r,immediate:A,getCachedData:O,deep:R,dedupe:j,timeout:F,...$}=t,g=q({...G,...$,cache:typeof t.cache=="boolean"?void 0:t.cache}),z={server:f,lazy:u,default:p,transform:_,pick:y,immediate:A,getCachedData:O,deep:R,dedupe:j,timeout:F,watch:r===!1?[]:[...r||[],g]};return Q(r===!1?c.value:c,(N,{signal:H})=>(t.$fetch||globalThis.$fetch)(i.value,{signal:H,...g}),z)}function at(d){const e=[m(d.method)?.toUpperCase()||"GET",m(d.baseURL)];for(const s of[d.query||d.params]){const t=m(s);if(!t)continue;const o={};for(const[i,c]of Object.entries(t))o[m(i)]=m(c);e.push(o)}if(d.body){const s=m(d.body);if(!s)e.push(S(s));else if(s instanceof ArrayBuffer)e.push(S(Object.fromEntries([...new Uint8Array(s).entries()].map(([t,o])=>[t,o.toString()]))));else if(s instanceof FormData){const t={};for(const o of s.entries()){const[i,c]=o;t[i]=c instanceof File?c.name:c}e.push(S(t))}else if(K(s))e.push(S(q(s)));else try{e.push(S(s))}catch{console.warn("[useFetch] Failed to hash body",s)}}return e}const ot=()=>({async get(d,e={}){const s=m(d);return P(d,{baseURL:T(String(s)),...e},"$Rm7IY4mrBO")},async post(d,e,s={}){const t=m(d);return P(d,{method:"POST",body:e,baseURL:T(String(t)),...s},"$Rhd9_5gbHE")}}),rt={class:"space-y-6"},it={key:0,class:"rounded-2xl border border-red-200 bg-red-50 p-4 text-sm text-red-700"},nt={class:"grid gap-3 md:grid-cols-2 xl:grid-cols-3"},lt={key:1,class:"text-xs text-slate-500"},Rt=Y({__name:"index",async setup(d){let e,s;const t=ot(),o=J(),{data:i,pending:c,error:f}=([e,s]=X(()=>t.get("/api/v1/admin/dashboard/stats",{$fetch:o.apiFetch})),e=await e,s(),e),u=E(()=>i.value||{users_total:0,users_new_today:0,events_active:0,tickets_sold:0,revenue_total:0,revenue_today:0}),p=new Intl.NumberFormat("ru-RU"),_=y=>`${p.format(y)} ₽`;return(y,r)=>(L(),M("div",rt,[r[6]||(r[6]=b("div",{class:"flex items-center justify-between"},[b("div",null,[b("p",{class:"text-xs uppercase tracking-[0.3em] text-slate-500"},"Сводка"),b("h2",{class:"text-xl font-semibold"},"Системный дашборд")]),b("p",{class:"text-xs text-slate-500"},"Обновлено сегодня")],-1)),a(f)?(L(),M("div",it," Не удалось загрузить статистику. ")):V("",!0),b("div",nt,[n(a(v),null,{default:l(()=>[n(a(k),{class:"pb-2"},{default:l(()=>[n(a(C),{class:"text-xs uppercase tracking-[0.2em] text-slate-500"},{default:l(()=>[...r[0]||(r[0]=[h("Всего пользователей",-1)])]),_:1})]),_:1}),n(a(U),{class:"text-3xl font-semibold"},{default:l(()=>[h(B(a(p).format(a(u).users_total)),1)]),_:1})]),_:1}),n(a(v),null,{default:l(()=>[n(a(k),{class:"pb-2"},{default:l(()=>[n(a(C),{class:"text-xs uppercase tracking-[0.2em] text-slate-500"},{default:l(()=>[...r[1]||(r[1]=[h("Новых сегодня",-1)])]),_:1})]),_:1}),n(a(U),{class:"text-3xl font-semibold"},{default:l(()=>[h(B(a(p).format(a(u).users_new_today)),1)]),_:1})]),_:1}),n(a(v),null,{default:l(()=>[n(a(k),{class:"pb-2"},{default:l(()=>[n(a(C),{class:"text-xs uppercase tracking-[0.2em] text-slate-500"},{default:l(()=>[...r[2]||(r[2]=[h("Активных событий",-1)])]),_:1})]),_:1}),n(a(U),{class:"text-3xl font-semibold"},{default:l(()=>[h(B(a(p).format(a(u).events_active)),1)]),_:1})]),_:1}),n(a(v),null,{default:l(()=>[n(a(k),{class:"pb-2"},{default:l(()=>[n(a(C),{class:"text-xs uppercase tracking-[0.2em] text-slate-500"},{default:l(()=>[...r[3]||(r[3]=[h("Продано билетов",-1)])]),_:1})]),_:1}),n(a(U),{class:"text-3xl font-semibold"},{default:l(()=>[h(B(a(p).format(a(u).tickets_sold)),1)]),_:1})]),_:1}),n(a(v),null,{default:l(()=>[n(a(k),{class:"pb-2"},{default:l(()=>[n(a(C),{class:"text-xs uppercase tracking-[0.2em] text-slate-500"},{default:l(()=>[...r[4]||(r[4]=[h("Выручка общая",-1)])]),_:1})]),_:1}),n(a(U),{class:"text-3xl font-semibold"},{default:l(()=>[h(B(_(a(u).revenue_total)),1)]),_:1})]),_:1}),n(a(v),null,{default:l(()=>[n(a(k),{class:"pb-2"},{default:l(()=>[n(a(C),{class:"text-xs uppercase tracking-[0.2em] text-slate-500"},{default:l(()=>[...r[5]||(r[5]=[h("Выручка сегодня",-1)])]),_:1})]),_:1}),n(a(U),{class:"text-3xl font-semibold"},{default:l(()=>[h(B(_(a(u).revenue_today)),1)]),_:1})]),_:1})]),a(c)?(L(),M("p",lt,"Обновляем данные...")):V("",!0)]))}});export{Rt as default};
