import{d as o,c as u,s as c,e as a,n as s}from"./DIZEteV9.js";const f=o(async n=>{let t,r;if(n.path==="/login")return;const e=u(),{errorMessage:i}=c(e);if(!e.isAuthInitialized)try{[t,r]=a(()=>e.initAuth()),await t,r()}catch{}if(!e.token)return s("/login");try{[t,r]=a(()=>e.ensureUser()),await t,r()}catch{return e.errorMessage="Не удалось подтвердить доступ. Попробуйте снова.",e.logout(),s("/login")}if(i.value==="Access Denied")return s("/login?reason=denied")});export{f as default};
