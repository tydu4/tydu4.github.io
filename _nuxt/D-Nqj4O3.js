import{H as K,c as q}from"./DgUxy0CX.js";import{a9 as Z,j as h,d as N,o as m,c as b,a as o,b as f,w as _,f as $,t as d,u as g,k as F,D as U,G as z,r as P,_ as V,F as A,E as I}from"./BvmsJYLR.js";import{S as Q}from"./D6b4k1-A.js";import{F as H}from"./NlKeNGIE.js";import{M as ee}from"./BcOzH3FQ.js";import{U as te}from"./JUll6kn5.js";import{T as oe}from"./BtuR5D7R.js";import{c as se}from"./5xDXAavj.js";import{C as ne}from"./DxAxwcM9.js";import{U as ae}from"./99XizrHh.js";import{T as ie}from"./qgx4e3lk.js";import"./DlAUqK2U.js";import"./CrRG91Pn.js";import"./B7XCgDfu.js";import"./CV6lUnfE.js";import"./Dgjf9vxP.js";const re=se("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]),de=20260216,le=20,ce=30,ue=5,me=8640,T=["event_join","follow_venue","level_up","friend_connect"],j=["Alex","Sarah","Mike","Kate","Noah","Mila","Liam","Emma","Ava","Lucas","Mason","Zoe","Nina","Leo","Ivy","Ryan","Chloe","Ella","Owen","Aria","Mia","Ethan","Logan","Sofia","Lily","Aiden","Nora","Dylan","Maya","Hugo"],ge=["Parker","Morgan","Hayes","Walker","Diaz","Stone","Bennett","Turner","Cruz","Reed","Brooks","Cole","Ward","Bailey","Foster"],be=["Always up for a live set","Street-food hunter","Night-run and sunrise brunch","Rooftop season believer","Festival passport ready","Searching for the next hidden gem","Concert buddy wanted"],fe=["Neon Rooftop Session","Midnight Food Market","Indie Pulse Live","Sunset Tech Mixer","City Run and Coffee","Afterwork Vinyl Night","Open Air Cinema Club","Startup Sparks Meetup","Bassline Warehouse Story","Creative Founders Breakfast","Silent Disco Skyline","Downtown Jazz Escape","Retro Arcade Social","Street Art Walk","Community Day Jam"],O=["New York","Los Angeles","Chicago","Austin","Seattle","Miami","Boston","Denver","San Diego"],ve=["Aurora Hall","Pulse Garden","The Foundry","Canvas Loft","Harbor Stage","Moonlight Pavilion","City Deck","Velvet Room","Signal Arena","Echo Plaza"],ye=[{title:"Pulse Rookie",icon:"XP"},{title:"Night Explorer",icon:"NXT"},{title:"Crowd Magnet",icon:"FIRE"},{title:"Event Insider",icon:"PRO"},{title:"Local Legend",icon:"TOP"},{title:"Trend Rider",icon:"VIBE"}],pe=e=>{let t=e>>>0;return()=>(t=t*1664525+1013904223>>>0,t/4294967296)},p=(e,t,s)=>{const n=Math.ceil(t),i=Math.floor(s);return Math.floor(e()*(i-n+1))+n},w=(e,t)=>{if(!e.length)throw new Error("Cannot pick a random item from an empty list.");const s=p(t,0,e.length-1);return e[s]},L=(e,t)=>{const s=[...e];for(let n=s.length-1;n>0;n-=1){const i=p(t,0,n),l=s[n];s[n]=s[i],s[i]=l}return s},he=(e,t,s)=>Math.min(s,Math.max(t,e)),G=e=>e.trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),xe=e=>{const t=new Date(e);return new Intl.DateTimeFormat("en-US",{weekday:"short",month:"short",day:"numeric"}).format(t)},_e=(e,t)=>{const s=Math.max(0,t-new Date(e).getTime()),n=Math.floor(s/6e4);if(n<1)return"Just now";if(n<60)return`${n} min ago`;const i=Math.floor(n/60);if(i<24)return`${i} hour${i===1?"":"s"} ago`;const l=Math.floor(i/24);return l===1?"Yesterday":`${l} days ago`},we=e=>Array.from({length:28},(t,s)=>{const n=j[s%j.length],i=w(ge,e),l=`usr-${String(s+1).padStart(3,"0")}-${p(e,1e3,9999)}`,u=`${n} ${i}`;return{uuid:l,name:u,avatar:`https://api.dicebear.com/8.x/adventurer/svg?seed=${encodeURIComponent(l)}`,headline:w(be,e)}}),ke=(e,t)=>fe.map((s,n)=>{const i=new Date(t+p(e,1,42)*24*60*60*1e3);i.setHours(p(e,16,22),[0,15,30,45][p(e,0,3)]??0,0,0);const l=`${G(s)}-${n+1}`,u=i.toISOString();return{slug:l,title:s,city:w(O,e),startsAt:u,dateLabel:xe(u),coverImage:`https://picsum.photos/seed/feed-event-${l}/960/540`}}),$e=e=>ve.map((t,s)=>{const n=`${G(t)}-${s+1}`;return{slug:n,name:t,city:w(O,e),logo:`https://api.dicebear.com/8.x/shapes/svg?seed=${encodeURIComponent(n)}`}}),Ee=(e,t)=>{const s=[];for(let n=0;n<e;n+=1){const i=T[n%T.length]??"event_join",l=n<T.length?i:w(T,t);s.push(l)}return L(s,t)},Se=e=>{const t=pe(e.seed),s=Date.now(),n=p(t,e.minItems,e.maxItems),i=we(t),l=ke(t,s),u=$e(t),c=he(e.buddiesCount,0,i.length),v=L(i,t).slice(0,c),a=v.map(r=>r.uuid),y=new Set(a),E=Ee(n,t).map((r,x)=>{const S=x<v.length?v[x]:w(i,t),X=p(t,0,me),B=new Date(s-X*60*1e3).toISOString(),M={id:`feed-${x+1}-${Math.floor(t()*1e4)}`,type:r,actor:{uuid:S.uuid,name:S.name,avatar:S.avatar},createdAt:B,timeAgo:_e(B,s),fireCount:p(t,1,120),commentCount:p(t,0,38)};if(r==="event_join"){const k=w(l,t);return{...M,type:"event_join",event:k}}if(r==="follow_venue"){const k=w(u,t);return{...M,type:"follow_venue",venue:k}}if(r==="level_up"){const k=w(ye,t);return{...M,type:"level_up",badge:{level:p(t,2,9),title:k.title,icon:k.icon}}}const R=i.filter(k=>k.uuid!==S.uuid),C=w(R.length?R:i,t);return{...M,type:"friend_connect",friend:{uuid:C.uuid,name:C.name,avatar:C.avatar,headline:C.headline}}});if(!E.some(r=>y.has(r.actor.uuid))&&E.length&&v.length){const r=E[0],x=v[0];r.actor={uuid:x.uuid,name:x.name,avatar:x.avatar}}const W=[...E].sort((r,x)=>new Date(x.createdAt).getTime()-new Date(r.createdAt).getTime()),Y=L(i.filter(r=>!y.has(r.uuid)),t).slice(0,5).map(r=>({uuid:r.uuid,name:r.name,avatar:r.avatar,mutualFriends:p(t,1,12)})),J=L(l,t).slice(0,6).map(r=>({slug:r.slug,title:r.title,city:r.city,dateLabel:r.dateLabel,pulse:p(t,62,98)})).sort((r,x)=>x.pulse-r.pulse);return{activities:W,suggestions:Y,trendingEvents:J,buddyIds:a}},Me=(e={})=>{const t=Math.max(1,Math.floor(e.minItems??le)),s=Math.max(t,Math.floor(e.maxItems??ce)),n=Math.floor(e.seed??de),i=Math.floor(e.buddiesCount??ue),l=`community-feed-mock:${n}:${t}:${s}:${i}`,u=Z(l,()=>Se({seed:n,minItems:t,maxItems:s,buddiesCount:i}));return{activities:h(()=>u.value.activities),suggestions:h(()=>u.value.suggestions),trendingEvents:h(()=>u.value.trendingEvents),buddyIds:h(()=>u.value.buddyIds),hasBuddies:h(()=>u.value.buddyIds.length>0)}},Ce={class:"rounded-2xl border border-border bg-card p-4 shadow-sm"},Ae={class:"flex items-start gap-3"},Ie=["src","alt"],Te={class:"min-w-0 flex-1"},Le={class:"text-sm leading-6 text-foreground"},De={class:"ml-1 text-muted-foreground"},Fe={class:"mt-1 flex items-center gap-2 text-xs text-muted-foreground"},Ne={class:"mt-4"},Be={key:0,class:"overflow-hidden rounded-xl border border-border bg-background"},Re=["src","alt"],Ue={class:"flex items-center justify-between gap-3 p-3"},je={class:"min-w-0"},ze={class:"mt-1 text-xs text-muted-foreground"},Pe={key:1,class:"flex items-center justify-between gap-3 rounded-xl border border-border bg-background p-3"},Ve=["src","alt"],He={class:"min-w-0"},Oe={class:"line-clamp-1 text-sm font-semibold text-foreground"},Ge={class:"mt-0.5 text-xs text-muted-foreground"},We={key:2,class:"relative overflow-hidden rounded-xl border border-primary/30 bg-primary/10 p-4"},Ye={class:"relative flex items-center gap-3"},Je={class:"flex h-14 w-14 items-center justify-center rounded-2xl border border-primary/30 bg-background text-sm font-black tracking-wide text-primary"},Xe={class:"text-sm font-semibold text-foreground"},Ke={class:"mt-1 text-xs text-muted-foreground"},qe={key:3,class:"rounded-xl border border-border bg-background p-3"},Ze=["src","alt"],Qe={class:"min-w-0"},et={class:"line-clamp-1 text-sm font-semibold text-foreground"},tt={class:"mt-0.5 line-clamp-1 text-xs text-muted-foreground"},ot={class:"mt-4 flex flex-wrap items-center gap-2 border-t border-border pt-3"},st={type:"button",class:"inline-flex min-w-0 items-center gap-2 rounded-full border border-border bg-card px-3 py-1.5 text-xs font-semibold text-foreground transition hover:bg-muted"},nt=N({__name:"FeedActivityCard",props:{activity:{}},setup(e){const t=e,s=P(!1),n=()=>{s.value=!s.value},i=h(()=>t.activity.type==="level_up"?"Congratulate":"Fire"),l=h(()=>t.activity.fireCount+(s.value?1:0)),u=h(()=>({event_join:{label:"Event join",icon:ne},follow_venue:{label:"Venue follow",icon:re},level_up:{label:"Level up",icon:oe},friend_connect:{label:"New connection",icon:te}})[t.activity.type]),c=h(()=>t.activity.type==="event_join"?"is going to...":t.activity.type==="follow_venue"?"started following...":t.activity.type==="friend_connect"?"became friends with...":`reached Level ${t.activity.badge.level}!`);return(v,a)=>{const y=V;return m(),b("article",Ce,[o("header",Ae,[f(y,{to:`/u/${e.activity.actor.uuid}`,class:"shrink-0"},{default:_(()=>[o("img",{src:e.activity.actor.avatar,alt:e.activity.actor.name,class:"h-11 w-11 rounded-full border border-border object-cover",loading:"lazy"},null,8,Ie)]),_:1},8,["to"]),o("div",Te,[o("p",Le,[f(y,{to:`/u/${e.activity.actor.uuid}`,class:"font-semibold hover:underline"},{default:_(()=>[$(d(e.activity.actor.name),1)]),_:1},8,["to"]),o("span",De,d(g(c)),1)]),o("div",Fe,[(m(),F(U(g(u).icon),{class:"h-3.5 w-3.5"})),o("span",null,d(g(u).label),1),a[0]||(a[0]=o("span",{class:"text-border"},"-",-1)),o("span",null,d(e.activity.timeAgo),1)])])]),o("div",Ne,[e.activity.type==="event_join"?(m(),b("div",Be,[f(y,{to:`/e/${e.activity.event.slug}`,class:"block"},{default:_(()=>[o("img",{src:e.activity.event.coverImage,alt:e.activity.event.title,class:"h-40 w-full object-cover",loading:"lazy"},null,8,Re)]),_:1},8,["to"]),o("div",Ue,[o("div",je,[f(y,{to:`/e/${e.activity.event.slug}`,class:"line-clamp-1 text-sm font-semibold text-foreground transition hover:text-primary"},{default:_(()=>[$(d(e.activity.event.title),1)]),_:1},8,["to"]),o("p",ze,d(e.activity.event.dateLabel)+" - "+d(e.activity.event.city),1)]),f(y,{to:`/e/${e.activity.event.slug}`,class:"shrink-0 rounded-full border border-border bg-card px-3 py-1.5 text-xs font-semibold text-foreground transition hover:bg-muted"},{default:_(()=>[...a[1]||(a[1]=[$(" Join ",-1)])]),_:1},8,["to"])])])):e.activity.type==="follow_venue"?(m(),b("div",Pe,[f(y,{to:`/venue/${e.activity.venue.slug}`,class:"flex min-w-0 items-center gap-3"},{default:_(()=>[o("img",{src:e.activity.venue.logo,alt:e.activity.venue.name,class:"h-12 w-12 rounded-xl border border-border bg-card p-1.5",loading:"lazy"},null,8,Ve),o("div",He,[o("p",Oe,d(e.activity.venue.name),1),o("p",Ge,d(e.activity.venue.city),1)])]),_:1},8,["to"]),a[2]||(a[2]=o("button",{type:"button",class:"rounded-full border border-border bg-card px-3 py-1.5 text-xs font-semibold text-foreground transition hover:bg-muted"}," Follow ",-1))])):e.activity.type==="level_up"?(m(),b("div",We,[o("div",Ye,[o("div",Je,d(e.activity.badge.icon),1),o("div",null,[o("p",Xe,d(e.activity.badge.title),1),o("p",Ke," Level "+d(e.activity.badge.level)+" unlocked ",1)])])])):(m(),b("div",qe,[f(y,{to:`/u/${e.activity.friend.uuid}`,class:"flex items-center gap-3"},{default:_(()=>[o("img",{src:e.activity.friend.avatar,alt:e.activity.friend.name,class:"h-12 w-12 rounded-full border border-border object-cover",loading:"lazy"},null,8,Ze),o("div",Qe,[o("p",et,d(e.activity.friend.name),1),o("p",tt,d(e.activity.friend.headline),1)])]),_:1},8,["to"])]))]),o("footer",ot,[o("button",{type:"button",class:z(["inline-flex min-w-0 items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold transition",g(s)?"border-primary/30 bg-primary/10 text-primary":"border-border bg-card text-foreground hover:bg-muted"]),onClick:n},[(m(),F(U(e.activity.type==="level_up"?g(Q):g(H)),{class:"h-3.5 w-3.5"})),o("span",null,d(g(i)),1),o("span",null,d(g(l)),1)],2),o("button",st,[f(g(ee),{class:"h-3.5 w-3.5"}),a[3]||(a[3]=o("span",null,"Comment",-1)),o("span",null,d(e.activity.commentCount),1)])])])}}}),at=Object.assign(nt,{__name:"CommunityFeedActivityCard"}),it={class:"pb-14"},rt={class:"grid gap-6 lg:grid-cols-[minmax(0,1fr)_18.5rem]"},dt={class:"min-w-0 space-y-6"},lt={class:"sticky top-2 z-20 rounded-2xl border border-border bg-card/95 p-2 backdrop-blur-sm"},ct={class:"grid grid-cols-2 gap-1 rounded-xl bg-background p-1"},ut=["onClick"],mt={class:"block truncate"},gt={key:0,class:"rounded-2xl border border-border bg-card p-4"},bt={class:"rounded-xl border border-dashed border-border bg-background p-5 text-center"},ft={key:1,class:"rounded-2xl border border-border bg-card p-6 text-center"},vt={key:2,class:"flex flex-col gap-6"},yt={class:"hidden lg:flex lg:flex-col lg:gap-6"},pt={class:"rounded-2xl border border-border bg-card p-4"},ht={class:"flex items-center gap-2 text-sm font-semibold text-foreground"},xt={class:"mt-4 space-y-3"},_t=["src","alt"],wt={class:"min-w-0"},kt={class:"line-clamp-1 text-sm font-semibold text-foreground"},$t={class:"text-xs text-muted-foreground"},Et={class:"rounded-2xl border border-border bg-card p-4"},St={class:"flex items-center gap-2 text-sm font-semibold text-foreground"},Mt={class:"mt-4 space-y-3"},Ct={class:"mt-1 text-xs text-muted-foreground"},At={class:"mt-1 inline-flex items-center gap-1 text-xs font-semibold text-primary"},It=N({__name:"FeedMainBlock",props:{scope:{},activities:{},suggestions:{},trendingEvents:{},showBuddiesEmptyState:{type:Boolean}},emits:["update:scope"],setup(e,{emit:t}){const s=e,n=t,i=[{label:"Buddies",value:"buddies"},{label:"Global",value:"global"}],l=u=>{u!==s.scope&&n("update:scope",u)};return(u,c)=>{const v=V;return m(),b("section",it,[o("div",rt,[o("div",dt,[o("header",lt,[c[0]||(c[0]=o("div",{class:"mb-2 px-2 pt-1"},[o("p",{class:"text-[11px] font-semibold uppercase tracking-[0.18em] text-muted-foreground"}," The Pulse ")],-1)),o("div",ct,[(m(),b(A,null,I(i,a=>o("button",{key:a.value,type:"button",class:z(["min-w-0 rounded-lg px-2 py-2 text-sm font-semibold transition sm:px-3",a.value===e.scope?"bg-card text-foreground border border-border shadow-sm":"text-muted-foreground hover:text-foreground"]),onClick:y=>l(a.value)},[o("span",mt,d(a.label),1)],10,ut)),64))])]),e.showBuddiesEmptyState?(m(),b("section",gt,[o("div",bt,[c[2]||(c[2]=o("p",{class:"text-sm font-semibold text-foreground"}," Your buddies feed is quiet right now. ",-1)),c[3]||(c[3]=o("p",{class:"mt-1 text-sm text-muted-foreground"}," Add new people to unlock social momentum. ",-1)),f(v,{to:"/community/buddies",class:"mt-4 inline-flex rounded-full border border-border bg-card px-4 py-2 text-sm font-semibold text-foreground transition hover:bg-muted"},{default:_(()=>[...c[1]||(c[1]=[$(" Find Friends ",-1)])]),_:1})])])):e.activities.length?(m(),b("section",vt,[(m(!0),b(A,null,I(e.activities,a=>(m(),F(at,{key:a.id,activity:a},null,8,["activity"]))),128))])):(m(),b("section",ft,[...c[4]||(c[4]=[o("p",{class:"text-sm text-muted-foreground"}," No activity yet. Check back in a moment. ",-1)])]))]),o("aside",yt,[o("section",pt,[o("header",ht,[f(g(ae),{class:"h-4 w-4"}),c[5]||(c[5]=$(" Who to follow ",-1))]),o("div",xt,[(m(!0),b(A,null,I(e.suggestions,a=>(m(),b("article",{key:a.uuid,class:"flex items-center justify-between gap-2"},[f(v,{to:`/u/${a.uuid}`,class:"flex min-w-0 items-center gap-2.5"},{default:_(()=>[o("img",{src:a.avatar,alt:a.name,class:"h-9 w-9 rounded-full border border-border",loading:"lazy"},null,8,_t),o("div",wt,[o("p",kt,d(a.name),1),o("p",$t,d(a.mutualFriends)+" mutual buddies ",1)])]),_:2},1032,["to"]),c[6]||(c[6]=o("button",{type:"button",class:"shrink-0 rounded-full border border-border bg-background px-3 py-1 text-xs font-semibold text-foreground transition hover:bg-muted"}," Follow ",-1))]))),128))])]),o("section",Et,[o("header",St,[f(g(ie),{class:"h-4 w-4"}),c[7]||(c[7]=$(" Trending Events ",-1))]),o("div",Mt,[(m(!0),b(A,null,I(e.trendingEvents,a=>(m(),b("article",{key:a.slug,class:"rounded-xl border border-border bg-background p-3"},[f(v,{to:`/e/${a.slug}`,class:"line-clamp-2 text-sm font-semibold text-foreground transition hover:text-primary"},{default:_(()=>[$(d(a.title),1)]),_:2},1032,["to"]),o("p",Ct,d(a.dateLabel)+" - "+d(a.city),1),o("p",At,[f(g(H),{class:"h-3.5 w-3.5"}),$(" "+d(a.pulse)+" pulse ",1)])]))),128))])])])])])}}}),Tt={class:"page-wrapper"},Lt={class:"flex min-h-[calc(100dvh-9rem)] flex-col gap-4 lg:flex-row lg:items-start lg:gap-6"},Dt={class:"min-w-0 flex-1"},Zt=N({__name:"index",setup(e){const t=P("buddies"),{activities:s,suggestions:n,trendingEvents:i,buddyIds:l,hasBuddies:u}=Me({minItems:20,maxItems:30}),c=h(()=>new Set(l.value)),v=h(()=>t.value==="global"?s.value:s.value.filter(y=>c.value.has(y.actor.uuid))),a=h(()=>t.value==="buddies"&&(!u.value||v.value.length===0));return(y,D)=>(m(),b("div",Tt,[o("div",Lt,[f(K,{items:g(q),class:"shrink-0"},null,8,["items"]),o("div",Dt,[f(It,{scope:g(t),activities:g(v),suggestions:g(n),"trending-events":g(i),"show-buddies-empty-state":g(a),"onUpdate:scope":D[0]||(D[0]=E=>t.value=E)},null,8,["scope","activities","suggestions","trending-events","show-buddies-empty-state"])])])]))}});export{Zt as default};
