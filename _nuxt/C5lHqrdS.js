import{H as j,c as W}from"./xy3-vlSP.js";import{H as Y,j as x,d as R,c as f,a as r,F as I,D as C,b as y,_ as G,w as L,u as h,f as S,o as p,E as X,t as _,k as J,r as K}from"./vvrMSRdc.js";import{F as q}from"./BwauYN9y.js";import{U as Z}from"./04tntqWT.js";import{T as Q}from"./CjLXx7ty.js";import{F as ee}from"./Ba2NRgtU.js";import"./DlAUqK2U.js";import"./8R6Hccz8.js";import"./Idgo-c1n.js";import"./DK8pVjW8.js";import"./COfLoi9w.js";import"./DJepmivj.js";import"./D2JooQc7.js";import"./BWWOf5is.js";import"./CMEcg2KB.js";import"./nq_z6SHw.js";import"./Brevm6N2.js";const te=20260216,se=20,oe=30,ne=5,re=8640,T=["event_join","follow_venue","level_up","friend_connect"],B=["Alex","Sarah","Mike","Kate","Noah","Mila","Liam","Emma","Ava","Lucas","Mason","Zoe","Nina","Leo","Ivy","Ryan","Chloe","Ella","Owen","Aria","Mia","Ethan","Logan","Sofia","Lily","Aiden","Nora","Dylan","Maya","Hugo"],ae=["Parker","Morgan","Hayes","Walker","Diaz","Stone","Bennett","Turner","Cruz","Reed","Brooks","Cole","Ward","Bailey","Foster"],ie=["Always up for a live set","Street-food hunter","Night-run and sunrise brunch","Rooftop season believer","Festival passport ready","Searching for the next hidden gem","Concert buddy wanted"],de=["Neon Rooftop Session","Midnight Food Market","Indie Pulse Live","Sunset Tech Mixer","City Run and Coffee","Afterwork Vinyl Night","Open Air Cinema Club","Startup Sparks Meetup","Bassline Warehouse Story","Creative Founders Breakfast","Silent Disco Skyline","Downtown Jazz Escape","Retro Arcade Social","Street Art Walk","Community Day Jam"],U=["New York","Los Angeles","Chicago","Austin","Seattle","Miami","Boston","Denver","San Diego"],le=["Aurora Hall","Pulse Garden","The Foundry","Canvas Loft","Harbor Stage","Moonlight Pavilion","City Deck","Velvet Room","Signal Arena","Echo Plaza"],ce=[{title:"Pulse Rookie",icon:"XP"},{title:"Night Explorer",icon:"NXT"},{title:"Crowd Magnet",icon:"FIRE"},{title:"Event Insider",icon:"PRO"},{title:"Local Legend",icon:"TOP"},{title:"Trend Rider",icon:"VIBE"}],ue=t=>{let e=t>>>0;return()=>(e=e*1664525+1013904223>>>0,e/4294967296)},u=(t,e,s)=>{const o=Math.ceil(e),n=Math.floor(s);return Math.floor(t()*(n-o+1))+o},b=(t,e)=>{if(!t.length)throw new Error("Cannot pick a random item from an empty list.");const s=u(e,0,t.length-1);return t[s]},D=(t,e)=>{const s=[...t];for(let o=s.length-1;o>0;o-=1){const n=u(e,0,o),d=s[o];s[o]=s[n],s[n]=d}return s},me=(t,e,s)=>Math.min(s,Math.max(e,t)),P=t=>t.trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),pe=t=>{const e=new Date(t);return new Intl.DateTimeFormat("en-US",{weekday:"short",month:"short",day:"numeric"}).format(e)},ge=(t,e)=>{const s=Math.max(0,e-new Date(t).getTime()),o=Math.floor(s/6e4);if(o<1)return"Just now";if(o<60)return`${o} min ago`;const n=Math.floor(o/60);if(n<24)return`${n} hour${n===1?"":"s"} ago`;const d=Math.floor(n/24);return d===1?"Yesterday":`${d} days ago`},fe=t=>Array.from({length:28},(e,s)=>{const o=B[s%B.length],n=b(ae,t),d=`usr-${String(s+1).padStart(3,"0")}-${u(t,1e3,9999)}`,c=`${o} ${n}`;return{uuid:d,name:c,avatar:`https://api.dicebear.com/8.x/adventurer/svg?seed=${encodeURIComponent(d)}`,headline:b(ie,t)}}),be=(t,e)=>de.map((s,o)=>{const n=new Date(e+u(t,1,42)*24*60*60*1e3);n.setHours(u(t,16,22),[0,15,30,45][u(t,0,3)]??0,0,0);const d=`${P(s)}-${o+1}`,c=n.toISOString();return{slug:d,title:s,city:b(U,t),startsAt:c,dateLabel:pe(c),coverImage:`https://picsum.photos/seed/feed-event-${d}/960/540`}}),he=t=>le.map((e,s)=>{const o=`${P(e)}-${s+1}`;return{slug:o,name:e,city:b(U,t),logo:`https://api.dicebear.com/8.x/shapes/svg?seed=${encodeURIComponent(o)}`}}),ve=(t,e)=>{const s=[];for(let o=0;o<t;o+=1){const n=T[o%T.length]??"event_join",d=o<T.length?n:b(T,e);s.push(d)}return D(s,e)},ye=t=>{const e=ue(t.seed),s=Date.now(),o=u(e,t.minItems,t.maxItems),n=fe(e),d=be(e,s),c=he(e),l=me(t.buddiesCount,0,n.length),m=D(n,e).slice(0,l),a=m.map(i=>i.uuid),w=new Set(a),E=ve(o,e).map((i,g)=>{const k=g<m.length?m[g]:b(n,e),O=u(e,0,re),F=new Date(s-O*60*1e3).toISOString(),M={id:`feed-${g+1}-${Math.floor(e()*1e4)}`,type:i,actor:{uuid:k.uuid,name:k.name,avatar:k.avatar},createdAt:F,timeAgo:ge(F,s),fireCount:u(e,1,120),commentCount:u(e,0,38)};if(i==="event_join"){const v=b(d,e);return{...M,type:"event_join",event:v}}if(i==="follow_venue"){const v=b(c,e);return{...M,type:"follow_venue",venue:v}}if(i==="level_up"){const v=b(ce,e);return{...M,type:"level_up",badge:{level:u(e,2,9),title:v.title,icon:v.icon}}}const N=n.filter(v=>v.uuid!==k.uuid),A=b(N.length?N:n,e);return{...M,type:"friend_connect",friend:{uuid:A.uuid,name:A.name,avatar:A.avatar,headline:A.headline}}});if(!E.some(i=>w.has(i.actor.uuid))&&E.length&&m.length){const i=E[0],g=m[0];i.actor={uuid:g.uuid,name:g.name,avatar:g.avatar}}const H=[...E].sort((i,g)=>new Date(g.createdAt).getTime()-new Date(i.createdAt).getTime()),V=D(n.filter(i=>!w.has(i.uuid)),e).slice(0,5).map(i=>({uuid:i.uuid,name:i.name,avatar:i.avatar,mutualFriends:u(e,1,12)})),z=D(d,e).slice(0,6).map(i=>({slug:i.slug,title:i.title,city:i.city,dateLabel:i.dateLabel,pulse:u(e,62,98)})).sort((i,g)=>g.pulse-i.pulse);return{activities:H,suggestions:V,trendingEvents:z,buddyIds:a}},xe=(t={})=>{const e=Math.max(1,Math.floor(t.minItems??se)),s=Math.max(e,Math.floor(t.maxItems??oe)),o=Math.floor(t.seed??te),n=Math.floor(t.buddiesCount??ne),d=`community-feed-mock:${o}:${e}:${s}:${n}`,c=Y(d,()=>ye({seed:o,minItems:e,maxItems:s,buddiesCount:n}));return{activities:x(()=>c.value.activities),suggestions:x(()=>c.value.suggestions),trendingEvents:x(()=>c.value.trendingEvents),buddyIds:x(()=>c.value.buddyIds),hasBuddies:x(()=>c.value.buddyIds.length>0)}},_e={class:"pb-14"},we={class:"grid gap-6 lg:grid-cols-[minmax(0,1fr)_18.5rem]"},Ee={class:"min-w-0 space-y-6"},Se={class:"sticky top-2 z-20 rounded-2xl border border-border bg-card/95 p-2 backdrop-blur-sm"},ke={class:"grid grid-cols-2 gap-1 rounded-xl bg-background p-1"},Me=["onClick"],Ae={class:"block truncate"},Ie={key:0,class:"rounded-2xl border border-border bg-card p-4"},Ce={class:"rounded-xl border border-dashed border-border bg-background p-5 text-center"},Te={key:1,class:"rounded-2xl border border-border bg-card p-6 text-center"},De={key:2,class:"flex flex-col gap-6"},$e={class:"hidden lg:flex lg:flex-col lg:gap-6"},Le={class:"rounded-2xl border border-border bg-card p-4"},Fe={class:"flex items-center gap-2 text-sm font-semibold text-foreground"},Ne={class:"mt-4 space-y-3"},Be=["src","alt"],Re={class:"min-w-0"},Ue={class:"line-clamp-1 text-sm font-semibold text-foreground"},Pe={class:"text-xs text-muted-foreground"},He={class:"rounded-2xl border border-border bg-card p-4"},Ve={class:"flex items-center gap-2 text-sm font-semibold text-foreground"},ze={class:"mt-4 space-y-3"},Oe={class:"mt-1 text-xs text-muted-foreground"},je={class:"mt-1 inline-flex items-center gap-1 text-xs font-semibold text-primary"},We=R({__name:"FeedMainBlock",props:{scope:{},activities:{},suggestions:{},trendingEvents:{},showBuddiesEmptyState:{type:Boolean}},emits:["update:scope"],setup(t,{emit:e}){const s=t,o=e,n=[{label:"Buddies",value:"buddies"},{label:"Global",value:"global"}],d=c=>{c!==s.scope&&o("update:scope",c)};return(c,l)=>{const m=G;return p(),f("section",_e,[r("div",we,[r("div",Ee,[r("header",Se,[l[0]||(l[0]=r("div",{class:"mb-2 px-2 pt-1"},[r("p",{class:"text-[11px] font-semibold uppercase tracking-[0.18em] text-muted-foreground"}," The Pulse ")],-1)),r("div",ke,[(p(),f(I,null,C(n,a=>r("button",{key:a.value,type:"button",class:X(["min-w-0 rounded-lg px-2 py-2 text-sm font-semibold transition sm:px-3",a.value===t.scope?"bg-card text-foreground border border-border shadow-sm":"text-muted-foreground hover:text-foreground"]),onClick:w=>d(a.value)},[r("span",Ae,_(a.label),1)],10,Me)),64))])]),t.showBuddiesEmptyState?(p(),f("section",Ie,[r("div",Ce,[l[2]||(l[2]=r("p",{class:"text-sm font-semibold text-foreground"}," Your buddies feed is quiet right now. ",-1)),l[3]||(l[3]=r("p",{class:"mt-1 text-sm text-muted-foreground"}," Add new people to unlock social momentum. ",-1)),y(m,{to:"/community/buddies",class:"mt-4 inline-flex rounded-full border border-border bg-card px-4 py-2 text-sm font-semibold text-foreground transition hover:bg-muted"},{default:L(()=>[...l[1]||(l[1]=[S(" Find Friends ",-1)])]),_:1})])])):t.activities.length?(p(),f("section",De,[(p(!0),f(I,null,C(t.activities,a=>(p(),J(q,{key:a.id,activity:a},null,8,["activity"]))),128))])):(p(),f("section",Te,[...l[4]||(l[4]=[r("p",{class:"text-sm text-muted-foreground"}," No activity yet. Check back in a moment. ",-1)])]))]),r("aside",$e,[r("section",Le,[r("header",Fe,[y(h(Z),{class:"h-4 w-4"}),l[5]||(l[5]=S(" Who to follow ",-1))]),r("div",Ne,[(p(!0),f(I,null,C(t.suggestions,a=>(p(),f("article",{key:a.uuid,class:"flex items-center justify-between gap-2"},[y(m,{to:`/u/${a.uuid}`,class:"flex min-w-0 items-center gap-2.5"},{default:L(()=>[r("img",{src:a.avatar,alt:a.name,class:"h-9 w-9 rounded-full border border-border",loading:"lazy"},null,8,Be),r("div",Re,[r("p",Ue,_(a.name),1),r("p",Pe,_(a.mutualFriends)+" mutual buddies ",1)])]),_:2},1032,["to"]),l[6]||(l[6]=r("button",{type:"button",class:"shrink-0 rounded-full border border-border bg-background px-3 py-1 text-xs font-semibold text-foreground transition hover:bg-muted"}," Follow ",-1))]))),128))])]),r("section",He,[r("header",Ve,[y(h(Q),{class:"h-4 w-4"}),l[7]||(l[7]=S(" Trending Events ",-1))]),r("div",ze,[(p(!0),f(I,null,C(t.trendingEvents,a=>(p(),f("article",{key:a.slug,class:"rounded-xl border border-border bg-background p-3"},[y(m,{to:`/e/${a.slug}`,class:"line-clamp-2 text-sm font-semibold text-foreground transition hover:text-primary"},{default:L(()=>[S(_(a.title),1)]),_:2},1032,["to"]),r("p",Oe,_(a.dateLabel)+" - "+_(a.city),1),r("p",je,[y(h(ee),{class:"h-3.5 w-3.5"}),S(" "+_(a.pulse)+" pulse ",1)])]))),128))])])])])])}}}),Ye={class:"page-wrapper"},Ge={class:"flex min-h-[calc(100dvh-9rem)] flex-col gap-4 lg:flex-row lg:items-start lg:gap-6"},Xe={class:"min-w-0 flex-1"},gt=R({__name:"index",setup(t){const e=K("buddies"),{activities:s,suggestions:o,trendingEvents:n,buddyIds:d,hasBuddies:c}=xe({minItems:20,maxItems:30}),l=x(()=>new Set(d.value)),m=x(()=>e.value==="global"?s.value:s.value.filter(w=>l.value.has(w.actor.uuid))),a=x(()=>e.value==="buddies"&&(!c.value||m.value.length===0));return(w,$)=>(p(),f("div",Ye,[r("div",Ge,[y(j,{items:h(W),class:"shrink-0"},null,8,["items"]),r("div",Xe,[y(We,{scope:h(e),activities:h(m),suggestions:h(o),"trending-events":h(n),"show-buddies-empty-state":h(a),"onUpdate:scope":$[0]||($[0]=E=>e.value=E)},null,8,["scope","activities","suggestions","trending-events","show-buddies-empty-state"])])])]))}});export{gt as default};
