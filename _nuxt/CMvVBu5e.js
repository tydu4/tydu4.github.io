import{d as w,x as R,m as T,z as $,A as h,C as _,c as u,u as e,a as o,k as p,w as m,e as B,D,b as f,j as d,r as L,n as P,o as s,f as c,F,E as K,B as S,t as z}from"./BvmsJYLR.js";import v from"./CtLTs_3K.js";import{_ as H}from"./BZvTBRft.js";import{_ as M}from"./OY2N-YcF.js";import{_ as Y}from"./BHEX7iZj.js";import{_ as W}from"./CxZ9C13L.js";import{_ as G}from"./GlQwG_Fn.js";import{_ as O}from"./DDFvjW4g.js";import"./BzPEOt12.js";import"./D_4EABbL.js";import"./Vgekj58C.js";import"./5xDXAavj.js";import"./C6rC-zF7.js";import"./CV6lUnfE.js";import"./Dkz1FL2s.js";import"./Bk21D1oR.js";import"./COpX9ETO.js";import"./Dgjf9vxP.js";import"./C0TRSMCl.js";import"./DlAUqK2U.js";import"./DM1rkk4u.js";import"./Czg1By39.js";import"./Bz4cxB3L.js";import"./DDfFWcZW.js";import"./8zIG_rig.js";import"./PV_K9qDU.js";import"./CKtjksQb.js";import"./Bb8wBqGF.js";import"./D3dsTMtN.js";import"./C94ZD2ww.js";import"./CMODgTaP.js";import"./BcOzH3FQ.js";import"./Ckb9_sJ4.js";import"./fPupRjWR.js";import"./B7XCgDfu.js";import"./BRdF3y4B.js";import"./CMXtPbqp.js";import"./CDKjvE8x.js";import"./nQzGmxxo.js";import"./BJZDLctM.js";import"./BS1yvM0_.js";import"./D6b4k1-A.js";import"./B9zI8lcq.js";import"./DxAxwcM9.js";const U={class:"relative mx-auto w-full max-w-6xl pb-24"},j={key:0,class:"space-y-3 pt-4"},q={class:"fixed bottom-4 right-4 z-[200] hidden md:block"},J={class:"grid grid-cols-2 gap-2"},Ye=w({__name:"index",setup(Q){const b=R(),E=T(),g=$(),a=d(()=>String(b.params.slug??"").trim()),i=L("PRE_EVENT"),{data:x,pending:C,error:A,refresh:V}=h(`event-hub-${a.value}`,async()=>a.value?await $fetch(`/api/v1/events/slug/${encodeURIComponent(a.value)}`,{baseURL:P("/api/v1/events/slug")}):null,{server:!0,lazy:!1}),n=d(()=>x.value??null),k={PRE_EVENT:O,CHECK_IN_WAY:Y,CHECK_IN_DONE:M,LIVE_AFK:G,LIVE_ACTIVE:W,AFTERPARTY:H},y=d(()=>k[i.value]),N=[{label:"Pre",value:"PRE_EVENT"},{label:"Way",value:"CHECK_IN_WAY"},{label:"Inside",value:"CHECK_IN_DONE"},{label:"Live (AFK)",value:"LIVE_AFK"},{label:"Live (Active)",value:"LIVE_ACTIVE"},{label:"Afterparty",value:"AFTERPARTY"}],I=r=>{i.value=r};return _(a,()=>{i.value="PRE_EVENT"}),_(n,r=>{!r||!E.isGuest||g.trackView({eventId:r.id,eventSlug:r.slug||a.value,title:r.title||null})},{immediate:!0}),(r,t)=>(s(),u("div",U,[e(C)&&!e(n)?(s(),u("section",j,[...t[1]||(t[1]=[o("div",{class:"h-44 animate-pulse rounded-3xl bg-muted"},null,-1),o("div",{class:"h-36 animate-pulse rounded-3xl bg-muted"},null,-1),o("div",{class:"h-36 animate-pulse rounded-3xl bg-muted"},null,-1)])])):e(A)?(s(),p(e(v),{key:1,class:"mt-5 rounded-2xl border-destructive/25 bg-destructive/10 p-4 text-sm text-destructive"},{default:m(()=>[t[2]||(t[2]=c(" Не удалось загрузить событие. ",-1)),o("button",{type:"button",class:"ml-2 underline",onClick:t[0]||(t[0]=()=>e(V)())},"Обновить")]),_:1})):e(n)?B("",!0):(s(),p(e(v),{key:2,class:"mt-5 rounded-2xl p-5 text-sm text-muted-foreground"},{default:m(()=>[...t[3]||(t[3]=[c(" Событие не найдено. ",-1)])]),_:1})),(s(),p(D(e(y)),{event:e(n)},null,8,["event"])),o("div",q,[f(e(v),{class:"pointer-events-auto rounded-2xl border border-border bg-card/95 p-2 shadow-elevated backdrop-blur"},{default:m(()=>[t[4]||(t[4]=o("p",{class:"mb-2 px-1 text-[11px] font-semibold uppercase tracking-[0.16em] text-muted-foreground"}," Debug State ",-1)),o("div",J,[(s(),u(F,null,K(N,l=>f(e(S),{key:l.value,size:"sm",variant:e(i)===l.value?"default":"outline",class:"min-w-[92px]",onClick:X=>I(l.value)},{default:m(()=>[c(z(l.label),1)]),_:2},1032,["variant","onClick"])),64))])]),_:1})])]))}});export{Ye as default};
