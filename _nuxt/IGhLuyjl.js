import{a as ve}from"./CVBhADUC.js";import{y as fe,n as pe,a6 as me,s as V,r as f,j as s,d as he,o as j,c as we,a as X,b as A,u as C,k as E}from"./vvrMSRdc.js";import{c as be}from"./Idgo-c1n.js";import{X as ye}from"./CkwQ64lv.js";import{S as ge}from"./DK8pVjW8.js";import{H as ke}from"./C2RTd-YV.js";import{S as xe}from"./Dn722Z4k.js";import{I as Me}from"./DlU5y1qM.js";const Ce=be("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),w=(u,i,b)=>Math.min(b,Math.max(i,u)),Ue=(u,i={})=>{const{width:b,height:I}=ve(),c=s(()=>i.swipeThreshold??w((b.value||360)*.24,80,180)),S=s(()=>i.swipeUpThreshold??w((I.value||640)*.22,120,220)),n=i.velocityThreshold??.65,p=i.dragDeadzone??6,H=i.flyOutDuration??280,N=i.rewindDuration??300,B=i.flyOutMultiplier??1.15,G=i.enableSwipeUp??!0,T=V([]),v=f(0),y=V([]),$=s(()=>T.value[v.value]),W=s(()=>T.value[v.value+1]),a=f(0),l=f(0),m=f(0),g=f(0),h=f(null),L=s(()=>!!h.value),d=f(!1),k=f(!1);let Y=null;const x=()=>{Y!==null&&typeof window<"u"&&window.cancelAnimationFrame(Y),Y=null},z=()=>{x(),a.value=0,l.value=0,m.value=0,g.value=0},J=()=>{if(x(),typeof window>"u"){z();return}let e=m.value*16,t=g.value*16;const o=.14,r=.78,M=()=>{if(e=(e-a.value*o)*r,t=(t-l.value*o)*r,a.value+=e,l.value+=t,Math.abs(a.value)<.6&&Math.abs(l.value)<.6&&Math.abs(e)<.25&&Math.abs(t)<.25){z();return}Y=window.requestAnimationFrame(M)};Y=window.requestAnimationFrame(M)};fe(()=>{x()});const O=s(()=>Math.max(320,b.value||320)*B),P=s(()=>Math.max(420,I.value||640)*B),D=(e,t)=>{if(!$.value||d.value)return!1;x(),d.value=!0;const r={item:$.value,direction:e,meta:t};return y.value.push(r),i.onSwipe?.(r),e==="left"?(a.value=-O.value,l.value=l.value+40):e==="right"?(a.value=O.value,l.value=l.value+40):(a.value=a.value*.35,l.value=-P.value),setTimeout(()=>{v.value=Math.min(v.value+1,T.value.length),z(),d.value=!1,k.value=!1},H),!0},K=()=>{if(d.value||L.value)return null;const e=y.value.pop();if(!e)return null;x(),d.value=!0,v.value=Math.max(0,v.value-1),e.direction==="left"?(a.value=-O.value,l.value=40):e.direction==="right"?(a.value=O.value,l.value=40):(a.value=0,l.value=-P.value*.8);const t=()=>{a.value=0,l.value=0};return typeof window<"u"?window.requestAnimationFrame(()=>{window.requestAnimationFrame(t)}):t(),setTimeout(()=>{d.value=!1,k.value=!1,m.value=0,g.value=0},N),e},Q=()=>{const e=c.value,t=S.value,o=a.value>e||m.value>n,r=a.value<-e||m.value<-n;return G&&(l.value<-t||g.value<-n)&&-l.value>Math.abs(a.value)*.9?"up":o&&a.value>0?"right":r&&a.value<0?"left":null},Z=e=>{if(e.currentTarget instanceof HTMLElement)try{e.currentTarget.releasePointerCapture(e.pointerId)}catch{}},F=e=>{const t=h.value;if(!t||e.pointerId!==t.pointerId)return;k.value=t.moved,h.value=null,Z(e);const o=Q();if(o){D(o);return}J()},_=e=>{if(!(d.value||!$.value)&&!(e.pointerType==="mouse"&&e.button!==0)&&(x(),k.value=!1,h.value={pointerId:e.pointerId,startClientX:e.clientX,startClientY:e.clientY,startX:a.value,startY:l.value,lastClientX:e.clientX,lastClientY:e.clientY,lastTs:e.timeStamp||Date.now(),moved:!1},e.currentTarget instanceof HTMLElement))try{e.currentTarget.setPointerCapture(e.pointerId)}catch{}},ee=e=>{const t=h.value;if(!t||e.pointerId!==t.pointerId)return;const o=e.clientX-t.startClientX,r=e.clientY-t.startClientY;!t.moved&&(Math.abs(o)>p||Math.abs(r)>p)&&(t.moved=!0);const M=e.timeStamp||Date.now(),R=Math.max(8,M-t.lastTs),ce=(e.clientX-t.lastClientX)/R,de=(e.clientY-t.lastClientY)/R;m.value=m.value*.65+ce*.35,g.value=g.value*.65+de*.35,t.lastClientX=e.clientX,t.lastClientY=e.clientY,t.lastTs=M,a.value=t.startX+o,l.value=t.startY+r},te=e=>{F(e)},ae=e=>{h.value&&F(e)},le=s(()=>({transform:`translate3d(${a.value}px, ${l.value}px, 0) rotate(${U.value}deg)`,willChange:"transform"})),se=s(()=>{const e=w((Math.abs(a.value)+Math.max(0,-l.value)*.7)/260,0,1),t=.96+e*.03,o=16-e*8,r=.72+e*.22;return{transform:`translate3d(0, ${o}px, 0) scale(${t})`,opacity:`${r}`}}),U=s(()=>w(a.value/20,-18,18)),q=s(()=>({likeOpacity:w(a.value/Math.max(1,c.value),0,1),nopeOpacity:w(-a.value/Math.max(1,c.value),0,1),superLikeOpacity:w(-l.value/Math.max(1,S.value),0,1)})),ne=s(()=>q.value),ie=s(()=>L.value?"transition-none":"transition-transform duration-300");pe(()=>me(u),e=>{T.value=Array.isArray(e)?[...e]:[],v.value=0,y.value=[],h.value=null,k.value=!1,d.value=!1,z()},{immediate:!0});const oe={swipeLeft:e=>D("left",e),swipeRight:e=>D("right",e),superLike:e=>D("up",e),swipeUp:e=>D("up",e),rewind:K},re={onPointerDown:_,onPointerMove:ee,onPointerUp:te,onPointerLeave:ae},ue={stack:y,canRewind:s(()=>y.value.length>0),length:s(()=>y.value.length)};return{items:T,currentIndex:v,activeItem:$,nextItem:W,x:a,y:l,rotation:U,opacity:q,cardStyle:le,nextCardStyle:se,indicators:ne,handlers:re,actions:oe,history:ue,isAnimating:d,isDragging:L,didDrag:k,offsetX:a,offsetY:l,cardMotionClass:ie}},Se={class:"flex items-center justify-center gap-3"},Te=["disabled"],Ye=["disabled"],De=["disabled"],Xe=["disabled"],Ie=["disabled"],$e=he({__name:"SwipeControls",props:{type:{},disabled:{type:Boolean,default:!1}},emits:["rewind","dislike","super","like","action"],setup(u,{emit:i}){const b=u,I=i,c=S=>{b.disabled||I(S)};return(S,n)=>(j(),we("div",Se,[X("button",{type:"button",disabled:u.disabled,"aria-label":"Rewind",class:"flex h-12 w-12 items-center justify-center rounded-full bg-white shadow-lg transition-transform duration-150 hover:scale-110 active:scale-95 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-zinc-800",onClick:n[0]||(n[0]=p=>c("rewind"))},[A(C(Ce),{class:"h-5 w-5 text-yellow-500"})],8,Te),X("button",{type:"button",disabled:u.disabled,"aria-label":"Dislike",class:"flex h-14 w-14 items-center justify-center rounded-full bg-white shadow-lg transition-transform duration-150 hover:scale-110 active:scale-95 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-zinc-800",onClick:n[1]||(n[1]=p=>c("dislike"))},[A(C(ye),{class:"h-6 w-6 text-red-500"})],8,Ye),X("button",{type:"button",disabled:u.disabled,"aria-label":"Super",class:"flex h-12 w-12 items-center justify-center rounded-full bg-white shadow-lg transition-transform duration-150 hover:scale-110 active:scale-95 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-zinc-800",onClick:n[2]||(n[2]=p=>c("super"))},[A(C(ge),{class:"h-5 w-5 text-blue-500"})],8,De),X("button",{type:"button",disabled:u.disabled,"aria-label":"Like",class:"flex h-14 w-14 items-center justify-center rounded-full bg-white shadow-lg transition-transform duration-150 hover:scale-110 active:scale-95 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-zinc-800",onClick:n[3]||(n[3]=p=>c("like"))},[A(C(ke),{class:"h-6 w-6 text-green-500"})],8,Xe),X("button",{type:"button",disabled:u.disabled,"aria-label":"Action",class:"flex h-12 w-12 items-center justify-center rounded-full bg-white shadow-lg transition-transform duration-150 hover:scale-110 active:scale-95 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-zinc-800",onClick:n[4]||(n[4]=p=>c("action"))},[u.type==="event"?(j(),E(C(xe),{key:0,class:"h-5 w-5 text-purple-500"})):(j(),E(C(Me),{key:1,class:"h-5 w-5 text-purple-500"}))],8,Ie)]))}}),qe=Object.assign($e,{__name:"SharedSwipeControls"});export{qe as S,Ue as u};
