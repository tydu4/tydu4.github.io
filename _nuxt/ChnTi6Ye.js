import{d as w,q as T,x as u,z as p,o as n,c as r,h as s,t as a,u as i,F as c,A as l,D as U,f as g,b as R,w as S,j as V,g as _,_ as P,e as E}from"./BO0_OeXi.js";const M={class:"space-y-10 pb-8"},G={class:"space-y-4"},H={class:"flex items-center justify-between"},J={class:"text-xs font-semibold uppercase tracking-[0.18em] text-muted-foreground"},K={key:0,class:"space-y-3"},O={key:1,class:"space-y-3"},Q={class:"text-base font-semibold text-foreground"},W={class:"mt-1 text-sm text-muted-foreground"},X={key:0,class:"rounded-2xl border border-border bg-card p-4 text-sm text-muted-foreground"},Y={class:"space-y-4"},Z={key:0,class:"grid gap-3"},ee={key:1,class:"grid gap-3"},te={class:"text-sm font-semibold text-foreground"},se={class:"text-xs font-semibold text-primary"},ne={key:0,class:"rounded-2xl border border-border bg-card p-4 text-sm text-muted-foreground"},re={class:"space-y-4"},oe={key:0,class:"space-y-3"},de={key:1,class:"space-y-3"},ie={class:"text-sm font-semibold text-foreground"},ae={class:"mt-1 text-xs text-muted-foreground"},ce={key:0,class:"rounded-2xl border border-border bg-card p-4 text-sm text-muted-foreground"},le=w({__name:"FeedMainBlock",setup(A){const o=T(),{data:x}=u("me-profile-community",()=>o.token?o.apiFetch("/api/v1/me/profile",{baseURL:p("/api/v1/me/profile")}):null,{watch:[()=>o.token,()=>o.isAuthInitialized]}),f=_(()=>x.value?.city||"ÐœÐ¾ÑÐºÐ²Ð°"),{data:F,pending:L}=u("community-news",()=>o.token?o.apiFetch("/api/v1/community/news",{baseURL:p("/api/v1/community/news"),query:{city:f.value,limit:6}}):[],{watch:[f,()=>o.token,()=>o.isAuthInitialized]}),{data:j,pending:z}=u("community-trending",()=>o.token?o.apiFetch("/api/v1/community/trending",{baseURL:p("/api/v1/community/trending")}):[],{watch:[()=>o.token,()=>o.isAuthInitialized]}),{data:D,pending:I}=u("community-feed",()=>o.token?o.apiFetch("/api/v1/community/feed",{baseURL:p("/api/v1/community/feed"),query:{limit:12}}):[],{watch:[()=>o.token,()=>o.isAuthInitialized]}),m=e=>Array.isArray(e)?e:e&&typeof e=="object"&&"items"in e?e.items??[]:[],b=_(()=>m(F.value)),y=_(()=>m(j.value)),h=_(()=>m(D.value)),$=e=>e.event_title||e.title||e.event?.title||"Ð¡Ð¾Ð±Ñ‹Ñ‚Ð¸Ðµ",v=e=>e.active_buddy_requests??e.event?.active_buddy_requests??0,B=e=>e.event_title||e.event?.title||"ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¸",k=e=>e.event_slug||e.event?.slug,N=e=>e.user?.full_name||e.user?.username||"ÐšÑ‚Ð¾-Ñ‚Ð¾",q=e=>{if(e.text)return e.text;const d=String(e.action||e.type||"");return d.includes("check")?"Ñ‡ÐµÐºÐ½ÑƒÐ»ÑÑ(Ð»Ð°ÑÑŒ)":d.includes("going")?"Ð¸Ð´Ñ‘Ñ‚":d.includes("purchase")?"ÐºÑƒÐ¿Ð¸Ð»(Ð°) Ð±Ð¸Ð»ÐµÑ‚":d.includes("buddy")?"Ð¸Ñ‰ÐµÑ‚ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸ÑŽ":"Ð² Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ð¸"};return(e,d)=>{const C=P;return n(),r("div",M,[s("section",G,[s("div",H,[d[0]||(d[0]=s("h1",{class:"text-xl font-bold text-foreground"},"ÐÐ¾Ð²Ð¾ÑÑ‚Ð¸",-1)),s("span",J,a(i(f)),1)]),i(L)?(n(),r("div",K,[(n(),r(c,null,l(3,t=>s("div",{key:`news-skeleton-${t}`,class:"h-20 animate-pulse rounded-2xl bg-muted"})),64))])):(n(),r("div",O,[(n(!0),r(c,null,l(i(b),t=>(n(),r("article",{key:t.id||t.title,class:U(["rounded-2xl border border-border bg-card p-4 shadow-sm",t.type==="alert"?"border-red-200 bg-destructive/10":""])},[s("h2",Q,a(t.title||"ÐÐ¾Ð²Ð¾ÑÑ‚ÑŒ"),1),s("p",W,a(t.content||"ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½Ð¾ÑÑ‚Ð¸ Ð¿Ð¾ÑÐ²ÑÑ‚ÑÑ Ð¿Ð¾Ð·Ð¶Ðµ."),1)],2))),128)),i(b).length?g("",!0):(n(),r("div",X," ÐŸÐ¾ÐºÐ° Ð½ÐµÑ‚ Ð½Ð¾Ð²Ð¾ÑÑ‚ÐµÐ¹ Ð² Ñ‚Ð²Ð¾Ñ‘Ð¼ Ð³Ð¾Ñ€Ð¾Ð´Ðµ. "))]))]),s("section",Y,[d[2]||(d[2]=s("div",{class:"flex items-center justify-between"},[s("h2",{class:"text-lg font-bold text-foreground"},"Ð¢Ñ€ÐµÐ½Ð´Ñ‹"),s("span",{class:"text-xs font-semibold uppercase tracking-[0.18em] text-muted-foreground"},"Ð¡ÐµÐ¹Ñ‡Ð°Ñ Ð¸Ñ‰ÑƒÑ‚")],-1)),i(z)?(n(),r("div",Z,[(n(),r(c,null,l(3,t=>s("div",{key:`trend-skeleton-${t}`,class:"h-16 animate-pulse rounded-2xl bg-muted"})),64))])):(n(),r("div",ee,[(n(!0),r(c,null,l(i(y),t=>(n(),r("div",{key:t.event_slug||t.slug||t.title,class:"flex items-center justify-between rounded-2xl border border-border bg-card p-4 shadow-sm"},[s("div",null,[s("p",te,a($(t)),1),d[1]||(d[1]=s("p",{class:"mt-1 text-xs text-muted-foreground"},"ðŸ”¥ Ð˜Ñ‰ÑƒÑ‚ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸ÑŽ",-1))]),s("div",se,a(v(t)>0?`${v(t)} Ñ‡ÐµÐ»Ð¾Ð²ÐµÐº`:"Ð¡ÐµÐ¹Ñ‡Ð°Ñ"),1)]))),128)),i(y).length?g("",!0):(n(),r("div",ne," Ð¢Ñ€ÐµÐ½Ð´Ð¾Ð² Ð¿Ð¾ÐºÐ° Ð½ÐµÑ‚. "))]))]),s("section",re,[d[4]||(d[4]=s("div",{class:"flex items-center justify-between"},[s("h2",{class:"text-lg font-bold text-foreground"},"Ð›ÐµÐ½Ñ‚Ð° Ð´Ñ€ÑƒÐ·ÐµÐ¹")],-1)),i(I)?(n(),r("div",oe,[(n(),r(c,null,l(4,t=>s("div",{key:`feed-skeleton-${t}`,class:"h-20 animate-pulse rounded-2xl bg-muted"})),64))])):(n(),r("div",de,[(n(!0),r(c,null,l(i(h),t=>(n(),r("article",{key:t.id||t.event_slug||t.event_title,class:"flex items-center justify-between gap-4 rounded-2xl border border-border bg-card p-4 shadow-sm"},[s("div",null,[s("p",ie,a(N(t))+" "+a(q(t)),1),s("p",ae,"Ð½Ð° "+a(B(t)),1)]),k(t)?(n(),R(C,{key:0,to:`/e/${k(t)}`,class:"rounded-full bg-primary px-3 py-1 text-xs font-semibold text-white"},{default:S(()=>[...d[3]||(d[3]=[V(" Ð¯ Ñ‚Ð¾Ð¶Ðµ ",-1)])]),_:1},8,["to"])):g("",!0)]))),128)),i(h).length?g("",!0):(n(),r("div",ce," ÐŸÐ¾ÐºÐ° Ð½ÐµÑ‚ Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚Ð¸ Ð´Ñ€ÑƒÐ·ÐµÐ¹. "))]))])])}}}),ue={class:"page-wrapper"},ge=w({__name:"index",setup(A){return(o,x)=>(n(),r("div",ue,[E(le)]))}});export{ge as default};
