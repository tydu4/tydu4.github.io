import{d as N,v as k,x as I,i as R,c as m,u as e,h as r,b as u,w as n,f as T,y as w,e as _,g as p,r as $,z as h,o,j as d,F as B,A as L,B as P,t as D}from"./BO0_OeXi.js";import c from"./BAzGcJZe.js";import{_ as F}from"./08rvlKSQ.js";import{_ as K}from"./BG3GjtBK.js";import{_ as z}from"./TOSQyMSN.js";import{_ as H}from"./DH_h719z.js";import{_ as M}from"./BYRs9HKH.js";import{_ as Y}from"./CNeEprhj.js";import"./D92jAQRS.js";import"./3Ctqa8lw.js";import"./Wd759zKD.js";import"./BjFBAuHz.js";import"./ChLhOB94.js";import"./B3Mz9nlm.js";import"./C_j7hyYr.js";import"./D3_kkgb7.js";import"./Bwd13lVT.js";import"./B8j67S1y.js";import"./COC0__mb.js";import"./BP2r0KF4.js";import"./DlAUqK2U.js";import"./DLAxxCvb.js";import"./Bsr6Qi3e.js";import"./BEi-9kO8.js";import"./DPasnuvX.js";import"./B3vjTQSi.js";import"./D4bSBMEb.js";import"./kDTr-kfK.js";import"./BI_wR26L.js";import"./C94ZD2ww.js";import"./BlLI6pzT.js";import"./C80jQyI2.js";import"./CO8TOxHe.js";import"./oEsFR4E0.js";import"./CB3rgRP1.js";import"./gYCMkwew.js";import"./BRAXGcYQ.js";import"./CCEYP2gX.js";import"./BPQLVmJv.js";import"./BMiDIfG3.js";import"./BaFub9o4.js";const S={class:"relative mx-auto w-full max-w-6xl pb-24"},W={key:0,class:"space-y-3 pt-4"},O={class:"fixed bottom-4 right-4 z-[200] hidden md:block"},U={class:"grid grid-cols-2 gap-2"},De=N({__name:"index",setup(j){const f=k(),a=p(()=>String(f.params.slug??"").trim()),s=$("PRE_EVENT"),{data:b,pending:E,error:x,refresh:g}=I(`event-hub-${a.value}`,async()=>a.value?await $fetch(`/api/v1/events/slug/${encodeURIComponent(a.value)}`,{baseURL:h("/api/v1/events/slug")}):null,{server:!0,lazy:!1}),l=p(()=>b.value??null),C={PRE_EVENT:Y,CHECK_IN_WAY:z,CHECK_IN_DONE:K,LIVE_AFK:M,LIVE_ACTIVE:H,AFTERPARTY:F},A=p(()=>C[s.value]),y=[{label:"Pre",value:"PRE_EVENT"},{label:"Way",value:"CHECK_IN_WAY"},{label:"Inside",value:"CHECK_IN_DONE"},{label:"Live (AFK)",value:"LIVE_AFK"},{label:"Live (Active)",value:"LIVE_ACTIVE"},{label:"Afterparty",value:"AFTERPARTY"}],V=v=>{s.value=v};return R(a,()=>{s.value="PRE_EVENT"}),(v,t)=>(o(),m("div",S,[e(E)&&!e(l)?(o(),m("section",W,[...t[1]||(t[1]=[r("div",{class:"h-44 animate-pulse rounded-3xl bg-muted"},null,-1),r("div",{class:"h-36 animate-pulse rounded-3xl bg-muted"},null,-1),r("div",{class:"h-36 animate-pulse rounded-3xl bg-muted"},null,-1)])])):e(x)?(o(),u(e(c),{key:1,class:"mt-5 rounded-2xl border-destructive/25 bg-destructive/10 p-4 text-sm text-destructive"},{default:n(()=>[t[2]||(t[2]=d(" Не удалось загрузить событие. ",-1)),r("button",{type:"button",class:"ml-2 underline",onClick:t[0]||(t[0]=()=>e(g)())},"Обновить")]),_:1})):e(l)?T("",!0):(o(),u(e(c),{key:2,class:"mt-5 rounded-2xl p-5 text-sm text-muted-foreground"},{default:n(()=>[...t[3]||(t[3]=[d(" Событие не найдено. ",-1)])]),_:1})),(o(),u(w(e(A)),{event:e(l)},null,8,["event"])),r("div",O,[_(e(c),{class:"pointer-events-auto rounded-2xl border border-border bg-card/95 p-2 shadow-elevated backdrop-blur"},{default:n(()=>[t[4]||(t[4]=r("p",{class:"mb-2 px-1 text-[11px] font-semibold uppercase tracking-[0.16em] text-muted-foreground"}," Debug State ",-1)),r("div",U,[(o(),m(B,null,L(y,i=>_(e(P),{key:i.value,size:"sm",variant:e(s)===i.value?"default":"outline",class:"min-w-[92px]",onClick:q=>V(i.value)},{default:n(()=>[d(D(i.label),1)]),_:2},1032,["variant","onClick"])),64))])]),_:1})])]))}});export{De as default};
