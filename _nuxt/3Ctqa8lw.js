import{d as M,b as v,w as h,D as i,u as t,o as x,h as n,f as j,t as u,e as l,j as m,B as V,g as o}from"./BO0_OeXi.js";import z from"./Wd759zKD.js";import H from"./BAzGcJZe.js";import{u as S}from"./D92jAQRS.js";import{H as T}from"./BjFBAuHz.js";import{c as g}from"./ChLhOB94.js";import{N as A}from"./B3Mz9nlm.js";const D=g("car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);const F=g("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Y={class:"flex items-center justify-between gap-2"},q={class:"flex items-center gap-2"},I={class:"mt-3 overflow-hidden rounded-2xl border border-border"},R=["src"],E={class:"mt-4 grid gap-2 sm:grid-cols-3"},G=["href"],J=["href"],Z=M({__name:"LocationMap",props:{event:{default:null},mode:{default:"venue"},destination:{default:null}},setup(b){const e=b,p=S(),d=o(()=>e.event?e.event:null),c=o(()=>d.value?d.value.default_venue?d.value.default_venue:d.value.occurrences?.[0]?.venue??null:null),a=o(()=>{if(e.mode==="home"&&e.destination)return{lat:e.destination.lat,lon:e.destination.lon};const r=Number(c.value?.lat),s=Number(c.value?.lon);return!Number.isFinite(r)||!Number.isFinite(s)?{lat:55.755814,lon:37.617635}:{lat:r,lon:s}}),w=o(()=>{const r=`${a.value.lon},${a.value.lat}`,s=e.mode==="home"?"pm2gnm":"pm2rdm";return`https://yandex.ru/map-widget/v1/?ll=${a.value.lon}%2C${a.value.lat}&z=12&pt=${r},${s}`}),y=o(()=>`https://3.redirect.appmetrica.yandex.com/route?end-lat=${a.value.lat}&end-lon=${a.value.lon}&ref=yandex_taxi&appmetrica_tracking_id=1178268795219780156`),_=o(()=>`geo:${a.value.lat},${a.value.lon}`),k=o(()=>`https://www.google.com/maps/dir/?api=1&destination=${a.value.lat},${a.value.lon}`),C=o(()=>e.mode==="home"?e.destination?.title?.trim()||"Дом":c.value?.address?.trim()?c.value.address.trim():"Адрес уточняется"),N=o(()=>e.mode==="home"?"Маршрут до дома (25 мин)":"Location Map"),$=o(()=>e.mode==="home"?"Home":"Yandex"),L=o(()=>e.mode==="home"?"rounded-3xl border border-white/10 bg-slate-900 p-5 text-slate-100":"rounded-3xl border border-border p-5"),f=o(()=>e.mode==="home"?"border-white/10 bg-white/5 text-white hover:bg-white/10":"border-input bg-background text-foreground hover:bg-accent"),B=async()=>{const r=C.value;if(r){if(navigator.clipboard?.writeText)try{await navigator.clipboard.writeText(r),p.push({level:"success",title:"Адрес",message:"Адрес скопирован"});return}catch{}p.push({level:"warning",title:"Адрес",message:"Не удалось скопировать адрес"})}};return(r,s)=>(x(),v(t(H),{class:i(t(L))},{default:h(()=>[n("div",Y,[n("div",q,[e.mode==="home"?(x(),v(t(T),{key:0,class:"h-4 w-4 text-emerald-300"})):j("",!0),n("h3",{class:i(e.mode==="home"?"text-base font-semibold text-white":"text-base font-semibold text-foreground")},u(t(N)),3)]),l(t(z),{variant:e.mode==="home"?"outline":"secondary"},{default:h(()=>[m(u(t($)),1)]),_:1},8,["variant"])]),n("div",I,[n("iframe",{src:t(w),class:"h-64 w-full",title:"Yandex Map",loading:"lazy"},null,8,R)]),n("div",E,[n("a",{href:t(y),target:"_blank",rel:"noopener noreferrer",class:i(["inline-flex h-10 items-center justify-center gap-2 rounded-md border px-3 text-sm font-medium transition",t(f)])},[l(t(D),{class:"h-4 w-4"}),m(" "+u(e.mode==="home"?"Домой":"Такси"),1)],10,G),n("a",{href:e.mode==="home"?t(k):t(_),class:i(["inline-flex h-10 items-center justify-center gap-2 rounded-md border px-3 text-sm font-medium transition",t(f)])},[l(t(A),{class:"h-4 w-4"}),m(" "+u(e.mode==="home"?"Маршрут":"Навигатор"),1)],10,J),l(t(V),{variant:"outline",class:i(["gap-2",e.mode==="home"?"border-white/10 bg-white/5 text-white hover:bg-white/10":""]),onClick:B},{default:h(()=>[l(t(F),{class:"h-4 w-4"}),s[0]||(s[0]=m(" Адрес ",-1))]),_:1},8,["class"])])]),_:1},8,["class"]))}});export{Z as _};
