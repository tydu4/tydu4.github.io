import{b as fe}from"./Bsr6Qi3e.js";import{G as pe,i as he,a4 as me,N as V,r as f,g as n,d as we,o as B,c as be,h as X,e as A,u as C,b as E}from"./BO0_OeXi.js";import{c as H}from"./ChLhOB94.js";import{X as ye}from"./kDTr-kfK.js";import{S as ge}from"./COC0__mb.js";import{H as xe}from"./BaFub9o4.js";import{I as ke}from"./DLAxxCvb.js";const Me=H("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const Ce=H("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),w=(u,i,b)=>Math.min(b,Math.max(i,u)),qe=(u,i={})=>{const{width:b,height:I}=fe(),c=n(()=>i.swipeThreshold??w((b.value||360)*.24,80,180)),S=n(()=>i.swipeUpThreshold??w((I.value||640)*.22,120,220)),s=i.velocityThreshold??.65,p=i.dragDeadzone??6,N=i.flyOutDuration??280,G=i.rewindDuration??300,P=i.flyOutMultiplier??1.15,W=i.enableSwipeUp??!0,T=V([]),v=f(0),y=V([]),$=n(()=>T.value[v.value]),J=n(()=>T.value[v.value+1]),a=f(0),l=f(0),h=f(0),g=f(0),m=f(null),L=n(()=>!!m.value),d=f(!1),x=f(!1);let Y=null;const k=()=>{Y!==null&&typeof window<"u"&&window.cancelAnimationFrame(Y),Y=null},z=()=>{k(),a.value=0,l.value=0,h.value=0,g.value=0},K=()=>{if(k(),typeof window>"u"){z();return}let e=h.value*16,t=g.value*16;const o=.14,r=.78,M=()=>{if(e=(e-a.value*o)*r,t=(t-l.value*o)*r,a.value+=e,l.value+=t,Math.abs(a.value)<.6&&Math.abs(l.value)<.6&&Math.abs(e)<.25&&Math.abs(t)<.25){z();return}Y=window.requestAnimationFrame(M)};Y=window.requestAnimationFrame(M)};pe(()=>{k()});const O=n(()=>Math.max(320,b.value||320)*P),j=n(()=>Math.max(420,I.value||640)*P),D=(e,t)=>{if(!$.value||d.value)return!1;k(),d.value=!0;const r={item:$.value,direction:e,meta:t};return y.value.push(r),i.onSwipe?.(r),e==="left"?(a.value=-O.value,l.value=l.value+40):e==="right"?(a.value=O.value,l.value=l.value+40):(a.value=a.value*.35,l.value=-j.value),setTimeout(()=>{v.value=Math.min(v.value+1,T.value.length),z(),d.value=!1,x.value=!1},N),!0},Q=()=>{if(d.value||L.value)return null;const e=y.value.pop();if(!e)return null;k(),d.value=!0,v.value=Math.max(0,v.value-1),e.direction==="left"?(a.value=-O.value,l.value=40):e.direction==="right"?(a.value=O.value,l.value=40):(a.value=0,l.value=-j.value*.8);const t=()=>{a.value=0,l.value=0};return typeof window<"u"?window.requestAnimationFrame(()=>{window.requestAnimationFrame(t)}):t(),setTimeout(()=>{d.value=!1,x.value=!1,h.value=0,g.value=0},G),e},Z=()=>{const e=c.value,t=S.value,o=a.value>e||h.value>s,r=a.value<-e||h.value<-s;return W&&(l.value<-t||g.value<-s)&&-l.value>Math.abs(a.value)*.9?"up":o&&a.value>0?"right":r&&a.value<0?"left":null},_=e=>{if(e.currentTarget instanceof HTMLElement)try{e.currentTarget.releasePointerCapture(e.pointerId)}catch{}},q=e=>{const t=m.value;if(!t||e.pointerId!==t.pointerId)return;x.value=t.moved,m.value=null,_(e);const o=Z();if(o){D(o);return}K()},ee=e=>{if(!(d.value||!$.value)&&!(e.pointerType==="mouse"&&e.button!==0)&&(k(),x.value=!1,m.value={pointerId:e.pointerId,startClientX:e.clientX,startClientY:e.clientY,startX:a.value,startY:l.value,lastClientX:e.clientX,lastClientY:e.clientY,lastTs:e.timeStamp||Date.now(),moved:!1},e.currentTarget instanceof HTMLElement))try{e.currentTarget.setPointerCapture(e.pointerId)}catch{}},te=e=>{const t=m.value;if(!t||e.pointerId!==t.pointerId)return;const o=e.clientX-t.startClientX,r=e.clientY-t.startClientY;!t.moved&&(Math.abs(o)>p||Math.abs(r)>p)&&(t.moved=!0);const M=e.timeStamp||Date.now(),R=Math.max(8,M-t.lastTs),de=(e.clientX-t.lastClientX)/R,ve=(e.clientY-t.lastClientY)/R;h.value=h.value*.65+de*.35,g.value=g.value*.65+ve*.35,t.lastClientX=e.clientX,t.lastClientY=e.clientY,t.lastTs=M,a.value=t.startX+o,l.value=t.startY+r},ae=e=>{q(e)},le=e=>{m.value&&q(e)},ne=n(()=>({transform:`translate3d(${a.value}px, ${l.value}px, 0) rotate(${F.value}deg)`,willChange:"transform"})),se=n(()=>{const e=w((Math.abs(a.value)+Math.max(0,-l.value)*.7)/260,0,1),t=.96+e*.03,o=16-e*8,r=.72+e*.22;return{transform:`translate3d(0, ${o}px, 0) scale(${t})`,opacity:`${r}`}}),F=n(()=>w(a.value/20,-18,18)),U=n(()=>({likeOpacity:w(a.value/Math.max(1,c.value),0,1),nopeOpacity:w(-a.value/Math.max(1,c.value),0,1),superLikeOpacity:w(-l.value/Math.max(1,S.value),0,1)})),ie=n(()=>U.value),oe=n(()=>L.value?"transition-none":"transition-transform duration-300");he(()=>me(u),e=>{T.value=Array.isArray(e)?[...e]:[],v.value=0,y.value=[],m.value=null,x.value=!1,d.value=!1,z()},{immediate:!0});const re={swipeLeft:e=>D("left",e),swipeRight:e=>D("right",e),superLike:e=>D("up",e),swipeUp:e=>D("up",e),rewind:Q},ue={onPointerDown:ee,onPointerMove:te,onPointerUp:ae,onPointerLeave:le},ce={stack:y,canRewind:n(()=>y.value.length>0),length:n(()=>y.value.length)};return{items:T,currentIndex:v,activeItem:$,nextItem:J,x:a,y:l,rotation:F,opacity:U,cardStyle:ne,nextCardStyle:se,indicators:ie,handlers:ue,actions:re,history:ce,isAnimating:d,isDragging:L,didDrag:x,offsetX:a,offsetY:l,cardMotionClass:oe}},Se={class:"flex items-center justify-center gap-3"},Te=["disabled"],Ye=["disabled"],De=["disabled"],Xe=["disabled"],Ie=["disabled"],$e=we({__name:"SwipeControls",props:{type:{},disabled:{type:Boolean,default:!1}},emits:["rewind","dislike","super","like","action"],setup(u,{emit:i}){const b=u,I=i,c=S=>{b.disabled||I(S)};return(S,s)=>(B(),be("div",Se,[X("button",{type:"button",disabled:u.disabled,"aria-label":"Rewind",class:"flex h-12 w-12 items-center justify-center rounded-full bg-white shadow-lg transition-transform duration-150 hover:scale-110 active:scale-95 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-zinc-800",onClick:s[0]||(s[0]=p=>c("rewind"))},[A(C(Me),{class:"h-5 w-5 text-yellow-500"})],8,Te),X("button",{type:"button",disabled:u.disabled,"aria-label":"Dislike",class:"flex h-14 w-14 items-center justify-center rounded-full bg-white shadow-lg transition-transform duration-150 hover:scale-110 active:scale-95 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-zinc-800",onClick:s[1]||(s[1]=p=>c("dislike"))},[A(C(ye),{class:"h-6 w-6 text-red-500"})],8,Ye),X("button",{type:"button",disabled:u.disabled,"aria-label":"Super",class:"flex h-12 w-12 items-center justify-center rounded-full bg-white shadow-lg transition-transform duration-150 hover:scale-110 active:scale-95 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-zinc-800",onClick:s[2]||(s[2]=p=>c("super"))},[A(C(ge),{class:"h-5 w-5 text-blue-500"})],8,De),X("button",{type:"button",disabled:u.disabled,"aria-label":"Like",class:"flex h-14 w-14 items-center justify-center rounded-full bg-white shadow-lg transition-transform duration-150 hover:scale-110 active:scale-95 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-zinc-800",onClick:s[3]||(s[3]=p=>c("like"))},[A(C(xe),{class:"h-6 w-6 text-green-500"})],8,Xe),X("button",{type:"button",disabled:u.disabled,"aria-label":"Action",class:"flex h-12 w-12 items-center justify-center rounded-full bg-white shadow-lg transition-transform duration-150 hover:scale-110 active:scale-95 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-zinc-800",onClick:s[4]||(s[4]=p=>c("action"))},[u.type==="event"?(B(),E(C(Ce),{key:0,class:"h-5 w-5 text-purple-500"})):(B(),E(C(ke),{key:1,class:"h-5 w-5 text-purple-500"}))],8,Ie)]))}}),Fe=Object.assign($e,{__name:"SharedSwipeControls"});export{Fe as S,qe as u};
