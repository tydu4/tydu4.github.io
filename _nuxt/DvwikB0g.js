import{d as ce,J as Xe,a5 as Ma,z as Ge,O as or,y as Lt,c as I,b as x,u as o,w as M,o as P,a as u,B as oe,f as D,t as U,r as Q,j as w,k as ue,A as Ar,T as it,e as pe,F as be,D as Re,Y as ot,G as rr,n as Ue,E as Ze,$ as wo,C as Ea,a2 as ha,K as Ie,a6 as Sr,a9 as Tr,q as lt,_ as Ra,g as Or,ag as xo,U as Dt,V as Rr,M as _o,a7 as Aa,aa as ko,Z as Oa,X as $o,a0 as ja,ah as Co,Q as So}from"./DXztqjCQ.js";import Ee from"./C-Eyoouw.js";import{c as To,u as Ua}from"./Gl6PZDfI.js";import qe from"./BBdJDuwr.js";import We from"./DczGufqd.js";import ze from"./JpoSsffY.js";import He from"./Cu-fVLOj.js";import{X as Ia}from"./pIa8rBID.js";import{_ as jr}from"./DlAUqK2U.js";import Ur from"./B_ybT7kY.js";import Po from"./BFHUVYdT.js";import ar from"./B6yq4ezY.js";import{S as ir}from"./Cw-xcs6-.js";import{C as Mo}from"./DW0L_mGY.js";import{C as Eo}from"./CMZl5Fal.js";import{C as Ro}from"./QOMubj7K.js";import{N as Ao}from"./T5Edk0aq.js";import{L as Oo,_ as jo}from"./Bv7NJ3Hx.js";import{S as Uo}from"./BQlc1uvA.js";import{s as Da}from"./CcVlAtcY.js";import{L as La}from"./CuhuTuqL.js";import{c as Bt}from"./CG4HLnLt.js";import{C as Io}from"./Dlyk1Rx6.js";import{T as Do}from"./CbbtTVbP.js";import{Q as Lo}from"./DOelJJwf.js";import{S as Bo}from"./D0n6_JOc.js";import{C as Fo}from"./6CvnTKnn.js";import{u as Ba}from"./Bs8T81Ad.js";import{C as No}from"./foL5lnpC.js";import{R as Vo,a as qo,_ as Wo}from"./CZaxTFig.js";import{U as zo}from"./CQBiaOXw.js";import{E as Ho,T as Go,C as Qo,I as Yo,_ as Jo}from"./Cump17bW.js";import{C as Ko}from"./BBIzWK9v.js";import{S as Zo}from"./D2JRL7rA.js";import{S as Xo}from"./YRZI4kOa.js";import{_ as ei}from"./CvcII9pi.js";import{_ as ti}from"./CXUsfWvw.js";import{_ as ri}from"./DBZNKXVs.js";import"./C9aajwzv.js";import"./DTwSdy3O.js";import"./1_8ggrmz.js";import"./DJXsfEn5.js";import"./BtdQ4RrR.js";import"./BVpqY5PZ.js";import"./2_J2ATjA.js";import"./DfgMGbzZ.js";import"./s8bY5U6r.js";const Fa=Bt("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const Ir=Bt("hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);const ai=Bt("map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);const ni=Bt("user-round",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);const si=Bt("users-round",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]),oi=["pre_event","check_in","live","networking_game","afterparty","done"],ii=new Set(oi),li=e=>typeof e=="string"&&ii.has(e),ui=e=>li(e)?e:"pre_event",Xt=e=>ui(e),ci=e=>({...e,current_mode:Xt(e.current_mode),state_payload:e.state_payload??null}),di={class:"fixed inset-x-0 bottom-0 z-50 animate-in fade-in slide-in-from-bottom border-t border-border bg-background/85 px-3 py-3 backdrop-blur"},fi={class:"grid grid-cols-2 gap-2"},mi=ce({__name:"ActionPanel",props:{event:{}},setup(e){const n=e,a=Xe(),l=Ma(),c=Ge(),m=or(),{share:f,isSupported:h}=To(),d=Q(!1),g=Q(!1),_=Q(null),v=w(()=>n.event.slug?.trim()||""),k=w(()=>v.value?`${window.location.origin}/e/${encodeURIComponent(v.value)}`:""),$=w(()=>d.value?"Registering...":g.value?"Registered":"Register"),y=()=>{_.value&&clearTimeout(_.value),_.value=null},R=()=>{if(!(g.value||d.value)){if(a.isGuest){l.openAuthPrompt({id:"event-register",route:m.fullPath,context:{eventSlug:v.value,source:"event-state1-action-panel"}});return}d.value=!0,y(),_.value=setTimeout(()=>{d.value=!1,g.value=!0,c.push({level:"success",title:"Event",message:"You are registered"})},900)}},L=w(()=>({title:n.event.title||"Event",text:n.event.description?.trim()||"Event details",url:k.value})),z=async()=>{const B=k.value;if(!B||!navigator.clipboard?.writeText)return!1;try{return await navigator.clipboard.writeText(B),c.push({level:"success",title:"Share",message:"Event link copied"}),!0}catch{return!1}},K=async()=>{if(!k.value)return;if(h.value&&typeof navigator.share=="function")try{await f(L.value);return}catch(S){if(S instanceof Error&&S.name==="AbortError")return}await z()||c.push({level:"error",title:"Share",message:"Could not share event link"})};return Lt(()=>{y()}),(B,S)=>(P(),I("div",di,[x(o(Ee),{class:"mx-auto w-full max-w-6xl rounded-2xl border border-border p-3 shadow-soft"},{default:M(()=>[u("div",fi,[x(o(oe),{class:"w-full",disabled:o(d)||o(g),onClick:R},{default:M(()=>[D(U(o($)),1)]),_:1},8,["disabled"]),x(o(oe),{variant:"outline",class:"w-full",onClick:K},{default:M(()=>[...S[0]||(S[0]=[D(" Share ",-1)])]),_:1})])]),_:1})]))}}),pi=Object.assign(mi,{__name:"Event[slug]BlocksState1ActionPanel"}),vi={key:0,class:"fixed inset-0 z-[130] flex items-center justify-center px-4"},hi={class:"relative w-full max-w-md overflow-hidden rounded-3xl border border-border bg-card p-6 shadow-elevated"},gi={class:"confetti pointer-events-none absolute inset-0"},bi={class:"flex items-center justify-between"},yi={class:"mt-6 flex items-center justify-center gap-4"},wi={class:"mt-4 text-center text-sm text-muted-foreground"},xi={class:"font-semibold text-foreground"},_i={key:0,class:"mt-6 rounded-2xl p-[1px] bg-gradient-to-r from-primary/60 to-primary/20"},ki={class:"rounded-2xl bg-background p-4"},$i=["href"],Ci={class:"flex h-9 w-9 items-center justify-center rounded-full bg-primary/10 text-primary"},Si={key:0,viewBox:"0 0 24 24","aria-hidden":"true",class:"h-4 w-4 fill-current"},Ti={key:1,viewBox:"0 0 24 24","aria-hidden":"true",class:"h-4 w-4 fill-current"},Pi={key:2,viewBox:"0 0 24 24","aria-hidden":"true",class:"h-4 w-4 fill-current"},Mi={key:1,class:"mt-6 rounded-2xl border border-border bg-background p-4 text-center shadow-soft"},Ei={class:"mt-6 flex justify-center"},Ri=ce({__name:"BuddyMatchModal",props:{open:{type:Boolean,default:!0},buddy:{},event:{}},emits:["close"],setup(e,{emit:n}){const a=e,l=n,c=Xe(),m=or(),f=w(()=>c.user),h=w(()=>c.isGuest),d=w(()=>f.value?.full_name||f.value?.username||"Ğ’Ñ‹"),g=w(()=>f.value?.avatar_url||""),_=w(()=>d.value.trim().charAt(0).toUpperCase()),v=w(()=>a.buddy?.user?a.buddy.user:{username:a.buddy?.username??null,full_name:a.buddy?.full_name??null,avatar_url:a.buddy?.avatar_url??null}),k=w(()=>v.value.full_name||v.value.username||"Buddy"),$=w(()=>v.value.avatar_url||""),y=w(()=>k.value.trim().charAt(0).toUpperCase()),R=w(()=>a.event?.title||"ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ"),L=w(()=>a.buddy?.social_contact_type||a.buddy?.contact?.type||"tg"),z=w(()=>a.buddy?.social_contact_value||a.buddy?.contact?.value||v.value.username||""),K=w(()=>{const ee=z.value?.trim()||"";return ee?ee.startsWith("@")?ee:`@${ee}`:""}),B=w(()=>{const ee=z.value?.trim().replace(/^@/,"");if(!ee)return"#";const H=L.value;return H==="vk"?`https://vk.com/${ee}`:H==="wa"||H==="whatsapp"?`https://wa.me/${ee}`:`tg://resolve?domain=${ee}`}),S=w(()=>K.value?`ĞĞ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ ${K.value}`:"ĞĞ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ"),O=w(()=>L.value==="tg"),q=w(()=>L.value==="vk"),F=Array.from({length:12},(ee,H)=>H),re=()=>{const ee=encodeURIComponent(m.fullPath||"/");rr(`/login?redirect=${ee}`)};return(ee,H)=>(P(),ue(Ar,{to:"body"},[x(it,{"enter-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:M(()=>[e.open?(P(),I("div",{key:0,class:"fixed inset-0 z-[120] bg-black/60",onClick:H[0]||(H[0]=ve=>l("close"))})):pe("",!0)]),_:1}),x(it,{"enter-active-class":"transition-transform duration-200 ease-out","enter-from-class":"translate-y-6 scale-95 opacity-0","enter-to-class":"translate-y-0 scale-100 opacity-100","leave-active-class":"transition-transform duration-200 ease-in","leave-from-class":"translate-y-0 scale-100 opacity-100","leave-to-class":"translate-y-6 scale-95 opacity-0"},{default:M(()=>[e.open?(P(),I("div",vi,[u("div",hi,[u("div",gi,[(P(!0),I(be,null,Re(o(F),ve=>(P(),I("span",{key:ve,class:"confetti-piece",style:ot({"--x":`${ve*8}%`,"--delay":`${ve%6*.12}s`})},null,4))),128))]),u("div",bi,[H[3]||(H[3]=u("h3",{class:"text-lg font-bold text-foreground"},"It's a Match! ğŸ‰",-1)),x(o(oe),{variant:"ghost",size:"icon",class:"rounded-full",onClick:H[1]||(H[1]=ve=>l("close"))},{default:M(()=>[x(o(Ia),{class:"h-4 w-4"})]),_:1})]),u("div",yi,[x(o(We),{class:"h-16 w-16 border-2 border-primary/40 shadow-soft"},{default:M(()=>[x(o(ze),{src:g.value},null,8,["src"]),x(o(He),{class:"bg-primary/10 text-primary font-bold"},{default:M(()=>[D(U(_.value),1)]),_:1})]),_:1}),H[4]||(H[4]=u("div",{class:"relative flex h-10 w-10 items-center justify-center"},[u("div",{class:"absolute h-1 w-full rounded-full bg-primary/30"}),u("div",{class:"absolute h-7 w-7 rounded-full bg-primary/20 animate-pulse"})],-1)),x(o(We),{class:"h-16 w-16 border-2 border-primary/40 shadow-soft"},{default:M(()=>[x(o(ze),{src:$.value},null,8,["src"]),x(o(He),{class:"bg-primary/10 text-primary font-bold"},{default:M(()=>[D(U(y.value),1)]),_:1})]),_:1})]),u("p",wi,[H[5]||(H[5]=D(" Ğ’Ñ‹ Ğ¸Ğ´ĞµÑ‚Ğµ Ğ½Ğ° ",-1)),u("span",xi,U(R.value),1),H[6]||(H[6]=D(" Ğ²Ğ¼ĞµÑÑ‚Ğµ! ",-1))]),h.value?(P(),I("div",Mi,[H[12]||(H[12]=u("p",{class:"text-sm font-semibold text-foreground"},"Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¸ÑĞºĞ°Ñ‚ÑŒ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ.",-1)),H[13]||(H[13]=u("p",{class:"mt-2 text-xs text-muted-foreground"}," Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ğº ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ°Ğ¼ Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ¿Ğ¾ÑĞ»Ğµ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸. ",-1)),x(o(oe),{class:"mt-4 w-full",onClick:re},{default:M(()=>[...H[11]||(H[11]=[D("Ğ’Ğ¾Ğ¹Ñ‚Ğ¸",-1)])]),_:1})])):(P(),I("div",_i,[u("div",ki,[H[10]||(H[10]=u("p",{class:"text-xs font-semibold uppercase tracking-[0.18em] text-muted-foreground"}," Ğ¡Ğ²ÑĞ¶Ğ¸Ñ‚ĞµÑÑŒ ÑĞµĞ¹Ñ‡Ğ°Ñ: ",-1)),u("a",{href:B.value,class:"mt-3 flex w-full items-center justify-center gap-3 rounded-2xl border border-border bg-background px-4 py-3 text-sm font-semibold text-foreground shadow-soft transition hover:shadow-elevated"},[u("span",Ci,[O.value?(P(),I("svg",Si,[...H[7]||(H[7]=[u("path",{d:"M21.8 4.5c.3-1.2-1.1-2.2-2.2-1.6L2.9 10.3c-1.5.7-1.4 2.9.2 3.4l4.6 1.4 1.8 5.5c.4 1.2 1.9 1.6 2.8.7l2.7-2.6 4.7 3.4c1 .7 2.3.1 2.6-1.1l2.7-17.5Zm-3.6 2.8-8 7.2-.3 4.1-1.7-3.4-3.8-1.2 13.8-6.7Z"},null,-1)])])):q.value?(P(),I("svg",Ti,[...H[8]||(H[8]=[u("path",{d:"M3.3 7.5h2.5c.3 0 .5.2.6.4 1.1 2.2 2.3 4.1 3.8 5.6.5.5.9.4 1-.3V7.9c0-.2.2-.4.4-.4h2.4c.2 0 .4.2.4.4v3.2c0 .4.2.5.5.3 1.1-.7 2.2-2.2 3.3-4.4.1-.2.3-.4.6-.4h2.4c.3 0 .5.3.4.6-.6 1.7-1.9 3.8-3.6 6 .2.3.5.6.8.9 1.1 1.2 2.1 2.3 2.5 3.3.1.3-.1.6-.4.6h-2.6c-.2 0-.4-.1-.5-.3-.8-1.2-1.8-2.3-3-3.5-.3-.3-.5-.2-.6.2v3.3c0 .2-.2.4-.4.4h-1.1c-4.5 0-7.5-3-9.6-8.7-.1-.3.1-.6.4-.6Z"},null,-1)])])):(P(),I("svg",Pi,[...H[9]||(H[9]=[u("path",{d:"M16.6 14.1c-.2-.1-1.4-.7-1.6-.8-.2-.1-.4-.1-.6.1-.2.2-.7.8-.8.9-.1.1-.2.2-.5.1-.2-.1-.9-.3-1.8-1-.7-.6-1.1-1.3-1.2-1.5-.1-.2 0-.4.1-.5.1-.1.2-.2.3-.4.1-.1.1-.2.2-.4.1-.2 0-.4 0-.5-.1-.1-.6-1.5-.8-2-.2-.5-.4-.4-.6-.4h-.5c-.2 0-.5.1-.7.3-.2.2-.9.8-.9 2 0 1.2.9 2.4 1 2.5.1.2 1.7 2.7 4.2 3.8 2.4 1.1 2.4.7 2.8.7.4-.1 1.4-.6 1.6-1.1.2-.5.2-1 .1-1.1-.1-.1-.2-.1-.4-.2Z"},null,-1),u("path",{d:"M20.5 3.5A9.9 9.9 0 0 0 12 0C6 0 1.1 4.9 1.1 10.9c0 1.9.5 3.8 1.4 5.5L0 24l7.8-2.1c1.6.9 3.4 1.4 5.2 1.4 6 0 10.9-4.9 10.9-10.9 0-2.9-1.1-5.6-3.4-7.9Zm-8.5 17.2c-1.6 0-3.1-.4-4.4-1.2l-.3-.2-4.6 1.2 1.2-4.5-.2-.3c-.8-1.3-1.3-2.9-1.3-4.5 0-4.6 3.7-8.3 8.3-8.3 2.2 0 4.3.9 5.9 2.4 1.6 1.6 2.4 3.7 2.4 5.9 0 4.6-3.7 8.3-8.3 8.3Z"},null,-1)])]))]),u("span",null,U(S.value),1)],8,$i)])])),u("div",Ei,[x(o(oe),{class:"rounded-full px-6",onClick:H[2]||(H[2]=ve=>l("close"))},{default:M(()=>[...H[14]||(H[14]=[D(" ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ğ¾, Ğ¾Ğ±ÑÑƒĞ´Ğ¸Ğ¼ Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸ ",-1)])]),_:1})])])])):pe("",!0)]),_:1})]))}}),Ai=Object.assign(jr(Ri,[["__scopeId","data-v-f8df5d30"]]),{__name:"SharedBuddyMatchModal"}),Oi={class:"space-y-4"},ji={class:"flex items-center justify-between gap-2"},Ui={class:"space-y-2"},Ii={class:"space-y-2"},Di={class:"flex flex-wrap gap-2"},Li=["onClick"],Bi={class:"flex gap-2"},Fi={key:0,class:"flex flex-wrap gap-2"},Ni=["onClick"],Vi=ce({__name:"BuddyCreateModal",props:{open:{type:Boolean},submitting:{type:Boolean},requirementOptions:{default:()=>[]}},emits:["close","submit"],setup(e,{emit:n}){const a=e,l=n,c=Q(""),m=Q(""),f=Q([]),h=w({get:()=>a.open,set:$=>{$||l("close")}}),d=w(()=>c.value.trim().length>0),g=$=>{if(f.value.includes($)){f.value=f.value.filter(y=>y!==$);return}f.value=[...f.value,$]},_=()=>{const $=m.value.split(",").map(y=>y.trim()).filter(Boolean);$.length&&(f.value=Array.from(new Set([...f.value,...$])),m.value="")},v=()=>{const $=c.value.trim();$&&l("submit",{message:$,requirements:Array.from(new Set(f.value.map(y=>y.trim()).filter(Boolean)))})},k=()=>{c.value="",m.value="",f.value=[]};return Ue(()=>a.open,$=>{$&&k()}),($,y)=>(P(),ue(o(ar),{modelValue:h.value,"onUpdate:modelValue":y[3]||(y[3]=R=>h.value=R),class:"max-h-[90vh] overflow-y-auto border-border bg-card text-foreground"},{default:M(()=>[u("div",Oi,[u("div",ji,[y[5]||(y[5]=u("h4",{class:"text-base font-bold text-foreground"},"Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ",-1)),x(o(oe),{variant:"ghost",size:"sm",onClick:y[0]||(y[0]=R=>l("close"))},{default:M(()=>[...y[4]||(y[4]=[D("Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ",-1)])]),_:1})]),u("div",Ui,[y[6]||(y[6]=u("p",{class:"text-xs font-semibold uppercase tracking-[0.16em] text-muted-foreground"}," Ğ¢ĞµĞºÑÑ‚ Ğ¾Ğ±ÑŠÑĞ²Ğ»ĞµĞ½Ğ¸Ñ ",-1)),x(o(Po),{modelValue:c.value,"onUpdate:modelValue":y[1]||(y[1]=R=>c.value=R),rows:4,maxlength:"500",placeholder:"ĞĞ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: Ğ˜Ñ‰Ñƒ Ñ ĞºĞµĞ¼ Ğ¿Ğ¾ĞµÑ…Ğ°Ñ‚ÑŒ Ğ½Ğ° Ğ¼Ğ°ÑˆĞ¸Ğ½Ğµ Ğ¸Ğ· Ñ†ĞµĞ½Ñ‚Ñ€Ğ°"},null,8,["modelValue"])]),u("div",Ii,[y[8]||(y[8]=u("p",{class:"text-xs font-semibold uppercase tracking-[0.16em] text-muted-foreground"}," Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ ",-1)),u("div",Di,[(P(!0),I(be,null,Re(e.requirementOptions,R=>(P(),I("button",{key:R,type:"button",class:Ze(["rounded-full border px-3 py-1 text-xs font-semibold transition",f.value.includes(R)?"border-primary bg-primary/10 text-primary":"border-border text-muted-foreground hover:text-foreground"]),onClick:L=>g(R)},U(R),11,Li))),128))]),u("div",Bi,[x(o(Ur),{modelValue:m.value,"onUpdate:modelValue":y[2]||(y[2]=R=>m.value=R),placeholder:"Ğ¡Ğ²Ğ¾Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, Ğ‘ĞµĞ· Ğ°Ğ»ĞºĞ¾Ğ³Ğ¾Ğ»Ñ)",onKeydown:wo(Ea(_,["prevent"]),["enter"])},null,8,["modelValue","onKeydown"]),x(o(oe),{type:"button",variant:"outline",class:"shrink-0",onClick:_},{default:M(()=>[...y[7]||(y[7]=[D(" Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ",-1)])]),_:1})]),f.value.length?(P(),I("div",Fi,[(P(!0),I(be,null,Re(f.value,R=>(P(),I("span",{key:`selected-${R}`,class:"inline-flex items-center gap-2 rounded-full bg-primary/10 px-3 py-1 text-xs font-semibold text-primary"},[D(U(R)+" ",1),u("button",{type:"button",onClick:L=>g(R)},"Ã—",8,Ni)]))),128))])):pe("",!0)]),x(o(oe),{class:"w-full",disabled:e.submitting||!d.value,onClick:v},{default:M(()=>[D(U(e.submitting?"ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼...":"ĞĞ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ¾Ğ²Ğ°Ñ‚ÑŒ Ğ·Ğ°ÑĞ²ĞºÑƒ"),1)]),_:1},8,["disabled"])])]),_:1},8,["modelValue"]))}}),qi=Object.assign(Vi,{__name:"EventBuddyFinderBuddyCreateModal"}),Wi={class:"space-y-3 rounded-2xl border border-border/80 bg-background p-3"},zi={class:"flex flex-wrap items-center gap-2"},Hi=ce({__name:"BuddyFilterBar",props:{search:{},tab:{},createLabel:{default:"Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ"},createDisabled:{type:Boolean,default:!1}},emits:["update:search","change-tab","open-create"],setup(e,{emit:n}){const a=e,l=n,c=w({get:()=>a.search,set:m=>l("update:search",m)});return(m,f)=>(P(),I("div",Wi,[x(o(Ur),{modelValue:c.value,"onUpdate:modelValue":f[0]||(f[0]=h=>c.value=h),placeholder:"ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾ Ğ¾Ğ±ÑŠÑĞ²Ğ»ĞµĞ½Ğ¸ÑĞ¼ Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼"},null,8,["modelValue"]),u("div",zi,[x(o(oe),{size:"sm",class:"rounded-full",variant:e.tab==="all"?"default":"outline",onClick:f[1]||(f[1]=h=>l("change-tab","all"))},{default:M(()=>[...f[4]||(f[4]=[D(" Ğ’ÑĞµ ",-1)])]),_:1},8,["variant"]),x(o(oe),{size:"sm",class:"rounded-full",variant:e.tab==="mine"?"default":"outline",onClick:f[2]||(f[2]=h=>l("change-tab","mine"))},{default:M(()=>[...f[5]||(f[5]=[D(" ĞœĞ¾Ğ¸ ",-1)])]),_:1},8,["variant"]),x(o(oe),{size:"sm",class:"ml-auto rounded-full",disabled:e.createDisabled,onClick:f[3]||(f[3]=h=>l("open-create"))},{default:M(()=>[D(U(e.createLabel),1)]),_:1},8,["disabled"])])]))}}),Gi=Object.assign(Hi,{__name:"EventBuddyFinderBuddyFilterBar"}),Qi={class:"flex items-start justify-between gap-3"},Yi={class:"flex min-w-0 items-start gap-3"},Ji={class:"min-w-0"},Ki={class:"truncate text-sm font-semibold text-foreground"},Zi={class:"mt-1 text-xs text-muted-foreground"},Xi={key:0,class:"mt-3 flex flex-wrap gap-1.5"},el={key:2,class:"mt-4 flex flex-wrap gap-2"},tl=ce({__name:"BuddyCard",props:{request:{}},emits:["apply","accept","reject"],setup(e,{emit:n}){const a=e,l=n,c=w(()=>a.request.mode==="public"),m=w(()=>a.request.mode==="incoming"&&a.request.pendingDecision),f=w(()=>a.request.contactsMissing?"Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ‹":a.request.hasApplied?"Ğ—Ğ°ÑĞ²ĞºĞ° Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ°":a.request.applying?"ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼...":"ĞÑ‚ĞºĞ»Ğ¸ĞºĞ½ÑƒÑ‚ÑŒÑÑ");return(h,d)=>(P(),ue(o(Ee),{class:"min-w-[286px] snap-start rounded-2xl border border-border p-4 md:min-w-0"},{default:M(()=>[u("div",Qi,[u("div",Yi,[x(o(We),{class:"h-11 w-11 border border-border"},{default:M(()=>[x(o(ze),{src:e.request.ownerAvatar||"",alt:e.request.ownerName},null,8,["src","alt"]),x(o(He),{class:"bg-primary/10 text-primary font-semibold"},{default:M(()=>[D(U(e.request.ownerInitial),1)]),_:1})]),_:1}),u("div",Ji,[u("p",Ki,U(e.request.title),1),u("p",Zi,U(e.request.message||"Ğ‘ĞµĞ· Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ"),1)])]),e.request.mode==="incoming"?(P(),I("span",{key:0,class:Ze(["shrink-0 rounded-full px-2 py-1 text-[10px] font-semibold",e.request.statusClass])},U(e.request.statusLabel),3)):pe("",!0)]),e.request.requirements.length?(P(),I("div",Xi,[(P(!0),I(be,null,Re(e.request.requirements,g=>(P(),I("span",{key:`${e.request.key}-${g}`,class:"rounded-full bg-muted px-2.5 py-1 text-[11px] font-semibold text-muted-foreground"},U(g),1))),128))])):pe("",!0),c.value?(P(),ue(o(oe),{key:1,class:"mt-4 w-full",disabled:e.request.contactsMissing||e.request.hasApplied||e.request.applying,onClick:d[0]||(d[0]=g=>l("apply",e.request))},{default:M(()=>[D(U(f.value),1)]),_:1},8,["disabled"])):m.value?(P(),I("div",el,[x(o(oe),{size:"sm",class:"rounded-full",disabled:e.request.decidingAccept,onClick:d[1]||(d[1]=g=>l("accept",e.request))},{default:M(()=>[D(U(e.request.decidingAccept?"Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµĞ¼...":"ĞŸÑ€Ğ¸Ğ½ÑÑ‚ÑŒ"),1)]),_:1},8,["disabled"]),x(o(oe),{variant:"outline",size:"sm",class:"rounded-full",disabled:e.request.decidingReject,onClick:d[2]||(d[2]=g=>l("reject",e.request))},{default:M(()=>[D(U(e.request.decidingReject?"Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµĞ¼...":"ĞÑ‚ĞºĞ»Ğ¾Ğ½Ğ¸Ñ‚ÑŒ"),1)]),_:1},8,["disabled"])])):pe("",!0)]),_:1}))}}),rl=Object.assign(tl,{__name:"EventBuddyFinderBuddyCard"}),al={key:0,class:"grid gap-3 sm:grid-cols-2 xl:grid-cols-3"},nl={key:1,class:"-mx-1 flex snap-x snap-mandatory gap-3 overflow-x-auto px-1 pb-1 md:mx-0 md:grid md:grid-cols-2 md:gap-4 md:overflow-visible md:px-0 xl:grid-cols-3"},sl={key:2,class:"rounded-2xl border border-dashed border-border px-4 py-5 text-sm text-muted-foreground"},ol=ce({__name:"BuddyList",props:{items:{},loading:{type:Boolean},emptyText:{default:"ĞŸĞ¾ĞºĞ° Ğ½ĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…."},skeletonCount:{default:3}},emits:["apply","accept","reject"],setup(e,{emit:n}){const a=e,l=n;return(c,m)=>e.loading?(P(),I("div",al,[(P(!0),I(be,null,Re(e.skeletonCount,f=>(P(),I("div",{key:`buddy-skeleton-${f}`,class:"h-[196px] animate-pulse rounded-2xl bg-muted"}))),128))])):a.items.length?(P(),I("div",nl,[(P(!0),I(be,null,Re(a.items,f=>(P(),ue(rl,{key:f.key,request:f,onApply:m[0]||(m[0]=h=>l("apply",h)),onAccept:m[1]||(m[1]=h=>l("accept",h)),onReject:m[2]||(m[2]=h=>l("reject",h))},null,8,["request"]))),128))])):(P(),I("div",sl,U(e.emptyText),1))}}),il=Object.assign(ol,{__name:"EventBuddyFinderBuddyList"}),Pr=()=>({items:[],total:0,has_more:!1}),ht=e=>typeof e=="object"&&e!==null,Te=e=>typeof e!="string"?null:e.trim()||null,Dr=e=>{if(typeof e=="number"&&Number.isFinite(e)&&e>0)return Math.trunc(e);if(typeof e=="string"&&e.trim()){const n=Number.parseInt(e,10);if(Number.isFinite(n)&&n>0)return n}return null},nr=e=>{if(!ht(e))return null;const n=Dr(e.id),a=Te(e.username),l=Te(e.full_name),c=Te(e.avatar_url),m=Te(e.social_contact_type),f=Te(e.social_contact_value);return!n&&!a&&!l&&!c&&!m&&!f?null:{id:n,username:a,full_name:l,avatar_url:c,social_contact_type:m,social_contact_value:f}},ll=e=>{if(!ht(e))return null;const n=nr(e.user??e.applicant??null),a=Dr(e.applicant_id??e.user_id??n?.id??null);return a?{id:a,status:Te(e.status)||"pending",message:Te(e.message)||"",user:n}:null},ul=e=>{const n=[e.applicants,e.applications,e.pending_applications];for(const a of n){if(!Array.isArray(a))continue;const l=a.map(c=>ll(c)).filter(c=>!!c);if(l.length)return l}return[]},Kt=e=>e?Array.isArray(e)?e.map(n=>String(n)).filter(Boolean):ht(e)?Object.entries(e).filter(([,n])=>!!n).map(([n,a])=>typeof a=="string"?a:n):[]:[],vt=(e,n="ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ")=>e?.full_name||e?.username||n,ga=e=>vt(e,"U").trim().charAt(0).toUpperCase(),Mr=(e,n)=>e.some(a=>(a||"").toLowerCase().includes(n)),cl=e=>{const n=e.toLowerCase();return n==="accepted"||n==="accept"?"ĞŸÑ€Ğ¸Ğ½ÑÑ‚":n==="rejected"||n==="reject"?"ĞÑ‚ĞºĞ»Ğ¾Ğ½ĞµĞ½":"ĞĞ¶Ğ¸Ğ´Ğ°ĞµÑ‚"},dl=e=>{const n=e.toLowerCase();return n==="accepted"||n==="accept"?"bg-emerald-500/10 text-emerald-700 dark:text-emerald-300":n==="rejected"||n==="reject"?"bg-destructive/10 text-destructive":"bg-primary/10 text-primary"},fl=e=>{const n=e.toLowerCase();return n!=="accepted"&&n!=="accept"&&n!=="rejected"&&n!=="reject"},ba=e=>{if(!ht(e))return null;const n=nr(e.user??null),a=Te(e.username)||n?.username||null,l=Te(e.full_name)||n?.full_name||null,c=Te(e.avatar_url)||n?.avatar_url||null,m=ht(e.contact)?e.contact:null,f=Te(e.social_contact_type)||Te(m?.type)||n?.social_contact_type||null,h=Te(e.social_contact_value)||Te(m?.value)||n?.social_contact_value||null;return!a&&!l&&!c&&!f&&!h&&!n?null:{user:{username:a,full_name:l,avatar_url:c},username:a,full_name:l,avatar_url:c,social_contact_type:f,social_contact_value:h,contact:f||h?{type:f,value:h}:null}},ml=e=>{if(!ht(e))return null;const n=[e.buddy,e.match,e.data,e.user];for(const a of n){const l=ba(a);if(l)return l;if(!ht(a))continue;const c=ba(a.buddy??a.user??null);if(c)return c}return null},pl=e=>({user:{username:e.user?.username,full_name:e.user?.full_name,avatar_url:e.user?.avatar_url},username:e.user?.username,full_name:e.user?.full_name,avatar_url:e.user?.avatar_url,social_contact_type:e.user?.social_contact_type,social_contact_value:e.user?.social_contact_value,contact:e.user?.social_contact_value?{type:e.user?.social_contact_type,value:e.user?.social_contact_value}:null}),vl=e=>{const n=Xe(),a=Ge(),l=or(),c=w(()=>Te(Sr(e.slug))||""),m=w(()=>Dr(Sr(e.eventId))),f=w(()=>Te(Sr(e.eventTitle))),h=Q(""),d=Q("all"),g=Q(!1),_=Q([]),v=Q([]),k=Q(!1),$=Q(null),y=["18+","ĞĞ° Ğ¼Ğ°ÑˆĞ¸Ğ½Ğµ","ĞĞµ ĞºÑƒÑ€Ñ","ĞŸĞ¾ÑĞ»Ğµ ĞºĞ¾Ğ½Ñ†ĞµÑ€Ñ‚Ğ° Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ¾"],{data:R,pending:L,refresh:z}=ha("event-buddy-block",async()=>!n.token||!c.value?Pr():await n.apiFetch(`/api/v1/events/${c.value}/buddy`,{baseURL:Ie("/api/v1/events")}),{watch:[c,()=>n.token,()=>n.isAuthInitialized],default:Pr}),{data:K,pending:B}=ha("event-buddy-my-profile",async()=>!n.token||!n.isAuthInitialized?null:await n.apiFetch("/api/v1/me/profile",{baseURL:Ie("/api/v1/me/profile")}),{default:()=>null,watch:[()=>n.token,()=>n.isAuthInitialized]}),S=w(()=>{if(!n.isFullUser)return!1;const N=K.value??null;if(!N)return!1;const J=N.social_links&&typeof N.social_links=="object"?N.social_links:{},fe=Te(J.telegram),Le=Te(J.vk),Qe=Te(J.instagram),ft=Te(N.social_contact_value);return!!(fe||Le||Qe||ft)}),O=w(()=>n.isFullUser&&!B.value&&!S.value),q=w(()=>{const J=(R.value??Pr()).items;return Array.isArray(J)?J:[]}),F=w(()=>K.value?.id??null),re=N=>F.value!==null&&N.user?.id===F.value,ee=w(()=>q.value.filter(N=>!re(N))),H=w(()=>q.value.filter(N=>re(N))),ve=w(()=>H.value.map(N=>({request:N,applicants:ul(N)}))),je=w(()=>h.value.trim().toLowerCase()),de=w(()=>{const N=je.value;return N?ee.value.filter(J=>{const fe=nr(J.user??null);return Mr([J.message,fe?.full_name,fe?.username,...Kt(J.requirements)],N)}):ee.value}),se=w(()=>{const N=je.value;return N?ve.value.map(fe=>{if(Mr([fe.request.message,...Kt(fe.request.requirements)],N))return fe;const Qe=fe.applicants.filter(ft=>Mr([ft.message,ft.user?.full_name,ft.user?.username],N));return Qe.length?{request:fe.request,applicants:Qe}:null}).filter(fe=>!!fe):ve.value}),G=N=>_.value.includes(N),Z=(N,J,fe)=>v.value.includes(`${N}:${J}:${fe}`),ie=N=>{const J=N;return!!(J.i_applied||J.is_applied||J.has_applied||J.already_applied)},W=w(()=>!n.isFullUser||O.value?!1:!!(m.value&&c.value)),ae=w(()=>n.isFullUser?O.value?"ĞÑƒĞ¶Ğ½Ñ‹ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ‹":"Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ":"Ğ’Ğ¾Ğ¹Ñ‚Ğ¸"),he=w(()=>n.isFullUser&&!O.value&&!W.value),ge=w(()=>de.value.map(N=>{const J=nr(N.user??null);return{key:`public-${N.id}`,mode:"public",sourceRequest:N,sourceApplicant:null,title:vt(J,"ĞĞ½Ğ¾Ğ½Ğ¸Ğ¼"),ownerName:vt(J,"ĞĞ½Ğ¾Ğ½Ğ¸Ğ¼"),ownerAvatar:J?.avatar_url||null,ownerInitial:ga(J),message:N.message||"",requirements:Kt(N.requirements),hasApplied:ie(N),applying:G(N.id),contactsMissing:O.value,status:"",statusLabel:"",statusClass:"",pendingDecision:!1,decidingAccept:!1,decidingReject:!1}})),Pe=w(()=>se.value.flatMap(N=>N.applicants.map(J=>{const fe=J.status||"pending";return{key:`incoming-${N.request.id}-${J.id}`,mode:"incoming",sourceRequest:N.request,sourceApplicant:J,title:vt(J.user),ownerName:vt(J.user),ownerAvatar:J.user?.avatar_url||null,ownerInitial:ga(J.user),message:J.message||N.request.message||"",requirements:Kt(N.request.requirements),hasApplied:!1,applying:!1,contactsMissing:!1,status:fe,statusLabel:cl(fe),statusClass:dl(fe),pendingDecision:fl(fe),decidingAccept:Z(N.request.id,J.id,"accept"),decidingReject:Z(N.request.id,J.id,"reject")}}))),dt=w(()=>d.value==="mine"?Pe.value:ge.value),at=w(()=>d.value==="mine"?"ĞŸĞ¾ĞºĞ° Ğ½ĞµÑ‚ Ğ²Ñ…Ğ¾Ğ´ÑÑ‰Ğ¸Ñ… Ğ¾Ñ‚ĞºĞ»Ğ¸ĞºĞ¾Ğ² Ğ½Ğ° Ğ²Ğ°ÑˆĞ¸ Ğ·Ğ°ÑĞ²ĞºĞ¸.":"ĞŸĞ¾ĞºĞ° Ğ½ĞµÑ‚ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ñ‹Ñ… Ğ¾Ğ±ÑŠÑĞ²Ğ»ĞµĞ½Ğ¸Ğ¹. Ğ‘ÑƒĞ´ÑŒÑ‚Ğµ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¼, ĞºÑ‚Ğ¾ Ğ¸Ñ‰ĞµÑ‚ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ."),Be=()=>{const N=encodeURIComponent(l.fullPath||"/");rr(`/login?redirect=${N}`)},nt=()=>{rr("/profile/settings")},gt=()=>O.value?(a.push({level:"info",message:"Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ‹ Ğ² Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ğµ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¸ÑĞºĞ°Ñ‚ÑŒ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ"}),nt(),!1):n.isFullUser?W.value?!0:(a.push({level:"info",message:"Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°ÑĞ²ĞºĞ¸ ÑĞµĞ¹Ñ‡Ğ°Ñ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾."}),!1):(Be(),!1),bt=N=>N.reduce((J,fe)=>{const Le=fe.trim();return Le&&(J[Le]=!0),J},{}),yt=async()=>{await z()},lr=async N=>{if(!gt())return!1;const J=N.message.trim();if(!J||!m.value)return!1;g.value=!0;try{return await n.apiFetch(`/api/v1/events/${c.value}/buddy`,{method:"POST",baseURL:Ie("/api/v1/events"),body:{event_id:m.value,message:J,requirements:bt(N.requirements)}}),a.push({level:"success",message:"Ğ—Ğ°ÑĞ²ĞºĞ° Ğ¾Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ¾Ğ²Ğ°Ğ½Ğ°. Ğ–Ğ´Ğ¸Ñ‚Ğµ Ğ¾Ñ‚ĞºĞ»Ğ¸ĞºĞ¾Ğ²!"}),await yt(),!0}catch{return a.push({level:"error",message:"ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ·Ğ°ÑĞ²ĞºÑƒ. ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ ĞµÑ‰Ğµ Ñ€Ğ°Ğ·."}),!1}finally{g.value=!1}},Pt=async N=>{if(O.value){a.push({level:"info",message:"Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ‹ Ğ² Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ğµ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¸ÑĞºĞ°Ñ‚ÑŒ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ"}),nt();return}if(!n.isFullUser){Be();return}if(!(re(N)||G(N.id)||ie(N))){_.value=[..._.value,N.id];try{await n.apiFetch(`/api/v1/buddy/${N.id}/apply`,{method:"POST",baseURL:Ie("/api/v1/buddy"),body:{}});const J=N.user?.full_name||N.user?.username||"Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ";a.push({level:"success",message:`Ğ—Ğ°ÑĞ²ĞºĞ° Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ°! Ğ•ÑĞ»Ğ¸ ${J} Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ‚, Ğ¼Ñ‹ Ğ¾Ğ±Ğ¼ĞµĞ½ÑĞµĞ¼ Ğ²Ğ°Ñ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ°Ğ¼Ğ¸`}),await yt()}catch{a.push({level:"error",message:"ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ·Ğ°ÑĞ²ĞºÑƒ. ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ ĞµÑ‰Ğµ Ñ€Ğ°Ğ·."})}finally{_.value=_.value.filter(J=>J!==N.id)}}},wt=async(N,J,fe)=>{if(!n.isFullUser){Be();return}const Le=`${N.id}:${J.id}:${fe}`;if(!v.value.includes(Le)){v.value=[...v.value,Le];try{const Qe=await n.apiFetch(`/api/v1/buddy/${N.id}/decide`,{method:"POST",baseURL:Ie("/api/v1/buddy"),body:{applicant_id:J.id,action:fe}});fe==="accept"?($.value=ml(Qe)||pl(J),k.value=!!$.value,a.push({level:"success",message:`Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ¾Ñ‚ ${vt(J.user,"Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ")} Ğ¿Ñ€Ğ¸Ğ½ÑÑ‚.`})):a.push({level:"info",message:`Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ¾Ñ‚ ${vt(J.user,"Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ")} Ğ¾Ñ‚ĞºĞ»Ğ¾Ğ½ĞµĞ½.`}),await yt()}catch{a.push({level:"error",message:"ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑƒÑ Ğ·Ğ°ÑĞ²ĞºĞ¸. ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ ĞµÑ‰Ğµ Ñ€Ğ°Ğ·."})}finally{v.value=v.value.filter(Qe=>Qe!==Le)}}},xt=()=>{k.value=!1},ur=N=>{h.value=N},Ne=N=>{d.value=N};return{activeTab:d,applyToRequest:Pt,buddyPending:L,canCreate:W,closeMatchModal:xt,contactsMissingForBuddy:O,createButtonLabel:ae,createRequest:lr,createSubmitting:g,emptyText:at,eventTitle:f,fetchRequests:yt,goToProfileSettings:nt,incomingCardRequests:Pe,isCreateActionDisabled:he,matchModalOpen:k,matchedBuddy:$,myRequestsCount:w(()=>H.value.length),publicCardRequests:ge,requests:q,requirementOptions:y,respondToRequest:wt,searchQuery:h,setSearchQuery:ur,setTab:Ne,visibleRequests:dt,openCreateFlow:gt}},hl={class:"space-y-4 rounded-2xl border border-border bg-card p-4 shadow-soft"},gl={class:"flex flex-wrap items-center justify-between gap-3"},bl={key:0,class:"rounded-full bg-primary/10 px-2.5 py-1 text-xs font-semibold text-primary"},yl={key:0,class:"rounded-2xl border border-amber-300/40 bg-amber-100/20 px-4 py-3 text-sm text-amber-800 dark:text-amber-200"},wl=ce({__name:"index",props:{slug:{},eventId:{},eventTitle:{}},setup(e){const n=e,a=Q(!1),l=vl({slug:Tr(n,"slug"),eventId:Tr(n,"eventId"),eventTitle:Tr(n,"eventTitle")}),c=()=>{l.openCreateFlow()&&(a.value=!0)},m=()=>{a.value=!1},f=async k=>{await l.createRequest(k)&&(a.value=!1)},h=async k=>{await l.applyToRequest(k.sourceRequest)},d=async k=>{k.sourceApplicant&&await l.respondToRequest(k.sourceRequest,k.sourceApplicant,"accept")},g=async k=>{k.sourceApplicant&&await l.respondToRequest(k.sourceRequest,k.sourceApplicant,"reject")},_=k=>{l.setSearchQuery(k)},v=k=>{l.setTab(k)};return(k,$)=>(P(),I("section",hl,[u("div",gl,[$[0]||($[0]=u("div",null,[u("h3",{class:"text-base font-bold text-foreground"},"Buddy Finder"),u("p",{class:"text-xs text-muted-foreground"}," ĞĞ°Ğ¹Ğ´Ğ¸ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ Ğ½Ğ° ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ Ğ¸ Ğ´Ğ¾Ğ³Ğ¾Ğ²Ğ°Ñ€Ğ¸Ğ²Ğ°Ğ¹ÑÑ Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ ")],-1)),o(l).activeTab==="mine"?(P(),I("span",bl," ĞœĞ¾Ğ¸ Ğ·Ğ°ÑĞ²ĞºĞ¸: "+U(o(l).myRequestsCount),1)):pe("",!0)]),x(Gi,{search:o(l).searchQuery,tab:o(l).activeTab,"create-label":o(l).createButtonLabel,"create-disabled":o(l).isCreateActionDisabled,"onUpdate:search":_,onChangeTab:v,onOpenCreate:c},null,8,["search","tab","create-label","create-disabled"]),o(l).contactsMissingForBuddy?(P(),I("div",yl,[$[2]||($[2]=u("p",null,"Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ‹ Ğ² Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ğµ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¸ÑĞºĞ°Ñ‚ÑŒ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ",-1)),x(o(oe),{variant:"outline",size:"sm",class:"mt-2 rounded-full border-amber-400/40 text-amber-700 hover:text-amber-800 dark:text-amber-200 dark:hover:text-amber-100",onClick:o(l).goToProfileSettings},{default:M(()=>[...$[1]||($[1]=[D(" ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ ",-1)])]),_:1},8,["onClick"])])):pe("",!0),x(il,{items:o(l).visibleRequests,loading:o(l).buddyPending,"empty-text":o(l).emptyText,onApply:h,onAccept:d,onReject:g},null,8,["items","loading","empty-text"]),x(qi,{open:a.value,submitting:o(l).createSubmitting,"requirement-options":o(l).requirementOptions,onClose:m,onSubmit:f},null,8,["open","submitting","requirement-options"]),o(l).matchModalOpen&&o(l).matchedBuddy?(P(),ue(Ai,{key:1,open:o(l).matchModalOpen,buddy:o(l).matchedBuddy,event:{title:o(l).eventTitle||void 0},onClose:o(l).closeMatchModal},null,8,["open","buddy","event","onClose"])):pe("",!0)]))}}),xl=Object.assign(wl,{__name:"EventBuddyFinder"}),_l={class:"mb-4 flex items-center justify-between gap-2"},kl={class:"grid gap-3 md:grid-cols-3"},$l={class:"flex h-full flex-col justify-between"},Cl={class:"flex items-center gap-3"},Sl={class:"min-w-0"},Tl={class:"truncate text-sm font-semibold text-foreground"},Pl={class:"text-xs text-muted-foreground"},Ml={class:"mt-3 text-xs text-muted-foreground"},El={key:0,class:"mt-4"},Rl=ce({__name:"BuddyFinderPreview",props:{event:{}},setup(e){const n=e,a=Ge(),l=w(()=>n.event),c=w(()=>l.value.state_payload??null),m=w(()=>{const k=c.value?.buddy_preview??[];if(k.length)return k.map(y=>({id:String(y.request_id),username:y.user.username,avatarUrl:y.user.avatar_url||"",message:y.message||"Open to connect before the event",compatibility:y.compatibility_score||"80%"}));const $=l.value.participants_preview??[];return $.length?$.map((y,R)=>({id:String(y.id??R),username:y.username,avatarUrl:y.avatar_url||"",message:"Open to connect before the event",compatibility:`${78+R%4*5}%`})):[{id:"1",username:"Alex",avatarUrl:"",message:"Looking for a crew",compatibility:"91%"},{id:"2",username:"Oleg",avatarUrl:"",message:"First time at this venue",compatibility:"86%"},{id:"3",username:"Mila",avatarUrl:"",message:"Love meeting new people",compatibility:"84%"},{id:"4",username:"Roma",avatarUrl:"",message:"Want to join a group",compatibility:"82%"}]}),f=w(()=>m.value.slice(0,3)),h=Q(!1),d=Q(new Set),g=k=>d.value.has(k),_=k=>{g(k)||(d.value=new Set([...d.value,k]),a.push({level:"success",title:"Buddy Finder",message:"Greeting sent"}))},v=()=>{h.value=!h.value};return(k,$)=>(P(),ue(o(Ee),{class:"rounded-3xl border border-border p-5"},{default:M(()=>[u("div",_l,[$[0]||($[0]=u("h3",{class:"text-base font-semibold text-foreground"},"Buddy Finder",-1)),x(o(qe),{variant:"secondary"},{default:M(()=>[D(U(o(m).length)+" buddies",1)]),_:1})]),u("div",kl,[(P(!0),I(be,null,Re(o(f),y=>(P(),I("article",{key:y.id,class:"rounded-2xl border border-border bg-card p-4"},[u("div",$l,[u("div",null,[u("div",Cl,[x(o(We),{class:"h-10 w-10 border border-border"},{default:M(()=>[x(o(ze),{src:y.avatarUrl,alt:y.username},null,8,["src","alt"]),x(o(He),{class:"bg-primary/10 text-xs font-semibold text-primary"},{default:M(()=>[D(U(y.username.charAt(0).toUpperCase()),1)]),_:2},1024)]),_:2},1024),u("div",Sl,[u("p",Tl,U(y.username),1),u("p",Pl,U(y.compatibility)+" match",1)])]),u("p",Ml,U(y.message),1)]),x(o(oe),{variant:"outline",size:"sm",class:"mt-4 w-full",disabled:g(y.id),onClick:R=>_(y.id)},{default:M(()=>[D(U(g(y.id)?"Sent":"Say Hi"),1)]),_:2},1032,["disabled","onClick"])])]))),128))]),x(o(oe),{variant:"ghost",class:"mt-3 w-full",onClick:v},{default:M(()=>[D(U(o(h)?"Hide":"Show All"),1)]),_:1}),x(it,{"enter-active-class":"transition duration-250 ease-out","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition duration-180 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:M(()=>[o(h)?(P(),I("div",El,[x(xl,{slug:o(l).slug,"event-id":o(l).id,"event-title":o(l).title},null,8,["slug","event-id","event-title"])])):pe("",!0)]),_:1})]),_:1}))}}),Al=Object.assign(Rl,{__name:"Event[slug]BlocksState1BuddyFinderPreview"}),Ol={class:"relative h-[320px] w-full sm:h-[380px]"},jl=["src","alt"],Ul={key:1,class:"h-full w-full bg-gradient-to-br from-slate-900 via-slate-700 to-slate-800"},Il={class:"absolute left-4 top-4 z-10"},Dl={class:"absolute inset-x-0 bottom-0 z-10 space-y-3 p-5 text-white sm:p-7"},Ll={class:"max-w-3xl break-words text-2xl font-bold leading-tight sm:text-4xl"},Bl={class:"inline-flex items-center gap-2 text-sm text-white/90"},Fl=ce({__name:"HeroBlock",props:{event:{}},setup(e){const n=e,a=w(()=>n.event),l=w(()=>a.value.state_payload??null),c=w(()=>a.value.title?.trim()||"Event"),m=w(()=>a.value.images?.[0]?.url?.trim()||""),f=w(()=>`Compatibility ${l.value?.compatibility_score?.trim()||"88%"}`),h=w(()=>a.value.occurrences?.[0]?.start_time||""),d=w(()=>a.value.occurrences?.[0]?.end_time||""),g=w(()=>{if(!h.value)return"Date is being updated";const k=new Date(h.value);return Number.isNaN(k.getTime())?"Date is being updated":new Intl.DateTimeFormat("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(k)}),_=w(()=>{if(!h.value)return"";const k=new Date(h.value);if(Number.isNaN(k.getTime()))return"";const $=d.value?new Date(d.value):new Date(k.getTime()+7200*1e3);if(Number.isNaN($.getTime()))return"";const y=z=>z.toISOString().replace(/[-:]/g,"").replace(/\.\d{3}Z$/,"Z"),R=a.value.default_venue?.name?.trim()||a.value.occurrences?.[0]?.location_name?.trim()||"";return`https://calendar.google.com/calendar/render?${new URLSearchParams({action:"TEMPLATE",text:c.value,dates:`${y(k)}/${y($)}`,details:a.value.description?.trim()||"Event details",location:R}).toString()}`}),v=()=>{_.value&&window.open(_.value,"_blank","noopener,noreferrer")};return(k,$)=>(P(),ue(o(Ee),{class:"overflow-hidden rounded-3xl border border-border bg-card p-0 shadow-elevated"},{default:M(()=>[u("div",Ol,[o(m)?(P(),I("img",{key:0,src:o(m),alt:o(c),class:"h-full w-full object-cover"},null,8,jl)):(P(),I("div",Ul)),$[1]||($[1]=u("div",{class:"absolute inset-0 bg-gradient-to-t from-black/85 via-black/40 to-transparent"},null,-1)),u("div",Il,[x(o(qe),{class:"gap-1 border-white/25 bg-white/15 text-white backdrop-blur-sm"},{default:M(()=>[x(o(ir),{class:"h-3.5 w-3.5"}),D(" "+U(o(f)),1)]),_:1})]),u("div",Dl,[u("h1",Ll,U(o(c)),1),u("p",Bl,[x(o(Mo),{class:"h-4 w-4"}),u("span",null,U(o(g)),1)]),x(o(oe),{variant:"outline",size:"sm",class:"h-10 border-white/30 bg-black/20 text-white hover:bg-black/35",disabled:!o(_),onClick:v},{default:M(()=>[x(o(Eo),{class:"h-4 w-4"}),$[0]||($[0]=D(" Add to Calendar ",-1))]),_:1},8,["disabled"])])])]),_:1}))}}),Nl=Object.assign(Fl,{__name:"Event[slug]BlocksState1HeroBlock"}),Vl={class:"mb-3 flex items-center justify-between gap-2"},ql={class:"mb-4 text-sm text-muted-foreground"},Wl={class:"grid gap-2 sm:grid-cols-2"},zl=["href"],Hl=["href"],Gl=ce({__name:"MapActions",props:{event:{},venue:{}},setup(e){const n=e,a=w(()=>n.venue??n.event.default_venue??n.event.occurrences?.[0]?.venue??null),l=w(()=>Number(a.value?.lat)),c=w(()=>Number(a.value?.lon)),m=w(()=>Number.isFinite(l.value)&&Number.isFinite(c.value)),f=w(()=>m.value?`https://3.redirect.appmetrica.yandex.com/route?end-lat=${l.value}&end-lon=${c.value}&ref=yandex_taxi&appmetrica_tracking_id=1178268795219780156`:"#"),h=w(()=>m.value?`https://www.google.com/maps/dir/?api=1&destination=${l.value},${c.value}`:"#"),d=w(()=>a.value?.address?.trim()||a.value?.city?.trim()||"Venue address is updating");return(g,_)=>(P(),ue(o(Ee),{class:"rounded-3xl border border-border p-5"},{default:M(()=>[u("div",Vl,[_[1]||(_[1]=u("h3",{class:"text-base font-semibold text-foreground"},"Map Actions",-1)),x(o(qe),{variant:"secondary"},{default:M(()=>[..._[0]||(_[0]=[D("Yandex + Google",-1)])]),_:1})]),u("p",ql,U(o(d)),1),u("div",Wl,[u("a",{href:o(f),target:"_blank",rel:"noopener noreferrer",class:Ze(["inline-flex h-10 items-center justify-center gap-2 rounded-md border border-input bg-background px-3 text-sm font-medium text-foreground transition hover:bg-accent",o(m)?"":"pointer-events-none opacity-50"])},[x(o(Ro),{class:"h-4 w-4"}),_[2]||(_[2]=D(" Taxi ",-1))],10,zl),u("a",{href:o(h),target:"_blank",rel:"noopener noreferrer",class:Ze(["inline-flex h-10 items-center justify-center gap-2 rounded-md border border-input bg-background px-3 text-sm font-medium text-foreground transition hover:bg-accent",o(m)?"":"pointer-events-none opacity-50"])},[x(o(Ao),{class:"h-4 w-4"}),_[3]||(_[3]=D(" Navigator ",-1))],10,Hl)])]),_:1}))}}),Ql=Object.assign(Gl,{__name:"Event[slug]BlocksState1MapActions"}),Yl={class:"flex items-center justify-between gap-2"},Jl={class:"text-lg font-semibold text-foreground"},Kl={class:"mt-4"},Zl={class:"mt-4 max-h-[60vh] space-y-2 overflow-y-auto pr-1"},Xl={class:"flex items-center gap-3"},eu={class:"min-w-0"},tu={class:"truncate text-sm font-semibold text-foreground"},ru=ce({__name:"ParticipantsSheet",props:{modelValue:{type:Boolean},participants:{default:()=>[]},totalCount:{default:0}},emits:["update:modelValue"],setup(e,{emit:n}){const a=e,l=n,c=Q(""),m=()=>l("update:modelValue",!1),f=w(()=>a.participants.length?a.participants:[{id:1,username:"Alex",avatar_url:""},{id:2,username:"Oleg",avatar_url:""},{id:3,username:"Mila",avatar_url:""},{id:4,username:"Roma",avatar_url:""},{id:5,username:"Nika",avatar_url:""}]),h=w(()=>{const _=c.value.trim().toLowerCase();return _?f.value.filter(v=>v.username.toLowerCase().includes(_)):f.value}),d=w(()=>{const _=Number(a.totalCount);return Number.isFinite(_)&&_>0?_:h.value.length}),g=_=>`/u/${encodeURIComponent(_)}`;return(_,v)=>{const k=Ra;return P(),ue(Ar,{to:"body"},[x(it,{"enter-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:M(()=>[e.modelValue?(P(),I("div",{key:0,class:"fixed inset-0 z-[70] bg-black/60",onClick:m})):pe("",!0)]),_:1}),x(it,{"enter-active-class":"transition-transform duration-250 ease-out","enter-from-class":"translate-y-8 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition-transform duration-200 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-8 opacity-0"},{default:M(()=>[e.modelValue?(P(),I("div",{key:0,class:"fixed inset-0 z-[80] flex items-end justify-center px-4 pb-4",onClick:m},[x(o(Ee),{class:"w-full max-w-xl rounded-3xl border border-border bg-card p-5 shadow-2xl",onClick:v[1]||(v[1]=Ea(()=>{},["stop"]))},{default:M(()=>[u("div",Yl,[u("h3",Jl," Participants ("+U(o(d))+") ",1),x(o(qe),{variant:"secondary"},{default:M(()=>[D(U(o(h).length)+" visible",1)]),_:1})]),u("div",Kl,[x(o(Ur),{modelValue:o(c),"onUpdate:modelValue":v[0]||(v[0]=$=>lt(c)?c.value=$:null),placeholder:"Search username"},null,8,["modelValue"])]),u("div",Zl,[(P(!0),I(be,null,Re(o(h),$=>(P(),ue(k,{key:$.id,to:g($.username),class:"flex items-center justify-between gap-3 rounded-2xl border border-border p-3 transition hover:border-primary/40 hover:bg-primary/5"},{default:M(()=>[u("div",Xl,[x(o(We),{class:"h-10 w-10 border border-border"},{default:M(()=>[x(o(ze),{src:$.avatar_url||"",alt:$.username},null,8,["src","alt"]),x(o(He),{class:"bg-primary/10 text-xs font-semibold text-primary"},{default:M(()=>[D(U($.username.charAt(0).toUpperCase()),1)]),_:2},1024)]),_:2},1024),u("div",eu,[u("p",tu,U($.username),1),v[2]||(v[2]=u("p",{class:"text-xs text-muted-foreground"},"Open profile",-1))])]),x(o(oe),{variant:"outline",size:"sm"},{default:M(()=>[...v[3]||(v[3]=[D("Profile",-1)])]),_:1})]),_:2},1032,["to"]))),128))]),x(o(oe),{variant:"ghost",class:"mt-4 w-full",onClick:m},{default:M(()=>[...v[4]||(v[4]=[D("Close",-1)])]),_:1})]),_:1})])):pe("",!0)]),_:1})])}}}),au=Object.assign(ru,{__name:"Event[slug]BlocksState1ParticipantsSheet"}),nu={class:"flex items-center justify-between gap-2"},su={class:"mt-4 flex flex-col items-start gap-3 sm:flex-row sm:items-center sm:gap-4"},ou={class:"flex -space-x-3"},iu={class:"text-sm leading-relaxed text-muted-foreground"},lu={class:"font-semibold text-foreground"},uu={class:"font-semibold text-foreground"},cu={class:"font-semibold text-foreground"},du=ce({__name:"ParticipantsBlock",props:{event:{}},setup(e){const n=e,a=w(()=>n.event),l=w(()=>a.value.state_payload??null),c=w(()=>l.value?.participants_summary??null),m=w(()=>c.value?.friends_preview?.length?c.value.friends_preview:a.value.participants_preview?.length?a.value.participants_preview:[]),f=w(()=>m.value.length?m.value:[{id:1,username:"Alex",avatar_url:""},{id:2,username:"Oleg",avatar_url:""},{id:3,username:"Mila",avatar_url:""}]),h=w(()=>f.value.slice(0,5)),d=w(()=>{const $=Number(c.value?.total_count??0);if(Number.isFinite($)&&$>0)return $;const y=Number(a.value.stats?.going_count??0);return Number.isFinite(y)&&y>0?y:Math.max(f.value.length,2)}),g=w(()=>({first:f.value[0]?.username||"Alex",second:f.value[1]?.username||"Oleg"})),_=w(()=>Math.max(d.value-2,0)),v=Q(!1),k=()=>{v.value=!0};return($,y)=>(P(),I(be,null,[x(o(Ee),{class:"cursor-pointer rounded-2xl border border-border p-4 transition hover:border-primary/40 hover:bg-primary/5",role:"button",tabindex:"0",onClick:k},{default:M(()=>[u("div",nu,[y[1]||(y[1]=u("h3",{class:"text-sm font-semibold text-foreground"},"Participants",-1)),x(o(qe),{variant:"secondary"},{default:M(()=>[D(U(o(d)),1)]),_:1})]),u("div",su,[u("div",ou,[(P(!0),I(be,null,Re(o(h),(R,L)=>(P(),ue(o(We),{key:R.id,class:"h-10 w-10 border-2 border-background shadow-sm"},{default:M(()=>[x(o(ze),{src:R.avatar_url||"",alt:R.username},null,8,["src","alt"]),x(o(He),{class:"bg-primary/10 text-xs font-semibold text-primary"},{default:M(()=>[D(U(R.username.charAt(0).toUpperCase()),1)]),_:2},1024)]),_:2},1024))),128))]),u("p",iu,[u("span",lu,U(o(g).first),1),y[2]||(y[2]=D(", ",-1)),u("span",uu,U(o(g).second),1),y[3]||(y[3]=D(" + ",-1)),u("span",cu,U(o(_)),1),y[4]||(y[4]=D(" others ",-1))])])]),_:1}),x(au,{modelValue:o(v),"onUpdate:modelValue":y[0]||(y[0]=R=>lt(v)?v.value=R:null),participants:o(f),"total-count":o(d)},null,8,["modelValue","participants","total-count"])],64))}}),fu=Object.assign(du,{__name:"Event[slug]BlocksState1ParticipantsBlock"}),mu={class:"mb-3 flex items-center justify-between gap-2"},pu={class:"relative"},vu={class:"text-sm leading-relaxed text-foreground"},hu={key:0,class:"absolute inset-0 flex items-center justify-center rounded-2xl bg-background/35 backdrop-blur-sm"},gu={class:"mx-auto max-w-xs space-y-3 text-center"},bu={class:"mx-auto inline-flex h-11 w-11 items-center justify-center rounded-full bg-card/90"},yu={class:"text-sm font-medium text-foreground"},wu={class:"mt-4"},xu={class:"h-2 w-full overflow-hidden rounded-full bg-muted"},_u={class:"mt-2 text-xs text-muted-foreground"},ku=ce({__name:"SecretContentBlock",props:{event:{}},setup(e){const n=e,a=Ge(),l=w(()=>n.event),c=w(()=>l.value.state_payload??null),m=w(()=>c.value?.secret_content_progress??null),f=w(()=>{const y=Number(m.value?.target_referrals??3);return!Number.isFinite(y)||y<1?3:Math.round(y)}),h=Q(0);Ue(()=>n.event.id,()=>{const y=Number(m.value?.current_referrals??0);h.value=Number.isFinite(y)&&y>0?Math.round(y):0},{immediate:!0});const d=w(()=>!!m.value?.is_unlocked),g=w(()=>d.value||h.value>=f.value),_=w(()=>{const y=h.value/f.value;return Math.max(0,Math.min(100,Math.round(y*100)))}),v=w(()=>l.value.full_text?.trim()||"Hidden content unlocks after you invite friends. You will get access to the secret room details."),k=w(()=>{const y=encodeURIComponent(l.value.slug||"");return`${window.location.origin}/e/${y}?ref=friend`}),$=async()=>{const y={title:l.value.title||"Event invite",text:"Join me at this event",url:k.value};try{if(typeof navigator.share=="function")await navigator.share(y);else if(navigator.clipboard?.writeText)await navigator.clipboard.writeText(k.value),a.push({level:"success",title:"Invite Link",message:"Invite link copied"});else{a.push({level:"error",title:"Invite Link",message:"Share is not available"});return}}catch(R){if(R instanceof Error&&R.name==="AbortError")return;a.push({level:"error",title:"Invite Link",message:"Could not share invite"});return}g.value||(h.value=Math.min(f.value,h.value+1))};return(y,R)=>(P(),ue(o(Ee),{class:"rounded-3xl border border-border p-5"},{default:M(()=>[u("div",mu,[R[0]||(R[0]=u("h3",{class:"text-base font-semibold text-foreground"},"Secret Content",-1)),x(o(qe),{variant:"secondary"},{default:M(()=>[D(U(o(h))+" / "+U(o(f))+" friends",1)]),_:1})]),u("div",pu,[u("div",{class:Ze(["rounded-2xl border border-border/80 bg-muted/25 p-4 transition duration-300",o(g)?"":"blur-[2px] saturate-50"])},[u("p",vu,U(o(v)),1)],2),o(g)?pe("",!0):(P(),I("div",hu,[u("div",gu,[u("div",bu,[x(o(Oo),{class:"h-5 w-5 text-foreground"})]),u("p",yu," Invite "+U(o(f))+" friends to unlock. ",1),x(o(oe),{size:"sm",class:"gap-2",onClick:$},{default:M(()=>[x(o(Uo),{class:"h-4 w-4"}),R[1]||(R[1]=D(" Invite a Friend ",-1))]),_:1})])]))]),u("div",wu,[u("div",xu,[u("div",{class:"h-full rounded-full bg-primary transition-all",style:ot({width:`${o(_)}%`})},null,4)]),u("p",_u,U(o(g)?"Unlocked":`${Math.max(o(f)-o(h),0)} invites left`),1)])]),_:1}))}}),$u=Object.assign(ku,{__name:"Event[slug]BlocksState1SecretContentBlock"}),Cu={class:"space-y-3"},Su={class:"mt-1 text-lg font-bold uppercase tracking-wide text-foreground"},Tu={class:"text-sm font-semibold uppercase tracking-[0.16em] text-foreground/90"},Pu=ce({__name:"GameIdentity",props:{slug:{default:""},team:{default:"Ğ—Ğ•Ğ›Ğ•ĞĞ«Ğ•"},role:{default:"Ğ ĞĞ—Ğ’Ğ•Ğ”Ğ§Ğ˜Ğš"},waveTargetUuid:{default:null},teamColor:{default:""},cooldownSeconds:{default:20}},emits:["waved"],setup(e,{emit:n}){const a={GREEN:"#22c55e",RED:"#ef4444",BLUE:"#3b82f6",YELLOW:"#f59e0b",PURPLE:"#8b5cf6",Ğ—Ğ•Ğ›Ğ•ĞĞ«Ğ•:"#22c55e",ĞšĞ ĞĞ¡ĞĞ«Ğ•:"#ef4444",Ğ¡Ğ˜ĞĞ˜Ğ•:"#3b82f6",Ğ–Ğ•Ğ›Ğ¢Ğ«Ğ•:"#f59e0b",Ğ¤Ğ˜ĞĞ›Ğ•Ğ¢ĞĞ’Ğ«Ğ•:"#8b5cf6"},l=e,c=n,m=Xe(),f=Ge(),h=Q(!1),d=Q(0),g=Q(!1);let _=null,v=null;const k=F=>F.trim().toUpperCase(),$=w(()=>{const F=l.teamColor.trim();return F||a[k(l.team)]||"#22c55e"}),y=w(()=>({"--team-accent":$.value,"--team-soft":`${$.value}1A`})),R=w(()=>({borderColor:`${$.value}66`,backgroundColor:`${$.value}14`})),L=w(()=>g.value?"ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ°...":d.value>0?`ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€ Ñ‡ĞµÑ€ĞµĞ· ${d.value}Ñ`:"ĞœĞ°Ñ…Ğ½ÑƒÑ‚ÑŒ Ñ€ÑƒĞºĞ¾Ğ¹"),z=w(()=>l.slug.trim().length>0&&(l.waveTargetUuid||"").trim().length>0),K=()=>{_&&(clearTimeout(_),_=null)},B=()=>{v&&(clearInterval(v),v=null)},S=()=>{K(),h.value=!0,_=setTimeout(()=>{h.value=!1,_=null},430)},O=()=>{B(),d.value=Math.max(0,Math.floor(l.cooldownSeconds)),!(d.value<=0)&&(v=Da(()=>{d.value-=1,d.value<=0&&(d.value=0,B())},1e3))},q=async()=>{if(d.value>0||g.value)return;g.value=!0;let F=!1;if(z.value)try{await m.apiFetch(`/api/v1/events/${encodeURIComponent(l.slug)}/wave/${encodeURIComponent(l.waveTargetUuid||"")}`,{method:"POST",baseURL:Ie("/api/v1/events")}),F=!0}catch{F=!1}S(),O(),g.value=!1,c("waved"),f.push({level:F?"success":"info",title:"Ğ¡Ğ¸Ğ³Ğ½Ğ°Ğ» Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½",message:F?"Ğ£Ñ‡Ğ°ÑÑ‚Ğ½Ğ¸Ğº Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ» push-ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ. Ğ­ĞºÑ€Ğ°Ğ½ Ğ¼Ğ¸Ğ³Ğ½ÑƒĞ» Ñ†Ğ²ĞµÑ‚Ğ¾Ğ¼ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹.":"Ğ­ĞºÑ€Ğ°Ğ½ Ğ¼Ğ¸Ğ³Ğ½ÑƒĞ» Ñ†Ğ²ĞµÑ‚Ğ¾Ğ¼ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹. Ğ”Ğ»Ñ API-ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ° Ğ½ÑƒĞ¶ĞµĞ½ target uuid."})};return Lt(()=>{K(),B()}),(F,re)=>(P(),I(be,null,[x(o(Ee),{class:"relative overflow-hidden rounded-3xl border border-border p-4 sm:p-5",style:ot(o(y))},{default:M(()=>[re[1]||(re[1]=u("span",{class:"absolute inset-y-0 left-0 w-1.5 bg-[var(--team-accent)]"},null,-1)),u("div",Cu,[u("div",null,[re[0]||(re[0]=u("p",{class:"text-[11px] font-semibold uppercase tracking-[0.2em] text-muted-foreground"},"Game Identity",-1)),u("h2",Su,"ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°: "+U(e.team),1),u("p",Tu,"Ğ Ğ¾Ğ»ÑŒ: "+U(e.role),1)]),u("div",{class:"rounded-2xl border px-3 py-2.5 text-xs text-foreground/85",style:ot(o(R))}," ĞĞ°Ğ¶Ğ¼Ğ¸ Â«ĞœĞ°Ñ…Ğ½ÑƒÑ‚ÑŒ Ñ€ÑƒĞºĞ¾Ğ¹Â», Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞ¸Ğ³Ğ½Ğ°Ğ» Ğ¸ Ğ¿Ğ¾Ğ´ÑĞ²ĞµÑ‚Ğ¸Ñ‚ÑŒ ÑĞºÑ€Ğ°Ğ½ Ñ†Ğ²ĞµÑ‚Ğ¾Ğ¼ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹. ",4),x(o(oe),{class:"w-full gap-2 sm:w-auto",style:ot({backgroundColor:o($),color:"#ffffff"}),disabled:o(d)>0||o(g),onClick:q},{default:M(()=>[o(g)?(P(),ue(o(La),{key:0,class:"h-4 w-4 animate-spin"})):(P(),ue(o(Ir),{key:1,class:"h-4 w-4"})),D(" "+U(o(L)),1)]),_:1},8,["style","disabled"])])]),_:1},8,["style"]),(P(),ue(Ar,{to:"body"},[x(it,{"enter-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:M(()=>[o(h)?(P(),I("div",{key:0,class:"pointer-events-none fixed inset-0 z-[130] animate-[state2_2_team_flash_430ms_ease-out_forwards]",style:ot({backgroundColor:o($)})},null,4)):pe("",!0)]),_:1})]))],64))}}),Mu=Object.assign(jr(Pu,[["__scopeId","data-v-2308a912"]]),{__name:"Event[slug]BlocksState22GameIdentity"}),Eu={class:"flex items-center justify-between gap-3"},Ru={class:"mt-1 text-base font-semibold text-foreground"},Au={class:"mt-4 space-y-2"},Ou={class:"flex min-w-0 items-center gap-2"},ju={class:"w-7 text-xs font-bold tabular-nums text-foreground"},Uu={class:"truncate text-sm font-semibold text-foreground"},Iu={class:"space-y-3"},Du={class:"flex items-center justify-between gap-3"},Lu={class:"max-h-[56vh] space-y-2 overflow-y-auto pr-1"},Bu={class:"flex min-w-0 items-center gap-2"},Fu={class:"w-7 text-xs font-bold tabular-nums text-foreground"},Nu={class:"min-w-0"},Vu={class:"truncate text-sm font-semibold text-foreground"},qu={class:"text-[11px] text-muted-foreground"},Wu=ce({__name:"LocalLeaderboard",props:{rows:{default:()=>[]}},setup(e){const n=e,a=Q(!1),l=w(()=>[{rank:1,user_id:1,username:"max",full_name:"Max Volt",avatar_url:"",level:7,exp:1420,rank_delta:1,league_name:"Gold",is_highlighted:!1},{rank:2,user_id:2,username:"lina",full_name:"Lina V",avatar_url:"",level:6,exp:1310,rank_delta:-1,league_name:"Gold",is_highlighted:!1},{rank:3,user_id:3,username:"oleg",full_name:"Oleg Ray",avatar_url:"",level:6,exp:1270,rank_delta:2,league_name:"Silver",is_highlighted:!1},{rank:4,user_id:99,username:"you",full_name:"Ğ¢Ñ‹",avatar_url:"",level:5,exp:1160,rank_delta:0,league_name:"Silver",is_highlighted:!0},{rank:5,user_id:4,username:"mira",full_name:"Mira Flux",avatar_url:"",level:5,exp:1090,rank_delta:1,league_name:"Silver",is_highlighted:!1}]),c=w(()=>{const v=Array.isArray(n.rows)?n.rows:[];return v.length?v:l.value}),m=w(()=>c.value.find(v=>v.is_highlighted)??null),f=w(()=>{const v=c.value.slice(0,3);return!m.value||m.value.rank<=3?v:[...v,m.value]}),h=w(()=>m.value?`Ğ¢Ñ‹ Ğ½Ğ° #${m.value.rank}`:"Ğ¢Ğ²Ğ¾Ğµ Ğ¼ĞµÑÑ‚Ğ¾ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ÑÑ..."),d=v=>v.full_name?.trim()||v.username||"User",g=v=>d(v).split(/\s+/).slice(0,2).map(k=>k[0]?.toUpperCase()||"").join("")||"U",_=v=>v===1?"border-amber-400/50 bg-amber-500/10":v===2?"border-slate-400/50 bg-slate-500/10":v===3?"border-orange-400/50 bg-orange-500/10":"border-border bg-card";return(v,k)=>(P(),I(be,null,[x(o(Ee),{class:"rounded-3xl border border-border p-4 sm:p-5"},{default:M(()=>[u("div",Eu,[u("div",null,[k[2]||(k[2]=u("p",{class:"text-[11px] font-semibold uppercase tracking-[0.2em] text-muted-foreground"},"Local Leaderboard",-1)),u("h3",Ru,U(o(h)),1)]),x(o(oe),{variant:"outline",size:"sm",class:"gap-2",onClick:k[0]||(k[0]=$=>a.value=!0)},{default:M(()=>[k[3]||(k[3]=D(" Expand ",-1)),x(o(Io),{class:"h-4 w-4"})]),_:1})]),u("div",Au,[(P(!0),I(be,null,Re(o(f),$=>(P(),I("div",{key:`${$.user_id}-${$.rank}`,class:Ze(["flex items-center justify-between rounded-2xl border px-3 py-2",_($.rank)])},[u("div",Ou,[u("div",ju,"#"+U($.rank),1),x(o(We),{class:"h-8 w-8 border border-border"},{default:M(()=>[x(o(ze),{src:$.avatar_url||"",alt:d($)},null,8,["src","alt"]),x(o(He),{class:"bg-primary/10 text-[11px] font-semibold text-primary"},{default:M(()=>[D(U(g($)),1)]),_:2},1024)]),_:2},1024),u("p",Uu,U(d($)),1)]),x(o(qe),{variant:"secondary"},{default:M(()=>[D(U($.exp)+" XP",1)]),_:2},1024)],2))),128))])]),_:1}),x(o(ar),{modelValue:o(a),"onUpdate:modelValue":k[1]||(k[1]=$=>lt(a)?a.value=$:null),class:"max-w-xl rounded-3xl p-4 sm:p-5"},{default:M(({close:$})=>[u("div",Iu,[u("div",Du,[k[4]||(k[4]=u("h4",{class:"text-base font-semibold text-foreground"},"Full Ranking",-1)),x(o(oe),{variant:"ghost",size:"icon",class:"h-8 w-8 rounded-full",onClick:$},{default:M(()=>[x(o(Fa),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",Lu,[(P(!0),I(be,null,Re(o(c),y=>(P(),I("div",{key:`full-${y.user_id}-${y.rank}`,class:Ze(["flex items-center justify-between rounded-2xl border px-3 py-2",[_(y.rank),y.is_highlighted?"ring-1 ring-primary/40":""]])},[u("div",Bu,[u("div",Fu,"#"+U(y.rank),1),x(o(We),{class:"h-8 w-8 border border-border"},{default:M(()=>[x(o(ze),{src:y.avatar_url||"",alt:d(y)},null,8,["src","alt"]),x(o(He),{class:"bg-primary/10 text-[11px] font-semibold text-primary"},{default:M(()=>[D(U(g(y)),1)]),_:2},1024)]),_:2},1024),u("div",Nu,[u("p",Vu,U(d(y)),1),u("p",qu,[x(o(Do),{class:"mr-1 inline h-3.5 w-3.5 align-[-2px]"}),D(" "+U(y.league_name),1)])])]),x(o(qe),{variant:"secondary"},{default:M(()=>[D(U(y.exp)+" XP",1)]),_:2},1024)],2))),128))]),x(o(oe),{variant:"outline",class:"w-full",onClick:$},{default:M(()=>[...k[5]||(k[5]=[D("Close",-1)])]),_:1},8,["onClick"])])]),_:1},8,["modelValue"])],64))}}),zu=Object.assign(Wu,{__name:"Event[slug]BlocksState22LocalLeaderboard"}),Hu={class:"flex items-center justify-between gap-3"},Gu={class:"mt-4 grid grid-cols-4 gap-2 sm:grid-cols-5 lg:grid-cols-6"},Qu=["disabled","onClick"],Yu={class:"mt-1 truncate text-[11px] font-medium text-foreground"},Ju=ce({__name:"ParticipantsSheet",props:{slug:{default:""},participants:{default:()=>[]},fallbackWaveTargetUuid:{default:""},maxVisible:{default:12}},setup(e){const n=e,a=Xe(),l=Ge(),c=Q(!1),m=Q(new Set),f=[{id:1,username:"max",avatar_url:"",uuid:"b7c60751-6d3f-42c2-a83a-7f87d7b196f6"},{id:2,username:"lina",avatar_url:"",uuid:"f4b9bf9f-6d67-4782-b89e-2f4c452ae57a"},{id:3,username:"mira",avatar_url:"",uuid:"8df71965-4c65-49f2-8a9e-c7531e9d9adb"},{id:4,username:"oleg",avatar_url:""},{id:5,username:"teo",avatar_url:""},{id:6,username:"nika",avatar_url:""},{id:7,username:"roma",avatar_url:""},{id:8,username:"aria",avatar_url:""}],h=L=>{const z=L;return typeof z.uuid=="string"?z.uuid.trim():""},d=w(()=>n.participants.length?n.participants.map(L=>({...L,uuid:h(L)||void 0})):f),g=w(()=>c.value?d.value.length:Math.min(Math.max(1,Math.floor(n.maxVisible)),d.value.length)),_=w(()=>d.value.slice(0,g.value)),v=w(()=>Math.max(0,d.value.length-g.value)),k=L=>L.split(/\s+/).slice(0,2).map(z=>z[0]?.toUpperCase()||"").join("")||"U",$=L=>`${L.id}-${L.username}`,y=L=>m.value.has($(L)),R=async L=>{const z=$(L);if(m.value.has(z))return;const K=L.uuid||n.fallbackWaveTargetUuid.trim(),B=n.slug.trim().length>0&&K.length>0;m.value=new Set([...m.value,z]);let S=!1;try{if(B)try{await a.apiFetch(`/api/v1/events/${encodeURIComponent(n.slug)}/wave/${encodeURIComponent(K)}`,{method:"POST",baseURL:Ie("/api/v1/events")}),S=!0}catch{S=!1}l.push({level:S?"success":"info",title:"Wave",message:S?`Ğ¡Ğ¸Ğ³Ğ½Ğ°Ğ» Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ ${L.username}.`:`Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑĞ¸Ğ³Ğ½Ğ°Ğ»: ${L.username}. Ğ”Ğ»Ñ API Ğ½ÑƒĞ¶ĞµĞ½ target uuid.`})}finally{const O=new Set(m.value);O.delete(z),m.value=O}};return(L,z)=>(P(),ue(o(Ee),{class:"rounded-3xl border border-border p-4 sm:p-5"},{default:M(()=>[u("div",Hu,[z[1]||(z[1]=u("div",null,[u("p",{class:"text-[11px] font-semibold uppercase tracking-[0.2em] text-muted-foreground"},"Inside List"),u("h3",{class:"mt-1 text-base font-semibold text-foreground"},"Ğ£Ñ‡Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ¸ Ğ½Ğ° Ğ¿Ğ»Ğ¾Ñ‰Ğ°Ğ´ĞºĞµ")],-1)),x(o(qe),{variant:"secondary"},{default:M(()=>[D(U(o(d).length),1)]),_:1})]),u("div",Gu,[(P(!0),I(be,null,Re(o(_),K=>(P(),I("div",{key:$(K),class:"group relative rounded-2xl border border-border bg-card p-2 text-center"},[u("button",{type:"button",class:"absolute right-1 top-1 z-10 inline-flex h-6 w-6 items-center justify-center rounded-full border border-border bg-background text-foreground transition hover:bg-primary hover:text-primary-foreground",disabled:y(K),onClick:B=>R(K)},[x(o(Ir),{class:"h-3.5 w-3.5"})],8,Qu),x(o(We),{class:"mx-auto h-12 w-12 border border-border"},{default:M(()=>[x(o(ze),{src:K.avatar_url||"",alt:K.username},null,8,["src","alt"]),x(o(He),{class:"bg-primary/10 text-xs font-semibold text-primary"},{default:M(()=>[D(U(k(K.username)),1)]),_:2},1024)]),_:2},1024),u("p",Yu,U(K.username),1)]))),128))]),o(v)>0||o(c)?(P(),ue(o(oe),{key:0,variant:"outline",class:"mt-4 w-full",onClick:z[0]||(z[0]=K=>c.value=!o(c))},{default:M(()=>[D(U(o(c)?"Ğ¡Ğ²ĞµÑ€Ğ½ÑƒÑ‚ÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº":`ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ ĞµÑ‰Ğµ ${o(v)}`),1)]),_:1})):pe("",!0)]),_:1}))}}),Ku=Object.assign(Ju,{__name:"Event[slug]BlocksState22ParticipantsSheet"});var Na=(e,n,a)=>{if(!n.has(e))throw TypeError("Cannot "+a)},ya=(e,n,a)=>(Na(e,n,"read from private field"),a?a.call(e):n.get(e)),Zu=(e,n,a)=>{if(n.has(e))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(e):n.set(e,a)},Xu=(e,n,a,l)=>(Na(e,n,"write to private field"),n.set(e,a),a);const Va=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"]],ec=[...Va,["unknown"]].map(e=>e[0]),er=new Map(Va);function tc(e){for(const[n,a]of er)if(e===a)return n;return"unknown"}function rc(e){if(qa(e))return{width:e.naturalWidth,height:e.naturalHeight};if(Wa(e))return{width:e.width.baseVal.value,height:e.height.baseVal.value};if(za(e))return{width:e.videoWidth,height:e.videoHeight};if(Ga(e))return{width:e.width,height:e.height};if(Ya(e))return{width:e.displayWidth,height:e.displayHeight};if(Ha(e))return{width:e.width,height:e.height};if(Qa(e))return{width:e.width,height:e.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function qa(e){try{return e instanceof HTMLImageElement}catch{return!1}}function Wa(e){try{return e instanceof SVGImageElement}catch{return!1}}function za(e){try{return e instanceof HTMLVideoElement}catch{return!1}}function Ha(e){try{return e instanceof HTMLCanvasElement}catch{return!1}}function Ga(e){try{return e instanceof ImageBitmap}catch{return!1}}function Qa(e){try{return e instanceof OffscreenCanvas}catch{return!1}}function Ya(e){try{return e instanceof VideoFrame}catch{return!1}}function Ja(e){try{return e instanceof Blob}catch{return!1}}function ac(e){try{return e instanceof ImageData}catch{return!1}}function nc(e,n){try{const a=new OffscreenCanvas(e,n);if(a.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return a;throw void 0}catch{const l=document.createElement("canvas");return l.width=e,l.height=n,l}}async function Ka(e){if(qa(e)&&!await lc(e))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(Wa(e)&&!await uc(e))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(Ya(e)&&cc(e))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(za(e)&&(e.readyState===0||e.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(Ga(e)&&fc(e))throw new DOMException("The image source is detached.","InvalidStateError");const{width:n,height:a}=rc(e);if(n===0||a===0)return null;const l=nc(n,a).getContext("2d");l.drawImage(e,0,0);try{return l.getImageData(0,0,n,a)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function sc(e){let n;try{if(globalThis.createImageBitmap)n=await createImageBitmap(e);else if(globalThis.Image){n=new Image;let a="";try{a=URL.createObjectURL(e),n.src=a,await n.decode()}finally{URL.revokeObjectURL(a)}}else return e}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}return await Ka(n)}function oc(e){const{width:n,height:a}=e;if(n===0||a===0)return null;const l=e.getContext("2d");try{return l.getImageData(0,0,n,a)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function ic(e){if(Ja(e))return await sc(e);if(ac(e)){if(dc(e))throw new DOMException("The image data has been detached.","InvalidStateError");return e}return Ha(e)||Qa(e)?oc(e):await Ka(e)}async function lc(e){try{return await e.decode(),!0}catch{return!1}}async function uc(e){var n;try{return await((n=e.decode)==null?void 0:n.call(e)),!0}catch{return!1}}function cc(e){return e.format===null}function dc(e){return e.data.buffer.byteLength===0}function fc(e){return e.width===0&&e.height===0}function wa(e,n){return e instanceof DOMException?new DOMException(`${n}: ${e.message}`,e.name):e instanceof Error?new e.constructor(`${n}: ${e.message}`):new Error(`${n}: ${e}`)}const xa=["Aztec","Codabar","Code128","Code39","Code93","DataBar","DataBarExpanded","DataMatrix","DXFilmEdge","EAN-13","EAN-8","ITF","Linear-Codes","Matrix-Codes","MaxiCode","MicroQRCode","None","PDF417","QRCode","rMQRCode","UPC-A","UPC-E"];function mc(e){return e.join("|")}function pc(e){const n=_a(e);let a=0,l=xa.length-1;for(;a<=l;){const c=Math.floor((a+l)/2),m=xa[c],f=_a(m);if(f===n)return m;f<n?a=c+1:l=c-1}return"None"}function _a(e){return e.toLowerCase().replace(/_-\[\]/g,"")}function vc(e,n){return e.Binarizer[n]}function hc(e,n){return e.CharacterSet[n]}const gc=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function bc(e){return gc[e.value]}function yc(e,n){return e.EanAddOnSymbol[n]}function wc(e,n){return e.TextMode[n]}const Tt={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!1,validateCode39CheckSum:!1,validateITFCheckSum:!1,returnCodabarStartEnd:!1,returnErrors:!1,eanAddOnSymbol:"Read",textMode:"Plain",characterSet:"Unknown"};function Za(e,n){return{...n,formats:mc(n.formats),binarizer:vc(e,n.binarizer),eanAddOnSymbol:yc(e,n.eanAddOnSymbol),textMode:wc(e,n.textMode),characterSet:hc(e,n.characterSet)}}function Xa(e){return{...e,format:pc(e.format),eccLevel:e.eccLevel,contentType:bc(e.contentType)}}const xc={locateFile:(e,n)=>{const a=e.match(/_(.+?)\.wasm$/);return a?`https://fastly.jsdelivr.net/npm/zxing-wasm@1.1.3/dist/${a[1]}/${e}`:n+e}};let ka=new WeakMap;function Lr(e,n){var a;const l=ka.get(e);if(l!=null&&l.modulePromise&&n===void 0)return l.modulePromise;const c=(a=l?.moduleOverrides)!=null?a:xc,m=e({...c});return ka.set(e,{moduleOverrides:c,modulePromise:m}),m}async function _c(e,n,a=Tt){const l={...Tt,...a},c=await Lr(e),{size:m}=n,f=new Uint8Array(await n.arrayBuffer()),h=c._malloc(m);c.HEAPU8.set(f,h);const d=c.readBarcodesFromImage(h,m,Za(c,l));c._free(h);const g=[];for(let _=0;_<d.size();++_)g.push(Xa(d.get(_)));return g}async function kc(e,n,a=Tt){const l={...Tt,...a},c=await Lr(e),{data:m,width:f,height:h,data:{byteLength:d}}=n,g=c._malloc(d);c.HEAPU8.set(m,g);const _=c.readBarcodesFromPixmap(g,f,h,Za(c,l));c._free(g);const v=[];for(let k=0;k<_.size();++k)v.push(Xa(_.get(k)));return v}({...Tt,formats:[...Tt.formats]});var Br=(()=>{var e=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(n={}){var a=n,l,c;a.ready=new Promise((t,r)=>{l=t,c=r});var m=Object.assign({},a),f="./this.program",h=typeof window=="object",d=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var g="";function _(t){return a.locateFile?a.locateFile(t,g):g+t}var v;(h||d)&&(d?g=self.location.href:typeof document<"u"&&document.currentScript&&(g=document.currentScript.src),e&&(g=e),g.indexOf("blob:")!==0?g=g.substr(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1):g="",d&&(v=t=>{var r=new XMLHttpRequest;return r.open("GET",t,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)})),a.print||console.log.bind(console);var k=a.printErr||console.error.bind(console);Object.assign(a,m),m=null,a.arguments&&a.arguments,a.thisProgram&&(f=a.thisProgram),a.quit&&a.quit;var $;a.wasmBinary&&($=a.wasmBinary),typeof WebAssembly!="object"&&Pe("no native wasm support detected");var y,R=!1,L,z,K,B,S,O,q,F;function re(){var t=y.buffer;a.HEAP8=L=new Int8Array(t),a.HEAP16=K=new Int16Array(t),a.HEAPU8=z=new Uint8Array(t),a.HEAPU16=B=new Uint16Array(t),a.HEAP32=S=new Int32Array(t),a.HEAPU32=O=new Uint32Array(t),a.HEAPF32=q=new Float32Array(t),a.HEAPF64=F=new Float64Array(t)}var ee=[],H=[],ve=[];function je(){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;)G(a.preRun.shift());Pt(ee)}function de(){Pt(H)}function se(){if(a.postRun)for(typeof a.postRun=="function"&&(a.postRun=[a.postRun]);a.postRun.length;)ie(a.postRun.shift());Pt(ve)}function G(t){ee.unshift(t)}function Z(t){H.unshift(t)}function ie(t){ve.unshift(t)}var W=0,ae=null;function he(t){var r;W++,(r=a.monitorRunDependencies)===null||r===void 0||r.call(a,W)}function ge(t){var r;if(W--,(r=a.monitorRunDependencies)===null||r===void 0||r.call(a,W),W==0&&ae){var s=ae;ae=null,s()}}function Pe(t){var r;(r=a.onAbort)===null||r===void 0||r.call(a,t),t="Aborted("+t+")",k(t),R=!0,t+=". Build with -sASSERTIONS for more info.";var s=new WebAssembly.RuntimeError(t);throw c(s),s}var dt="data:application/octet-stream;base64,",at=t=>t.startsWith(dt),Be;Be="zxing_reader.wasm",at(Be)||(Be=_(Be));function nt(t){if(t==Be&&$)return new Uint8Array($);if(v)return v(t);throw"both async and sync fetching of the wasm failed"}function gt(t){return!$&&(h||d)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw"failed to load wasm binary file at '"+t+"'";return r.arrayBuffer()}).catch(()=>nt(t)):Promise.resolve().then(()=>nt(t))}function bt(t,r,s){return gt(t).then(i=>WebAssembly.instantiate(i,r)).then(i=>i).then(s,i=>{k(`failed to asynchronously prepare wasm: ${i}`),Pe(i)})}function yt(t,r,s,i){return!t&&typeof WebAssembly.instantiateStreaming=="function"&&!at(r)&&typeof fetch=="function"?fetch(r,{credentials:"same-origin"}).then(p=>{var b=WebAssembly.instantiateStreaming(p,s);return b.then(i,function(C){return k(`wasm streaming compile failed: ${C}`),k("falling back to ArrayBuffer instantiation"),bt(r,s,i)})}):bt(r,s,i)}function lr(){var t={a:Ks};function r(i,p){return Se=i.exports,y=Se.ia,re(),Yr=Se.ma,Z(Se.ja),ge(),Se}he();function s(i){r(i.instance)}if(a.instantiateWasm)try{return a.instantiateWasm(t,r)}catch(i){k(`Module.instantiateWasm callback failed with error: ${i}`),c(i)}return yt($,Be,t,s).catch(c),{}}var Pt=t=>{for(;t.length>0;)t.shift()(a)};a.noExitRuntime;var wt=[],xt=0,ur=t=>{var r=new J(t);return r.get_caught()||(r.set_caught(!0),xt--),r.set_rethrown(!1),wt.push(r),ua(r.excPtr),r.get_exception_ptr()},Ne=0,N=()=>{ye(0,0);var t=wt.pop();la(t.excPtr),Ne=0};function J(t){this.excPtr=t,this.ptr=t-24,this.set_type=function(r){O[this.ptr+4>>2]=r},this.get_type=function(){return O[this.ptr+4>>2]},this.set_destructor=function(r){O[this.ptr+8>>2]=r},this.get_destructor=function(){return O[this.ptr+8>>2]},this.set_caught=function(r){r=r?1:0,L[this.ptr+12>>0]=r},this.get_caught=function(){return L[this.ptr+12>>0]!=0},this.set_rethrown=function(r){r=r?1:0,L[this.ptr+13>>0]=r},this.get_rethrown=function(){return L[this.ptr+13>>0]!=0},this.init=function(r,s){this.set_adjusted_ptr(0),this.set_type(r),this.set_destructor(s)},this.set_adjusted_ptr=function(r){O[this.ptr+16>>2]=r},this.get_adjusted_ptr=function(){return O[this.ptr+16>>2]},this.get_exception_ptr=function(){var r=da(this.get_type());if(r)return O[this.excPtr>>2];var s=this.get_adjusted_ptr();return s!==0?s:this.excPtr}}var fe=t=>{throw Ne||(Ne=t),Ne},Le=t=>{var r=Ne;if(!r)return Ut(0),0;var s=new J(r);s.set_adjusted_ptr(r);var i=s.get_type();if(!i)return Ut(0),r;for(var p in t){var b=t[p];if(b===0||b===i)break;var C=s.ptr+16;if(ca(b,i,C))return Ut(b),r}return Ut(i),r},Qe=()=>Le([]),ft=t=>Le([t]),hn=(t,r)=>Le([t,r]),gn=()=>{var t=wt.pop();t||Pe("no exception to throw");var r=t.excPtr;throw t.get_rethrown()||(wt.push(t),t.set_rethrown(!0),t.set_caught(!1),xt++),Ne=r,Ne},bn=(t,r,s)=>{var i=new J(t);throw i.init(r,s),Ne=t,xt++,Ne},yn=()=>xt,Ft={},cr=t=>{for(;t.length;){var r=t.pop(),s=t.pop();s(r)}};function dr(t){return this.fromWireType(S[t>>2])}var _t={},mt={},Nt={},Fr,Vt=t=>{throw new Fr(t)},pt=(t,r,s)=>{t.forEach(function(T){Nt[T]=r});function i(T){var E=s(T);E.length!==t.length&&Vt("Mismatched type converter count");for(var j=0;j<t.length;++j)Ye(t[j],E[j])}var p=new Array(r.length),b=[],C=0;r.forEach((T,E)=>{mt.hasOwnProperty(T)?p[E]=mt[T]:(b.push(T),_t.hasOwnProperty(T)||(_t[T]=[]),_t[T].push(()=>{p[E]=mt[T],++C,C===b.length&&i(p)}))}),b.length===0&&i(p)},wn=t=>{var r=Ft[t];delete Ft[t];var s=r.rawConstructor,i=r.rawDestructor,p=r.fields,b=p.map(C=>C.getterReturnType).concat(p.map(C=>C.setterArgumentType));pt([t],b,C=>{var T={};return p.forEach((E,j)=>{var V=E.fieldName,X=C[j],te=E.getter,ne=E.getterContext,we=C[j+p.length],$e=E.setter,me=E.setterContext;T[V]={read:Oe=>X.fromWireType(te(ne,Oe)),write:(Oe,A)=>{var Y=[];$e(me,Oe,we.toWireType(Y,A)),cr(Y)}}}),[{name:r.name,fromWireType:E=>{var j={};for(var V in T)j[V]=T[V].read(E);return i(E),j},toWireType:(E,j)=>{for(var V in T)if(!(V in j))throw new TypeError(`Missing field: "${V}"`);var X=s();for(V in T)T[V].write(X,j[V]);return E!==null&&E.push(i,X),X},argPackAdvance:Je,readValueFromPointer:dr,destructorFunction:i}]})},xn=(t,r,s,i,p)=>{},_n=()=>{for(var t=new Array(256),r=0;r<256;++r)t[r]=String.fromCharCode(r);Nr=t},Nr,Ae=t=>{for(var r="",s=t;z[s];)r+=Nr[z[s++]];return r},kt,le=t=>{throw new kt(t)};function kn(t,r){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i=r.name;if(t||le(`type "${i}" must have a positive integer typeid pointer`),mt.hasOwnProperty(t)){if(s.ignoreDuplicateRegistrations)return;le(`Cannot register type '${i}' twice`)}if(mt[t]=r,delete Nt[t],_t.hasOwnProperty(t)){var p=_t[t];delete _t[t],p.forEach(b=>b())}}function Ye(t,r){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!("argPackAdvance"in r))throw new TypeError("registerType registeredInstance requires argPackAdvance");return kn(t,r,s)}var Je=8,$n=(t,r,s,i)=>{r=Ae(r),Ye(t,{name:r,fromWireType:function(p){return!!p},toWireType:function(p,b){return b?s:i},argPackAdvance:Je,readValueFromPointer:function(p){return this.fromWireType(z[p])},destructorFunction:null})},Cn=t=>({count:t.count,deleteScheduled:t.deleteScheduled,preservePointerOnDelete:t.preservePointerOnDelete,ptr:t.ptr,ptrType:t.ptrType,smartPtr:t.smartPtr,smartPtrType:t.smartPtrType}),fr=t=>{function r(s){return s.$$.ptrType.registeredClass.name}le(r(t)+" instance already deleted")},mr=!1,Vr=t=>{},Sn=t=>{t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)},qr=t=>{t.count.value-=1;var r=t.count.value===0;r&&Sn(t)},Wr=(t,r,s)=>{if(r===s)return t;if(s.baseClass===void 0)return null;var i=Wr(t,r,s.baseClass);return i===null?null:s.downcast(i)},zr={},Tn=()=>Object.keys(Rt).length,Pn=()=>{var t=[];for(var r in Rt)Rt.hasOwnProperty(r)&&t.push(Rt[r]);return t},Mt=[],pr=()=>{for(;Mt.length;){var t=Mt.pop();t.$$.deleteScheduled=!1,t.delete()}},Et,Mn=t=>{Et=t,Mt.length&&Et&&Et(pr)},En=()=>{a.getInheritedInstanceCount=Tn,a.getLiveInheritedInstances=Pn,a.flushPendingDeletes=pr,a.setDelayFunction=Mn},Rt={},Rn=(t,r)=>{for(r===void 0&&le("ptr should not be undefined");t.baseClass;)r=t.upcast(r),t=t.baseClass;return r},An=(t,r)=>(r=Rn(t,r),Rt[r]),qt=(t,r)=>{(!r.ptrType||!r.ptr)&&Vt("makeClassHandle requires ptr and ptrType");var s=!!r.smartPtrType,i=!!r.smartPtr;return s!==i&&Vt("Both smartPtrType and smartPtr must be specified"),r.count={value:1},At(Object.create(t,{$$:{value:r,writable:!0}}))};function On(t){var r=this.getPointee(t);if(!r)return this.destructor(t),null;var s=An(this.registeredClass,r);if(s!==void 0){if(s.$$.count.value===0)return s.$$.ptr=r,s.$$.smartPtr=t,s.clone();var i=s.clone();return this.destructor(t),i}function p(){return this.isSmartPointer?qt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:r,smartPtrType:this,smartPtr:t}):qt(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var b=this.registeredClass.getActualType(r),C=zr[b];if(!C)return p.call(this);var T;this.isConst?T=C.constPointerType:T=C.pointerType;var E=Wr(r,this.registeredClass,T.registeredClass);return E===null?p.call(this):this.isSmartPointer?qt(T.registeredClass.instancePrototype,{ptrType:T,ptr:E,smartPtrType:this,smartPtr:t}):qt(T.registeredClass.instancePrototype,{ptrType:T,ptr:E})}var At=t=>typeof FinalizationRegistry>"u"?(At=r=>r,t):(mr=new FinalizationRegistry(r=>{qr(r.$$)}),At=r=>{var s=r.$$,i=!!s.smartPtr;if(i){var p={$$:s};mr.register(r,p,r)}return r},Vr=r=>mr.unregister(r),At(t)),jn=()=>{Object.assign(Wt.prototype,{isAliasOf(t){if(!(this instanceof Wt)||!(t instanceof Wt))return!1;var r=this.$$.ptrType.registeredClass,s=this.$$.ptr;t.$$=t.$$;for(var i=t.$$.ptrType.registeredClass,p=t.$$.ptr;r.baseClass;)s=r.upcast(s),r=r.baseClass;for(;i.baseClass;)p=i.upcast(p),i=i.baseClass;return r===i&&s===p},clone(){if(this.$$.ptr||fr(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var t=At(Object.create(Object.getPrototypeOf(this),{$$:{value:Cn(this.$$)}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t},delete(){this.$$.ptr||fr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&le("Object already scheduled for deletion"),Vr(this),qr(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||fr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&le("Object already scheduled for deletion"),Mt.push(this),Mt.length===1&&Et&&Et(pr),this.$$.deleteScheduled=!0,this}})};function Wt(){}var Ot=(t,r)=>Object.defineProperty(r,"name",{value:t}),Hr=(t,r,s)=>{if(t[r].overloadTable===void 0){var i=t[r];t[r]=function(){return t[r].overloadTable.hasOwnProperty(arguments.length)||le(`Function '${s}' called with an invalid number of arguments (${arguments.length}) - expects one of (${t[r].overloadTable})!`),t[r].overloadTable[arguments.length].apply(this,arguments)},t[r].overloadTable=[],t[r].overloadTable[i.argCount]=i}},vr=(t,r,s)=>{a.hasOwnProperty(t)?((s===void 0||a[t].overloadTable!==void 0&&a[t].overloadTable[s]!==void 0)&&le(`Cannot register public name '${t}' twice`),Hr(a,t,t),a.hasOwnProperty(s)&&le(`Cannot register multiple overloads of a function with the same number of arguments (${s})!`),a[t].overloadTable[s]=r):(a[t]=r,s!==void 0&&(a[t].numArguments=s))},Un=48,In=57,Dn=t=>{if(t===void 0)return"_unknown";t=t.replace(/[^a-zA-Z0-9_]/g,"$");var r=t.charCodeAt(0);return r>=Un&&r<=In?`_${t}`:t};function Ln(t,r,s,i,p,b,C,T){this.name=t,this.constructor=r,this.instancePrototype=s,this.rawDestructor=i,this.baseClass=p,this.getActualType=b,this.upcast=C,this.downcast=T,this.pureVirtualFunctions=[]}var hr=(t,r,s)=>{for(;r!==s;)r.upcast||le(`Expected null or instance of ${s.name}, got an instance of ${r.name}`),t=r.upcast(t),r=r.baseClass;return t};function Bn(t,r){if(r===null)return this.isReference&&le(`null is not a valid ${this.name}`),0;r.$$||le(`Cannot pass "${xr(r)}" as a ${this.name}`),r.$$.ptr||le(`Cannot pass deleted object as a pointer of type ${this.name}`);var s=r.$$.ptrType.registeredClass,i=hr(r.$$.ptr,s,this.registeredClass);return i}function Fn(t,r){var s;if(r===null)return this.isReference&&le(`null is not a valid ${this.name}`),this.isSmartPointer?(s=this.rawConstructor(),t!==null&&t.push(this.rawDestructor,s),s):0;(!r||!r.$$)&&le(`Cannot pass "${xr(r)}" as a ${this.name}`),r.$$.ptr||le(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&r.$$.ptrType.isConst&&le(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);var i=r.$$.ptrType.registeredClass;if(s=hr(r.$$.ptr,i,this.registeredClass),this.isSmartPointer)switch(r.$$.smartPtr===void 0&&le("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:r.$$.smartPtrType===this?s=r.$$.smartPtr:le(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:s=r.$$.smartPtr;break;case 2:if(r.$$.smartPtrType===this)s=r.$$.smartPtr;else{var p=r.clone();s=this.rawShare(s,tt.toHandle(()=>p.delete())),t!==null&&t.push(this.rawDestructor,s)}break;default:le("Unsupporting sharing policy")}return s}function Nn(t,r){if(r===null)return this.isReference&&le(`null is not a valid ${this.name}`),0;r.$$||le(`Cannot pass "${xr(r)}" as a ${this.name}`),r.$$.ptr||le(`Cannot pass deleted object as a pointer of type ${this.name}`),r.$$.ptrType.isConst&&le(`Cannot convert argument of type ${r.$$.ptrType.name} to parameter type ${this.name}`);var s=r.$$.ptrType.registeredClass,i=hr(r.$$.ptr,s,this.registeredClass);return i}function Gr(t){return this.fromWireType(O[t>>2])}var Vn=()=>{Object.assign(zt.prototype,{getPointee(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t},destructor(t){var r;(r=this.rawDestructor)===null||r===void 0||r.call(this,t)},argPackAdvance:Je,readValueFromPointer:Gr,deleteObject(t){t!==null&&t.delete()},fromWireType:On})};function zt(t,r,s,i,p,b,C,T,E,j,V){this.name=t,this.registeredClass=r,this.isReference=s,this.isConst=i,this.isSmartPointer=p,this.pointeeType=b,this.sharingPolicy=C,this.rawGetPointee=T,this.rawConstructor=E,this.rawShare=j,this.rawDestructor=V,!p&&r.baseClass===void 0?i?(this.toWireType=Bn,this.destructorFunction=null):(this.toWireType=Nn,this.destructorFunction=null):this.toWireType=Fn}var Qr=(t,r,s)=>{a.hasOwnProperty(t)||Vt("Replacing nonexistant public symbol"),a[t].overloadTable!==void 0&&s!==void 0?a[t].overloadTable[s]=r:(a[t]=r,a[t].argCount=s)},qn=(t,r,s)=>{var i=a["dynCall_"+t];return s&&s.length?i.apply(null,[r].concat(s)):i.call(null,r)},Ht=[],Yr,xe=t=>{var r=Ht[t];return r||(t>=Ht.length&&(Ht.length=t+1),Ht[t]=r=Yr.get(t)),r},Wn=(t,r,s)=>{if(t.includes("j"))return qn(t,r,s);var i=xe(r).apply(null,s);return i},zn=(t,r)=>{var s=[];return function(){return s.length=0,Object.assign(s,arguments),Wn(t,r,s)}},Ve=(t,r)=>{t=Ae(t);function s(){return t.includes("j")?zn(t,r):xe(r)}var i=s();return typeof i!="function"&&le(`unknown function pointer with signature ${t}: ${r}`),i},Hn=(t,r)=>{var s=Ot(r,function(i){this.name=r,this.message=i;var p=new Error(i).stack;p!==void 0&&(this.stack=this.toString()+`
`+p.replace(/^Error(:[^\n]*)?\n/,""))});return s.prototype=Object.create(t.prototype),s.prototype.constructor=s,s.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},s},Jr,Kr=t=>{var r=ia(t),s=Ae(r);return rt(r),s},Gt=(t,r)=>{var s=[],i={};function p(b){if(!i[b]&&!mt[b]){if(Nt[b]){Nt[b].forEach(p);return}s.push(b),i[b]=!0}}throw r.forEach(p),new Jr(`${t}: `+s.map(Kr).join([", "]))},Gn=(t,r,s,i,p,b,C,T,E,j,V,X,te)=>{V=Ae(V),b=Ve(p,b),T&&(T=Ve(C,T)),j&&(j=Ve(E,j)),te=Ve(X,te);var ne=Dn(V);vr(ne,function(){Gt(`Cannot construct ${V} due to unbound types`,[i])}),pt([t,r,s],i?[i]:[],function(we){we=we[0];var $e,me;i?($e=we.registeredClass,me=$e.instancePrototype):me=Wt.prototype;var Oe=Ot(V,function(){if(Object.getPrototypeOf(this)!==A)throw new kt("Use 'new' to construct "+V);if(Y.constructor_body===void 0)throw new kt(V+" has no accessible constructor");var va=Y.constructor_body[arguments.length];if(va===void 0)throw new kt(`Tried to invoke ctor of ${V} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(Y.constructor_body).toString()}) parameters instead!`);return va.apply(this,arguments)}),A=Object.create(me,{constructor:{value:Oe}});Oe.prototype=A;var Y=new Ln(V,Oe,A,te,$e,b,T,j);if(Y.baseClass){var Ce,Me;(Me=(Ce=Y.baseClass).__derivedClasses)!==null&&Me!==void 0||(Ce.__derivedClasses=[]),Y.baseClass.__derivedClasses.push(Y)}var $t=new zt(V,Y,!0,!1,!1),Jt=new zt(V+"*",Y,!1,!1,!1),pa=new zt(V+" const*",Y,!1,!0,!1);return zr[t]={pointerType:Jt,constPointerType:pa},Qr(ne,Oe),[$t,Jt,pa]})},gr=(t,r)=>{for(var s=[],i=0;i<t;i++)s.push(O[r+i*4>>2]);return s};function Qn(t){for(var r=1;r<t.length;++r)if(t[r]!==null&&t[r].destructorFunction===void 0)return!0;return!1}function br(t,r,s,i,p,b){var C=r.length;C<2&&le("argTypes array size mismatch! Must at least get return value and 'this' types!");var T=r[1]!==null&&s!==null,E=Qn(r),j=r[0].name!=="void",V=C-2,X=new Array(V),te=[],ne=[],we=function(){arguments.length!==V&&le(`function ${t} called with ${arguments.length} arguments, expected ${V}`),ne.length=0;var $e;te.length=T?2:1,te[0]=p,T&&($e=r[1].toWireType(ne,this),te[1]=$e);for(var me=0;me<V;++me)X[me]=r[me+2].toWireType(ne,arguments[me]),te.push(X[me]);var Oe=i.apply(null,te);function A(Y){if(E)cr(ne);else for(var Ce=T?1:2;Ce<r.length;Ce++){var Me=Ce===1?$e:X[Ce-2];r[Ce].destructorFunction!==null&&r[Ce].destructorFunction(Me)}if(j)return r[0].fromWireType(Y)}return A(Oe)};return Ot(t,we)}var Yn=(t,r,s,i,p,b)=>{var C=gr(r,s);p=Ve(i,p),pt([],[t],function(T){T=T[0];var E=`constructor ${T.name}`;if(T.registeredClass.constructor_body===void 0&&(T.registeredClass.constructor_body=[]),T.registeredClass.constructor_body[r-1]!==void 0)throw new kt(`Cannot register multiple constructors with identical number of parameters (${r-1}) for class '${T.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return T.registeredClass.constructor_body[r-1]=()=>{Gt(`Cannot construct ${T.name} due to unbound types`,C)},pt([],C,j=>(j.splice(1,0,null),T.registeredClass.constructor_body[r-1]=br(E,j,null,p,b),[])),[]})},Zr=t=>{t=t.trim();const r=t.indexOf("(");return r!==-1?t.substr(0,r):t},Jn=(t,r,s,i,p,b,C,T,E)=>{var j=gr(s,i);r=Ae(r),r=Zr(r),b=Ve(p,b),pt([],[t],function(V){V=V[0];var X=`${V.name}.${r}`;r.startsWith("@@")&&(r=Symbol[r.substring(2)]),T&&V.registeredClass.pureVirtualFunctions.push(r);function te(){Gt(`Cannot call ${X} due to unbound types`,j)}var ne=V.registeredClass.instancePrototype,we=ne[r];return we===void 0||we.overloadTable===void 0&&we.className!==V.name&&we.argCount===s-2?(te.argCount=s-2,te.className=V.name,ne[r]=te):(Hr(ne,r,X),ne[r].overloadTable[s-2]=te),pt([],j,function($e){var me=br(X,$e,V,b,C);return ne[r].overloadTable===void 0?(me.argCount=s-2,ne[r]=me):ne[r].overloadTable[s-2]=me,[]}),[]})};function Kn(){Object.assign(Xr.prototype,{get(t){return this.allocated[t]},has(t){return this.allocated[t]!==void 0},allocate(t){var r=this.freelist.pop()||this.allocated.length;return this.allocated[r]=t,r},free(t){this.allocated[t]=void 0,this.freelist.push(t)}})}function Xr(){this.allocated=[void 0],this.freelist=[]}var Fe=new Xr,yr=t=>{t>=Fe.reserved&&--Fe.get(t).refcount===0&&Fe.free(t)},Zn=()=>{for(var t=0,r=Fe.reserved;r<Fe.allocated.length;++r)Fe.allocated[r]!==void 0&&++t;return t},Xn=()=>{Fe.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),Fe.reserved=Fe.allocated.length,a.count_emval_handles=Zn},tt={toValue:t=>(t||le("Cannot use deleted val. handle = "+t),Fe.get(t).value),toHandle:t=>{switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return Fe.allocate({refcount:1,value:t})}}},es=(t,r)=>{r=Ae(r),Ye(t,{name:r,fromWireType:s=>{var i=tt.toValue(s);return yr(s),i},toWireType:(s,i)=>tt.toHandle(i),argPackAdvance:Je,readValueFromPointer:dr,destructorFunction:null})},ts=(t,r,s)=>{switch(r){case 1:return s?function(i){return this.fromWireType(L[i>>0])}:function(i){return this.fromWireType(z[i>>0])};case 2:return s?function(i){return this.fromWireType(K[i>>1])}:function(i){return this.fromWireType(B[i>>1])};case 4:return s?function(i){return this.fromWireType(S[i>>2])}:function(i){return this.fromWireType(O[i>>2])};default:throw new TypeError(`invalid integer width (${r}): ${t}`)}},rs=(t,r,s,i)=>{r=Ae(r);function p(){}p.values={},Ye(t,{name:r,constructor:p,fromWireType:function(b){return this.constructor.values[b]},toWireType:(b,C)=>C.value,argPackAdvance:Je,readValueFromPointer:ts(r,s,i),destructorFunction:null}),vr(r,p)},wr=(t,r)=>{var s=mt[t];return s===void 0&&le(r+" has unknown type "+Kr(t)),s},as=(t,r,s)=>{var i=wr(t,"enum");r=Ae(r);var p=i.constructor,b=Object.create(i.constructor.prototype,{value:{value:s},constructor:{value:Ot(`${i.name}_${r}`,function(){})}});p.values[s]=b,p[r]=b},xr=t=>{if(t===null)return"null";var r=typeof t;return r==="object"||r==="array"||r==="function"?t.toString():""+t},ns=(t,r)=>{switch(r){case 4:return function(s){return this.fromWireType(q[s>>2])};case 8:return function(s){return this.fromWireType(F[s>>3])};default:throw new TypeError(`invalid float width (${r}): ${t}`)}},ss=(t,r,s)=>{r=Ae(r),Ye(t,{name:r,fromWireType:i=>i,toWireType:(i,p)=>p,argPackAdvance:Je,readValueFromPointer:ns(r,s),destructorFunction:null})},os=(t,r,s,i,p,b,C)=>{var T=gr(r,s);t=Ae(t),t=Zr(t),p=Ve(i,p),vr(t,function(){Gt(`Cannot call ${t} due to unbound types`,T)},r-1),pt([],T,function(E){var j=[E[0],null].concat(E.slice(1));return Qr(t,br(t,j,null,p,b),r-1),[]})},is=(t,r,s)=>{switch(r){case 1:return s?i=>L[i>>0]:i=>z[i>>0];case 2:return s?i=>K[i>>1]:i=>B[i>>1];case 4:return s?i=>S[i>>2]:i=>O[i>>2];default:throw new TypeError(`invalid integer width (${r}): ${t}`)}},ls=(t,r,s,i,p)=>{r=Ae(r);var b=V=>V;if(i===0){var C=32-8*s;b=V=>V<<C>>>C}var T=r.includes("unsigned"),E=(V,X)=>{},j;T?j=function(V,X){return E(X,this.name),X>>>0}:j=function(V,X){return E(X,this.name),X},Ye(t,{name:r,fromWireType:b,toWireType:j,argPackAdvance:Je,readValueFromPointer:is(r,s,i!==0),destructorFunction:null})},us=(t,r,s)=>{var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],p=i[r];function b(C){var T=O[C>>2],E=O[C+4>>2];return new p(L.buffer,E,T)}s=Ae(s),Ye(t,{name:s,fromWireType:b,argPackAdvance:Je,readValueFromPointer:b},{ignoreDuplicateRegistrations:!0})},ea=(t,r,s,i)=>{if(!(i>0))return 0;for(var p=s,b=s+i-1,C=0;C<t.length;++C){var T=t.charCodeAt(C);if(T>=55296&&T<=57343){var E=t.charCodeAt(++C);T=65536+((T&1023)<<10)|E&1023}if(T<=127){if(s>=b)break;r[s++]=T}else if(T<=2047){if(s+1>=b)break;r[s++]=192|T>>6,r[s++]=128|T&63}else if(T<=65535){if(s+2>=b)break;r[s++]=224|T>>12,r[s++]=128|T>>6&63,r[s++]=128|T&63}else{if(s+3>=b)break;r[s++]=240|T>>18,r[s++]=128|T>>12&63,r[s++]=128|T>>6&63,r[s++]=128|T&63}}return r[s]=0,s-p},cs=(t,r,s)=>ea(t,z,r,s),ta=t=>{for(var r=0,s=0;s<t.length;++s){var i=t.charCodeAt(s);i<=127?r++:i<=2047?r+=2:i>=55296&&i<=57343?(r+=4,++s):r+=3}return r},ra=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,ds=(t,r,s)=>{for(var i=r+s,p=r;t[p]&&!(p>=i);)++p;if(p-r>16&&t.buffer&&ra)return ra.decode(t.subarray(r,p));for(var b="";r<p;){var C=t[r++];if(!(C&128)){b+=String.fromCharCode(C);continue}var T=t[r++]&63;if((C&224)==192){b+=String.fromCharCode((C&31)<<6|T);continue}var E=t[r++]&63;if((C&240)==224?C=(C&15)<<12|T<<6|E:C=(C&7)<<18|T<<12|E<<6|t[r++]&63,C<65536)b+=String.fromCharCode(C);else{var j=C-65536;b+=String.fromCharCode(55296|j>>10,56320|j&1023)}}return b},_r=(t,r)=>t?ds(z,t,r):"",fs=(t,r)=>{r=Ae(r);var s=r==="std::string";Ye(t,{name:r,fromWireType(i){var p=O[i>>2],b=i+4,C;if(s)for(var T=b,E=0;E<=p;++E){var j=b+E;if(E==p||z[j]==0){var V=j-T,X=_r(T,V);C===void 0?C=X:(C+="\0",C+=X),T=j+1}}else{for(var te=new Array(p),E=0;E<p;++E)te[E]=String.fromCharCode(z[b+E]);C=te.join("")}return rt(i),C},toWireType(i,p){p instanceof ArrayBuffer&&(p=new Uint8Array(p));var b,C=typeof p=="string";C||p instanceof Uint8Array||p instanceof Uint8ClampedArray||p instanceof Int8Array||le("Cannot pass non-string to std::string"),s&&C?b=ta(p):b=p.length;var T=Cr(4+b+1),E=T+4;if(O[T>>2]=b,s&&C)cs(p,E,b+1);else if(C)for(var j=0;j<b;++j){var V=p.charCodeAt(j);V>255&&(rt(E),le("String has UTF-16 code units that do not fit in 8 bits")),z[E+j]=V}else for(var j=0;j<b;++j)z[E+j]=p[j];return i!==null&&i.push(rt,T),T},argPackAdvance:Je,readValueFromPointer:Gr,destructorFunction(i){rt(i)}})},aa=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,ms=(t,r)=>{for(var s=t,i=s>>1,p=i+r/2;!(i>=p)&&B[i];)++i;if(s=i<<1,s-t>32&&aa)return aa.decode(z.subarray(t,s));for(var b="",C=0;!(C>=r/2);++C){var T=K[t+C*2>>1];if(T==0)break;b+=String.fromCharCode(T)}return b},ps=(t,r,s)=>{var i;if((i=s)!==null&&i!==void 0||(s=2147483647),s<2)return 0;s-=2;for(var p=r,b=s<t.length*2?s/2:t.length,C=0;C<b;++C){var T=t.charCodeAt(C);K[r>>1]=T,r+=2}return K[r>>1]=0,r-p},vs=t=>t.length*2,hs=(t,r)=>{for(var s=0,i="";!(s>=r/4);){var p=S[t+s*4>>2];if(p==0)break;if(++s,p>=65536){var b=p-65536;i+=String.fromCharCode(55296|b>>10,56320|b&1023)}else i+=String.fromCharCode(p)}return i},gs=(t,r,s)=>{var i;if((i=s)!==null&&i!==void 0||(s=2147483647),s<4)return 0;for(var p=r,b=p+s-4,C=0;C<t.length;++C){var T=t.charCodeAt(C);if(T>=55296&&T<=57343){var E=t.charCodeAt(++C);T=65536+((T&1023)<<10)|E&1023}if(S[r>>2]=T,r+=4,r+4>b)break}return S[r>>2]=0,r-p},bs=t=>{for(var r=0,s=0;s<t.length;++s){var i=t.charCodeAt(s);i>=55296&&i<=57343&&++s,r+=4}return r},ys=(t,r,s)=>{s=Ae(s);var i,p,b,C,T;r===2?(i=ms,p=ps,C=vs,b=()=>B,T=1):r===4&&(i=hs,p=gs,C=bs,b=()=>O,T=2),Ye(t,{name:s,fromWireType:E=>{for(var j=O[E>>2],V=b(),X,te=E+4,ne=0;ne<=j;++ne){var we=E+4+ne*r;if(ne==j||V[we>>T]==0){var $e=we-te,me=i(te,$e);X===void 0?X=me:(X+="\0",X+=me),te=we+r}}return rt(E),X},toWireType:(E,j)=>{typeof j!="string"&&le(`Cannot pass non-string to C++ string type ${s}`);var V=C(j),X=Cr(4+V+r);return O[X>>2]=V>>T,p(j,X+4,V+r),E!==null&&E.push(rt,X),X},argPackAdvance:Je,readValueFromPointer:dr,destructorFunction(E){rt(E)}})},ws=(t,r,s,i,p,b)=>{Ft[t]={name:Ae(r),rawConstructor:Ve(s,i),rawDestructor:Ve(p,b),fields:[]}},xs=(t,r,s,i,p,b,C,T,E,j)=>{Ft[t].fields.push({fieldName:Ae(r),getterReturnType:s,getter:Ve(i,p),getterContext:b,setterArgumentType:C,setter:Ve(T,E),setterContext:j})},_s=(t,r)=>{r=Ae(r),Ye(t,{isVoid:!0,name:r,argPackAdvance:0,fromWireType:()=>{},toWireType:(s,i)=>{}})},kr=[],ks=(t,r,s,i)=>(t=kr[t],r=tt.toValue(r),t(null,r,s,i)),$s={},Cs=t=>{var r=$s[t];return r===void 0?Ae(t):r},na=()=>{if(typeof globalThis=="object")return globalThis;function t(r){r.$$$embind_global$$$=r;var s=typeof $$$embind_global$$$=="object"&&r.$$$embind_global$$$==r;return s||delete r.$$$embind_global$$$,s}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&t(global)?$$$embind_global$$$=global:typeof self=="object"&&t(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},Ss=t=>t===0?tt.toHandle(na()):(t=Cs(t),tt.toHandle(na()[t])),Ts=t=>{var r=kr.length;return kr.push(t),r},Ps=(t,r)=>{for(var s=new Array(t),i=0;i<t;++i)s[i]=wr(O[r+i*4>>2],"parameter "+i);return s},Ms=Reflect.construct,Es=(t,r,s)=>{var i=[],p=t.toWireType(i,s);return i.length&&(O[r>>2]=tt.toHandle(i)),p},Rs=(t,r,s)=>{var i=Ps(t,r),p=i.shift();t--;var b=new Array(t),C=(E,j,V,X)=>{for(var te=0,ne=0;ne<t;++ne)b[ne]=i[ne].readValueFromPointer(X+te),te+=i[ne].argPackAdvance;for(var we=s===1?Ms(j,b):j.apply(E,b),ne=0;ne<t;++ne){var $e,me;($e=(me=i[ne]).deleteObject)===null||$e===void 0||$e.call(me,b[ne])}return Es(p,V,we)},T=`methodCaller<(${i.map(E=>E.name).join(", ")}) => ${p.name}>`;return Ts(Ot(T,C))},As=t=>{t>4&&(Fe.get(t).refcount+=1)},Os=t=>{var r=tt.toValue(t);cr(r),yr(t)},js=(t,r)=>{t=wr(t,"_emval_take_value");var s=t.readValueFromPointer(r);return tt.toHandle(s)},Us=()=>{Pe("")},Is=(t,r,s)=>z.copyWithin(t,r,r+s),Ds=()=>2147483648,Ls=t=>{var r=y.buffer,s=(t-r.byteLength+65535)/65536;try{return y.grow(s),re(),1}catch{}},Bs=t=>{var r=z.length;t>>>=0;var s=Ds();if(t>s)return!1;for(var i=(E,j)=>E+(j-E%j)%j,p=1;p<=4;p*=2){var b=r*(1+.2/p);b=Math.min(b,t+100663296);var C=Math.min(s,i(Math.max(t,b),65536)),T=Ls(C);if(T)return!0}return!1},$r={},Fs=()=>f||"./this.program",jt=()=>{if(!jt.strings){var t=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:t,_:Fs()};for(var s in $r)$r[s]===void 0?delete r[s]:r[s]=$r[s];var i=[];for(var s in r)i.push(`${s}=${r[s]}`);jt.strings=i}return jt.strings},Ns=(t,r)=>{for(var s=0;s<t.length;++s)L[r++>>0]=t.charCodeAt(s);L[r>>0]=0},Vs=(t,r)=>{var s=0;return jt().forEach((i,p)=>{var b=r+s;O[t+p*4>>2]=b,Ns(i,b),s+=i.length+1}),0},qs=(t,r)=>{var s=jt();O[t>>2]=s.length;var i=0;return s.forEach(p=>i+=p.length+1),O[r>>2]=i,0},Ws=t=>t,Qt=t=>t%4===0&&(t%100!==0||t%400===0),zs=(t,r)=>{for(var s=0,i=0;i<=r;s+=t[i++]);return s},sa=[31,29,31,30,31,30,31,31,30,31,30,31],oa=[31,28,31,30,31,30,31,31,30,31,30,31],Hs=(t,r)=>{for(var s=new Date(t.getTime());r>0;){var i=Qt(s.getFullYear()),p=s.getMonth(),b=(i?sa:oa)[p];if(r>b-s.getDate())r-=b-s.getDate()+1,s.setDate(1),p<11?s.setMonth(p+1):(s.setMonth(0),s.setFullYear(s.getFullYear()+1));else return s.setDate(s.getDate()+r),s}return s};function Gs(t,r,s){var i=ta(t)+1,p=new Array(i);return ea(t,p,0,p.length),p}var Qs=(t,r)=>{L.set(t,r)},Ys=(t,r,s,i)=>{var p=O[i+40>>2],b={tm_sec:S[i>>2],tm_min:S[i+4>>2],tm_hour:S[i+8>>2],tm_mday:S[i+12>>2],tm_mon:S[i+16>>2],tm_year:S[i+20>>2],tm_wday:S[i+24>>2],tm_yday:S[i+28>>2],tm_isdst:S[i+32>>2],tm_gmtoff:S[i+36>>2],tm_zone:p?_r(p):""},C=_r(s),T={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var E in T)C=C.replace(new RegExp(E,"g"),T[E]);var j=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],V=["January","February","March","April","May","June","July","August","September","October","November","December"];function X(A,Y,Ce){for(var Me=typeof A=="number"?A.toString():A||"";Me.length<Y;)Me=Ce[0]+Me;return Me}function te(A,Y){return X(A,Y,"0")}function ne(A,Y){function Ce($t){return $t<0?-1:$t>0?1:0}var Me;return(Me=Ce(A.getFullYear()-Y.getFullYear()))===0&&(Me=Ce(A.getMonth()-Y.getMonth()))===0&&(Me=Ce(A.getDate()-Y.getDate())),Me}function we(A){switch(A.getDay()){case 0:return new Date(A.getFullYear()-1,11,29);case 1:return A;case 2:return new Date(A.getFullYear(),0,3);case 3:return new Date(A.getFullYear(),0,2);case 4:return new Date(A.getFullYear(),0,1);case 5:return new Date(A.getFullYear()-1,11,31);case 6:return new Date(A.getFullYear()-1,11,30)}}function $e(A){var Y=Hs(new Date(A.tm_year+1900,0,1),A.tm_yday),Ce=new Date(Y.getFullYear(),0,4),Me=new Date(Y.getFullYear()+1,0,4),$t=we(Ce),Jt=we(Me);return ne($t,Y)<=0?ne(Jt,Y)<=0?Y.getFullYear()+1:Y.getFullYear():Y.getFullYear()-1}var me={"%a":A=>j[A.tm_wday].substring(0,3),"%A":A=>j[A.tm_wday],"%b":A=>V[A.tm_mon].substring(0,3),"%B":A=>V[A.tm_mon],"%C":A=>{var Y=A.tm_year+1900;return te(Y/100|0,2)},"%d":A=>te(A.tm_mday,2),"%e":A=>X(A.tm_mday,2," "),"%g":A=>$e(A).toString().substring(2),"%G":A=>$e(A),"%H":A=>te(A.tm_hour,2),"%I":A=>{var Y=A.tm_hour;return Y==0?Y=12:Y>12&&(Y-=12),te(Y,2)},"%j":A=>te(A.tm_mday+zs(Qt(A.tm_year+1900)?sa:oa,A.tm_mon-1),3),"%m":A=>te(A.tm_mon+1,2),"%M":A=>te(A.tm_min,2),"%n":()=>`
`,"%p":A=>A.tm_hour>=0&&A.tm_hour<12?"AM":"PM","%S":A=>te(A.tm_sec,2),"%t":()=>"	","%u":A=>A.tm_wday||7,"%U":A=>{var Y=A.tm_yday+7-A.tm_wday;return te(Math.floor(Y/7),2)},"%V":A=>{var Y=Math.floor((A.tm_yday+7-(A.tm_wday+6)%7)/7);if((A.tm_wday+371-A.tm_yday-2)%7<=2&&Y++,Y){if(Y==53){var Ce=(A.tm_wday+371-A.tm_yday)%7;Ce!=4&&(Ce!=3||!Qt(A.tm_year))&&(Y=1)}}else{Y=52;var Me=(A.tm_wday+7-A.tm_yday-1)%7;(Me==4||Me==5&&Qt(A.tm_year%400-1))&&Y++}return te(Y,2)},"%w":A=>A.tm_wday,"%W":A=>{var Y=A.tm_yday+7-(A.tm_wday+6)%7;return te(Math.floor(Y/7),2)},"%y":A=>(A.tm_year+1900).toString().substring(2),"%Y":A=>A.tm_year+1900,"%z":A=>{var Y=A.tm_gmtoff,Ce=Y>=0;return Y=Math.abs(Y)/60,Y=Y/60*100+Y%60,(Ce?"+":"-")+("0000"+Y).slice(-4)},"%Z":A=>A.tm_zone,"%%":()=>"%"};C=C.replace(/%%/g,"\0\0");for(var E in me)C.includes(E)&&(C=C.replace(new RegExp(E,"g"),me[E](b)));C=C.replace(/\0\0/g,"%");var Oe=Gs(C);return Oe.length>r?0:(Qs(Oe,t),Oe.length-1)},Js=(t,r,s,i,p)=>Ys(t,r,s,i);Fr=a.InternalError=class extends Error{constructor(t){super(t),this.name="InternalError"}},_n(),kt=a.BindingError=class extends Error{constructor(t){super(t),this.name="BindingError"}},jn(),En(),Vn(),Jr=a.UnboundTypeError=Hn(Error,"UnboundTypeError"),Kn(),Xn();var Ks={s:ur,u:N,b:Qe,g:ft,q:hn,J:gn,f:bn,V:yn,d:fe,da:wn,Q:xn,_:$n,ca:Gn,ba:Yn,w:Jn,Y:es,x:rs,h:as,L:ss,M:os,t:ls,o:us,K:fs,C:ys,A:ws,ea:xs,$:_s,R:ks,ha:yr,fa:Ss,Z:Rs,N:As,O:Os,aa:js,B:Us,X:Is,W:Bs,T:Vs,U:qs,E:po,D:ro,F:mo,n:vo,a:Zs,e:no,m:to,k:oo,H:co,v:lo,G:fo,z:go,P:yo,l:so,j:ao,c:eo,p:Xs,I:uo,r:ho,i:io,y:bo,ga:Ws,S:Js},Se=lr(),rt=a._free=t=>(rt=a._free=Se.ka)(t),Cr=a._malloc=t=>(Cr=a._malloc=Se.la)(t),ia=t=>(ia=Se.na)(t),ye=(t,r)=>(ye=Se.oa)(t,r),Ut=t=>(Ut=Se.pa)(t),_e=()=>(_e=Se.qa)(),ke=t=>(ke=Se.ra)(t),la=t=>(la=Se.sa)(t),ua=t=>(ua=Se.ta)(t),ca=(t,r,s)=>(ca=Se.ua)(t,r,s),da=t=>(da=Se.va)(t);a.dynCall_viijii=(t,r,s,i,p,b,C)=>(a.dynCall_viijii=Se.wa)(t,r,s,i,p,b,C);var fa=a.dynCall_jiiii=(t,r,s,i,p)=>(fa=a.dynCall_jiiii=Se.xa)(t,r,s,i,p);a.dynCall_iiiiij=(t,r,s,i,p,b,C)=>(a.dynCall_iiiiij=Se.ya)(t,r,s,i,p,b,C),a.dynCall_iiiiijj=(t,r,s,i,p,b,C,T,E)=>(a.dynCall_iiiiijj=Se.za)(t,r,s,i,p,b,C,T,E),a.dynCall_iiiiiijj=(t,r,s,i,p,b,C,T,E,j)=>(a.dynCall_iiiiiijj=Se.Aa)(t,r,s,i,p,b,C,T,E,j);function Zs(t,r){var s=_e();try{return xe(t)(r)}catch(i){if(ke(s),i!==i+0)throw i;ye(1,0)}}function Xs(t,r,s,i){var p=_e();try{xe(t)(r,s,i)}catch(b){if(ke(p),b!==b+0)throw b;ye(1,0)}}function eo(t,r,s){var i=_e();try{xe(t)(r,s)}catch(p){if(ke(i),p!==p+0)throw p;ye(1,0)}}function to(t,r,s,i){var p=_e();try{return xe(t)(r,s,i)}catch(b){if(ke(p),b!==b+0)throw b;ye(1,0)}}function ro(t,r,s,i,p){var b=_e();try{return xe(t)(r,s,i,p)}catch(C){if(ke(b),C!==C+0)throw C;ye(1,0)}}function ao(t,r){var s=_e();try{xe(t)(r)}catch(i){if(ke(s),i!==i+0)throw i;ye(1,0)}}function no(t,r,s){var i=_e();try{return xe(t)(r,s)}catch(p){if(ke(i),p!==p+0)throw p;ye(1,0)}}function so(t){var r=_e();try{xe(t)()}catch(s){if(ke(r),s!==s+0)throw s;ye(1,0)}}function oo(t,r,s,i,p){var b=_e();try{return xe(t)(r,s,i,p)}catch(C){if(ke(b),C!==C+0)throw C;ye(1,0)}}function io(t,r,s,i,p,b,C,T,E,j,V){var X=_e();try{xe(t)(r,s,i,p,b,C,T,E,j,V)}catch(te){if(ke(X),te!==te+0)throw te;ye(1,0)}}function lo(t,r,s,i,p,b,C){var T=_e();try{return xe(t)(r,s,i,p,b,C)}catch(E){if(ke(T),E!==E+0)throw E;ye(1,0)}}function uo(t,r,s,i,p){var b=_e();try{xe(t)(r,s,i,p)}catch(C){if(ke(b),C!==C+0)throw C;ye(1,0)}}function co(t,r,s,i,p,b){var C=_e();try{return xe(t)(r,s,i,p,b)}catch(T){if(ke(C),T!==T+0)throw T;ye(1,0)}}function fo(t,r,s,i,p,b,C,T){var E=_e();try{return xe(t)(r,s,i,p,b,C,T)}catch(j){if(ke(E),j!==j+0)throw j;ye(1,0)}}function mo(t,r,s,i){var p=_e();try{return xe(t)(r,s,i)}catch(b){if(ke(p),b!==b+0)throw b;ye(1,0)}}function po(t,r,s,i){var p=_e();try{return xe(t)(r,s,i)}catch(b){if(ke(p),b!==b+0)throw b;ye(1,0)}}function vo(t){var r=_e();try{return xe(t)()}catch(s){if(ke(r),s!==s+0)throw s;ye(1,0)}}function ho(t,r,s,i,p,b,C,T){var E=_e();try{xe(t)(r,s,i,p,b,C,T)}catch(j){if(ke(E),j!==j+0)throw j;ye(1,0)}}function go(t,r,s,i,p,b,C,T,E,j,V,X){var te=_e();try{return xe(t)(r,s,i,p,b,C,T,E,j,V,X)}catch(ne){if(ke(te),ne!==ne+0)throw ne;ye(1,0)}}function bo(t,r,s,i,p,b,C,T,E,j,V,X,te,ne,we,$e){var me=_e();try{xe(t)(r,s,i,p,b,C,T,E,j,V,X,te,ne,we,$e)}catch(Oe){if(ke(me),Oe!==Oe+0)throw Oe;ye(1,0)}}function yo(t,r,s,i,p){var b=_e();try{return fa(t,r,s,i,p)}catch(C){if(ke(b),C!==C+0)throw C;ye(1,0)}}var Yt;ae=function t(){Yt||ma(),Yt||(ae=t)};function ma(){if(W>0||(je(),W>0))return;function t(){Yt||(Yt=!0,a.calledRun=!0,!R&&(de(),l(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),se()))}a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),t()},1)):t()}if(a.preInit)for(typeof a.preInit=="function"&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return ma(),n.ready}})();function $c(e){return Lr(Br,e)}async function Cc(e,n){return _c(Br,e,n)}async function Sc(e,n){return kc(Br,e,n)}var It;class Tc extends EventTarget{constructor(n={}){var a;super(),Zu(this,It,void 0);try{const l=(a=n?.formats)==null?void 0:a.filter(c=>c!=="unknown");if(l?.length===0)throw new TypeError("Hint option provided, but is empty.");l?.forEach(c=>{if(!er.has(c))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${c}' is not a valid enum value of type BarcodeFormat.`)}),Xu(this,It,l??[]),$c().then(c=>{this.dispatchEvent(new CustomEvent("load",{detail:c}))}).catch(c=>{this.dispatchEvent(new CustomEvent("error",{detail:c}))})}catch(l){throw wa(l,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return ec.filter(n=>n!=="unknown")}async detect(n){try{const a=await ic(n);if(a===null)return[];let l;try{Ja(a)?l=await Cc(a,{tryHarder:!0,formats:ya(this,It).map(c=>er.get(c))}):l=await Sc(a,{tryHarder:!0,formats:ya(this,It).map(c=>er.get(c))})}catch(c){throw console.error(c),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return l.map(c=>{const{topLeft:{x:m,y:f},topRight:{x:h,y:d},bottomLeft:{x:g,y:_},bottomRight:{x:v,y:k}}=c.position,$=Math.min(m,h,g,v),y=Math.min(f,d,_,k),R=Math.max(m,h,g,v),L=Math.max(f,d,_,k);return{boundingBox:new DOMRectReadOnly($,y,R-$,L-y),rawValue:c.text,format:tc(c.format),cornerPoints:[{x:m,y:f},{x:h,y:d},{x:v,y:k},{x:g,y:_}]}})}catch(a){throw wa(a,"Failed to execute 'detect' on 'BarcodeDetector'")}}}It=new WeakMap;const en=(e,n,a="error")=>{let l,c;const m=new Promise((f,h)=>{l=f,c=h,e.addEventListener(n,l),e.addEventListener(a,c)});return m.finally(()=>{e.removeEventListener(n,l),e.removeEventListener(a,c)}),m},$a=e=>new Promise(n=>setTimeout(n,e));class tn extends Error{constructor(){super("this browser has no Stream API support"),this.name="StreamApiNotSupportedError"}}class Pc extends Error{constructor(){super("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP."),this.name="InsecureContextError"}}class Mc extends Error{constructor(){super("Loading camera stream timed out after 6 seconds. If you are on iOS in PWA mode, this is a known issue (see https://github.com/gruhn/vue-qrcode-reader/issues/298)"),this.name="StreamLoadTimeoutError"}}let rn;function an(e){rn=new Tc({formats:e})}const Ec=async(e,{detectHandler:n,locateHandler:a,minDelay:l,formats:c})=>{console.debug("[vue-qrcode-reader] start scanning"),an(c);const m=f=>async h=>{if(e.readyState===0)console.debug("[vue-qrcode-reader] stop scanning: video element readyState is 0");else{const{lastScanned:d,contentBefore:g,lastScanHadContent:_}=f;if(h-d<l)window.requestAnimationFrame(m(f));else{const v=await rn.detect(e),k=v.some(R=>!g.includes(R.rawValue));k&&n(v);const $=v.length>0;$&&a(v),!$&&_&&a(v);const y={lastScanned:h,lastScanHadContent:$,contentBefore:k?v.map(R=>R.rawValue):g};window.requestAnimationFrame(m(y))}}};m({lastScanned:performance.now(),contentBefore:[],lastScanHadContent:!1})(performance.now())};var nn={},De={};Object.defineProperty(De,"__esModule",{value:!0});De.compactObject=ln;De.deprecated=Bc;var Rc=De.detectBrowser=Fc;De.disableLog=Ic;De.disableWarnings=Dc;De.extractVersion=tr;De.filterStats=Nc;De.log=Lc;De.walkStats=sr;De.wrapPeerConnectionEvent=Uc;function Ac(e,n,a){return n=Oc(n),n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function Oc(e){var n=jc(e,"string");return ut(n)==="symbol"?n:String(n)}function jc(e,n){if(ut(e)!=="object"||e===null)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var l=a.call(e,n);if(ut(l)!=="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function ut(e){"@babel/helpers - typeof";return ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ut(e)}var sn=!0,on=!0;function tr(e,n,a){var l=e.match(n);return l&&l.length>=a&&parseInt(l[a],10)}function Uc(e,n,a){if(e.RTCPeerConnection){var l=e.RTCPeerConnection.prototype,c=l.addEventListener;l.addEventListener=function(f,h){if(f!==n)return c.apply(this,arguments);var d=function(g){var _=a(g);_&&(h.handleEvent?h.handleEvent(_):h(_))};return this._eventMap=this._eventMap||{},this._eventMap[n]||(this._eventMap[n]=new Map),this._eventMap[n].set(h,d),c.apply(this,[f,d])};var m=l.removeEventListener;l.removeEventListener=function(f,h){if(f!==n||!this._eventMap||!this._eventMap[n])return m.apply(this,arguments);if(!this._eventMap[n].has(h))return m.apply(this,arguments);var d=this._eventMap[n].get(h);return this._eventMap[n].delete(h),this._eventMap[n].size===0&&delete this._eventMap[n],Object.keys(this._eventMap).length===0&&delete this._eventMap,m.apply(this,[f,d])},Object.defineProperty(l,"on"+n,{get:function(){return this["_on"+n]},set:function(f){this["_on"+n]&&(this.removeEventListener(n,this["_on"+n]),delete this["_on"+n]),f&&this.addEventListener(n,this["_on"+n]=f)},enumerable:!0,configurable:!0})}}function Ic(e){return typeof e!="boolean"?new Error("Argument type: "+ut(e)+". Please use a boolean."):(sn=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Dc(e){return typeof e!="boolean"?new Error("Argument type: "+ut(e)+". Please use a boolean."):(on=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Lc(){if((typeof window>"u"?"undefined":ut(window))==="object"){if(sn)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Bc(e,n){on&&console.warn(e+" is deprecated, please use "+n+" instead.")}function Fc(e){var n={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return n.browser="Not a browser.",n;var a=e.navigator;if(a.mozGetUserMedia)n.browser="firefox",n.version=tr(a.userAgent,/Firefox\/(\d+)\./,1);else if(a.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)n.browser="chrome",n.version=tr(a.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(e.RTCPeerConnection&&a.userAgent.match(/AppleWebKit\/(\d+)\./))n.browser="safari",n.version=tr(a.userAgent,/AppleWebKit\/(\d+)\./,1),n.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype;else return n.browser="Not a supported browser.",n;return n}function Ca(e){return Object.prototype.toString.call(e)==="[object Object]"}function ln(e){return Ca(e)?Object.keys(e).reduce(function(n,a){var l=Ca(e[a]),c=l?ln(e[a]):e[a],m=l&&!Object.keys(c).length;return c===void 0||m?n:Object.assign(n,Ac({},a,c))},{}):e}function sr(e,n,a){!n||a.has(n.id)||(a.set(n.id,n),Object.keys(n).forEach(function(l){l.endsWith("Id")?sr(e,e.get(n[l]),a):l.endsWith("Ids")&&n[l].forEach(function(c){sr(e,e.get(c),a)})}))}function Nc(e,n,a){var l=a?"outbound-rtp":"inbound-rtp",c=new Map;if(n===null)return c;var m=[];return e.forEach(function(f){f.type==="track"&&f.trackIdentifier===n.id&&m.push(f)}),m.forEach(function(f){e.forEach(function(h){h.type===l&&h.trackId===f.id&&sr(e,h,c)})}),c}Object.defineProperty(nn,"__esModule",{value:!0});var Vc=nn.shimGetUserMedia=zc,qc=Wc(De);function un(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,a=new WeakMap;return(un=function(l){return l?a:n})(e)}function Wc(e,n){if(e&&e.__esModule)return e;if(e===null||st(e)!=="object"&&typeof e!="function")return{default:e};var a=un(n);if(a&&a.has(e))return a.get(e);var l={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in e)if(m!=="default"&&Object.prototype.hasOwnProperty.call(e,m)){var f=c?Object.getOwnPropertyDescriptor(e,m):null;f&&(f.get||f.set)?Object.defineProperty(l,m,f):l[m]=e[m]}return l.default=e,a&&a.set(e,l),l}function st(e){"@babel/helpers - typeof";return st=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},st(e)}var Sa=qc.log;function zc(e,n){var a=e&&e.navigator;if(a.mediaDevices){var l=function(d){if(st(d)!=="object"||d.mandatory||d.optional)return d;var g={};return Object.keys(d).forEach(function(_){if(!(_==="require"||_==="advanced"||_==="mediaSource")){var v=st(d[_])==="object"?d[_]:{ideal:d[_]};v.exact!==void 0&&typeof v.exact=="number"&&(v.min=v.max=v.exact);var k=function(y,R){return y?y+R.charAt(0).toUpperCase()+R.slice(1):R==="deviceId"?"sourceId":R};if(v.ideal!==void 0){g.optional=g.optional||[];var $={};typeof v.ideal=="number"?($[k("min",_)]=v.ideal,g.optional.push($),$={},$[k("max",_)]=v.ideal,g.optional.push($)):($[k("",_)]=v.ideal,g.optional.push($))}v.exact!==void 0&&typeof v.exact!="number"?(g.mandatory=g.mandatory||{},g.mandatory[k("",_)]=v.exact):["min","max"].forEach(function(y){v[y]!==void 0&&(g.mandatory=g.mandatory||{},g.mandatory[k(y,_)]=v[y])})}}),d.advanced&&(g.optional=(g.optional||[]).concat(d.advanced)),g},c=function(d,g){if(n.version>=61)return g(d);if(d=JSON.parse(JSON.stringify(d)),d&&st(d.audio)==="object"){var _=function(y,R,L){R in y&&!(L in y)&&(y[L]=y[R],delete y[R])};d=JSON.parse(JSON.stringify(d)),_(d.audio,"autoGainControl","googAutoGainControl"),_(d.audio,"noiseSuppression","googNoiseSuppression"),d.audio=l(d.audio)}if(d&&st(d.video)==="object"){var v=d.video.facingMode;v=v&&(st(v)==="object"?v:{ideal:v});var k=n.version<66;if(v&&(v.exact==="user"||v.exact==="environment"||v.ideal==="user"||v.ideal==="environment")&&!(a.mediaDevices.getSupportedConstraints&&a.mediaDevices.getSupportedConstraints().facingMode&&!k)){delete d.video.facingMode;var $;if(v.exact==="environment"||v.ideal==="environment"?$=["back","rear"]:(v.exact==="user"||v.ideal==="user")&&($=["front"]),$)return a.mediaDevices.enumerateDevices().then(function(y){y=y.filter(function(L){return L.kind==="videoinput"});var R=y.find(function(L){return $.some(function(z){return L.label.toLowerCase().includes(z)})});return!R&&y.length&&$.includes("back")&&(R=y[y.length-1]),R&&(d.video.deviceId=v.exact?{exact:R.deviceId}:{ideal:R.deviceId}),d.video=l(d.video),Sa("chrome: "+JSON.stringify(d)),g(d)})}d.video=l(d.video)}return Sa("chrome: "+JSON.stringify(d)),g(d)},m=function(d){return n.version>=64?d:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[d.name]||d.name,message:d.message,constraint:d.constraint||d.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},f=function(d,g,_){c(d,function(v){a.webkitGetUserMedia(v,g,function(k){_&&_(m(k))})})};if(a.getUserMedia=f.bind(a),a.mediaDevices.getUserMedia){var h=a.mediaDevices.getUserMedia.bind(a.mediaDevices);a.mediaDevices.getUserMedia=function(d){return c(d,function(g){return h(g).then(function(_){if(g.audio&&!_.getAudioTracks().length||g.video&&!_.getVideoTracks().length)throw _.getTracks().forEach(function(v){v.stop()}),new DOMException("","NotFoundError");return _},function(_){return Promise.reject(m(_))})})}}}}var cn={};Object.defineProperty(cn,"__esModule",{value:!0});var Hc=cn.shimGetUserMedia=Yc,Gc=Qc(De);function dn(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,a=new WeakMap;return(dn=function(l){return l?a:n})(e)}function Qc(e,n){if(e&&e.__esModule)return e;if(e===null||Ct(e)!=="object"&&typeof e!="function")return{default:e};var a=dn(n);if(a&&a.has(e))return a.get(e);var l={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in e)if(m!=="default"&&Object.prototype.hasOwnProperty.call(e,m)){var f=c?Object.getOwnPropertyDescriptor(e,m):null;f&&(f.get||f.set)?Object.defineProperty(l,m,f):l[m]=e[m]}return l.default=e,a&&a.set(e,l),l}function Ct(e){"@babel/helpers - typeof";return Ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ct(e)}function Yc(e,n){var a=e&&e.navigator,l=e&&e.MediaStreamTrack;if(a.getUserMedia=function(d,g,_){Gc.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),a.mediaDevices.getUserMedia(d).then(g,_)},!(n.version>55&&"autoGainControl"in a.mediaDevices.getSupportedConstraints())){var c=function(d,g,_){g in d&&!(_ in d)&&(d[_]=d[g],delete d[g])},m=a.mediaDevices.getUserMedia.bind(a.mediaDevices);if(a.mediaDevices.getUserMedia=function(d){return Ct(d)==="object"&&Ct(d.audio)==="object"&&(d=JSON.parse(JSON.stringify(d)),c(d.audio,"autoGainControl","mozAutoGainControl"),c(d.audio,"noiseSuppression","mozNoiseSuppression")),m(d)},l&&l.prototype.getSettings){var f=l.prototype.getSettings;l.prototype.getSettings=function(){var d=f.apply(this,arguments);return c(d,"mozAutoGainControl","autoGainControl"),c(d,"mozNoiseSuppression","noiseSuppression"),d}}if(l&&l.prototype.applyConstraints){var h=l.prototype.applyConstraints;l.prototype.applyConstraints=function(d){return this.kind==="audio"&&Ct(d)==="object"&&(d=JSON.parse(JSON.stringify(d)),c(d,"autoGainControl","mozAutoGainControl"),c(d,"noiseSuppression","mozNoiseSuppression")),h.apply(this,[d])}}}}var et={};Object.defineProperty(et,"__esModule",{value:!0});et.shimAudioContext=sd;et.shimCallbacksAPI=ed;et.shimConstraints=pn;et.shimCreateOfferLegacy=nd;var Jc=et.shimGetUserMedia=td;et.shimLocalStreamsAPI=Zc;et.shimRTCIceServerUrls=rd;et.shimRemoteStreamsAPI=Xc;et.shimTrackEventTransceiver=ad;var fn=Kc(De);function mn(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,a=new WeakMap;return(mn=function(l){return l?a:n})(e)}function Kc(e,n){if(e&&e.__esModule)return e;if(e===null||ct(e)!=="object"&&typeof e!="function")return{default:e};var a=mn(n);if(a&&a.has(e))return a.get(e);var l={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in e)if(m!=="default"&&Object.prototype.hasOwnProperty.call(e,m)){var f=c?Object.getOwnPropertyDescriptor(e,m):null;f&&(f.get||f.set)?Object.defineProperty(l,m,f):l[m]=e[m]}return l.default=e,a&&a.set(e,l),l}function ct(e){"@babel/helpers - typeof";return ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ct(e)}function Zc(e){if(!(ct(e)!=="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(a){var l=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(a)||this._localStreams.push(a),a.getAudioTracks().forEach(function(c){return n.call(l,c,a)}),a.getVideoTracks().forEach(function(c){return n.call(l,c,a)})},e.RTCPeerConnection.prototype.addTrack=function(a){for(var l=this,c=arguments.length,m=new Array(c>1?c-1:0),f=1;f<c;f++)m[f-1]=arguments[f];return m&&m.forEach(function(h){l._localStreams?l._localStreams.includes(h)||l._localStreams.push(h):l._localStreams=[h]}),n.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(a){var l=this;this._localStreams||(this._localStreams=[]);var c=this._localStreams.indexOf(a);if(c!==-1){this._localStreams.splice(c,1);var m=a.getTracks();this.getSenders().forEach(function(f){m.includes(f.track)&&l.removeTrack(f)})}})}}function Xc(e){if(!(ct(e)!=="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(a){var l=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=a),this.addEventListener("track",this._onaddstreampoly=function(c){c.streams.forEach(function(m){if(l._remoteStreams||(l._remoteStreams=[]),!l._remoteStreams.includes(m)){l._remoteStreams.push(m);var f=new Event("addstream");f.stream=m,l.dispatchEvent(f)}})})}});var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var a=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(l){l.streams.forEach(function(c){if(a._remoteStreams||(a._remoteStreams=[]),!(a._remoteStreams.indexOf(c)>=0)){a._remoteStreams.push(c);var m=new Event("addstream");m.stream=c,a.dispatchEvent(m)}})}),n.apply(a,arguments)}}}function ed(e){if(!(ct(e)!=="object"||!e.RTCPeerConnection)){var n=e.RTCPeerConnection.prototype,a=n.createOffer,l=n.createAnswer,c=n.setLocalDescription,m=n.setRemoteDescription,f=n.addIceCandidate;n.createOffer=function(d,g){var _=arguments.length>=2?arguments[2]:arguments[0],v=a.apply(this,[_]);return g?(v.then(d,g),Promise.resolve()):v},n.createAnswer=function(d,g){var _=arguments.length>=2?arguments[2]:arguments[0],v=l.apply(this,[_]);return g?(v.then(d,g),Promise.resolve()):v};var h=function(d,g,_){var v=c.apply(this,[d]);return _?(v.then(g,_),Promise.resolve()):v};n.setLocalDescription=h,h=function(d,g,_){var v=m.apply(this,[d]);return _?(v.then(g,_),Promise.resolve()):v},n.setRemoteDescription=h,h=function(d,g,_){var v=f.apply(this,[d]);return _?(v.then(g,_),Promise.resolve()):v},n.addIceCandidate=h}}function td(e){var n=e&&e.navigator;if(n.mediaDevices&&n.mediaDevices.getUserMedia){var a=n.mediaDevices,l=a.getUserMedia.bind(a);n.mediaDevices.getUserMedia=function(c){return l(pn(c))}}!n.getUserMedia&&n.mediaDevices&&n.mediaDevices.getUserMedia&&(n.getUserMedia=(function(c,m,f){n.mediaDevices.getUserMedia(c).then(m,f)}).bind(n))}function pn(e){return e&&e.video!==void 0?Object.assign({},e,{video:fn.compactObject(e.video)}):e}function rd(e){if(e.RTCPeerConnection){var n=e.RTCPeerConnection;e.RTCPeerConnection=function(a,l){if(a&&a.iceServers){for(var c=[],m=0;m<a.iceServers.length;m++){var f=a.iceServers[m];f.urls===void 0&&f.url?(fn.deprecated("RTCIceServer.url","RTCIceServer.urls"),f=JSON.parse(JSON.stringify(f)),f.urls=f.url,delete f.url,c.push(f)):c.push(a.iceServers[m])}a.iceServers=c}return new n(a,l)},e.RTCPeerConnection.prototype=n.prototype,"generateCertificate"in n&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return n.generateCertificate}})}}function ad(e){ct(e)==="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function nd(e){var n=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(a){if(a){typeof a.offerToReceiveAudio<"u"&&(a.offerToReceiveAudio=!!a.offerToReceiveAudio);var l=this.getTransceivers().find(function(m){return m.receiver.track.kind==="audio"});a.offerToReceiveAudio===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):a.offerToReceiveAudio===!0&&!l&&this.addTransceiver("audio",{direction:"recvonly"}),typeof a.offerToReceiveVideo<"u"&&(a.offerToReceiveVideo=!!a.offerToReceiveVideo);var c=this.getTransceivers().find(function(m){return m.receiver.track.kind==="video"});a.offerToReceiveVideo===!1&&c?c.direction==="sendrecv"?c.setDirection?c.setDirection("sendonly"):c.direction="sendonly":c.direction==="recvonly"&&(c.setDirection?c.setDirection("inactive"):c.direction="inactive"):a.offerToReceiveVideo===!0&&!c&&this.addTransceiver("video",{direction:"recvonly"})}return n.apply(this,arguments)}}function sd(e){ct(e)!=="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const od=e=>{let n=!1,a;return(...l)=>(n||(a=e(l),n=!0),a)};function Ke(e,n){if(e===!1)throw new Error(n??"assertion failure")}function Ta(e){throw new Error("this code should be unreachable")}const id=od(()=>{const e=Rc(window);switch(e.browser){case"chrome":Vc(window,e);break;case"firefox":Hc(window,e);break;case"safari":Jc(window,e);break;default:throw new tn}});let St=Promise.resolve({type:"stop",data:{}});async function Pa(e,n,a){var l,c,m;if(console.debug("[vue-qrcode-reader] starting camera with constraints: ",JSON.stringify(n)),window.isSecureContext!==!0)throw new Pc;if(((l=navigator?.mediaDevices)==null?void 0:l.getUserMedia)===void 0)throw new tn;id(),console.debug("[vue-qrcode-reader] calling getUserMedia");const f=await navigator.mediaDevices.getUserMedia({audio:!1,video:n});e.srcObject!==void 0?e.srcObject=f:e.mozSrcObject!==void 0?e.mozSrcObject=f:window.URL.createObjectURL?e.src=window.URL.createObjectURL(f):window.webkitURL?e.src=window.webkitURL.createObjectURL(f):e.src=f.id,e.play(),console.debug("[vue-qrcode-reader] waiting for video element to load"),await Promise.race([en(e,"loadeddata"),$a(6e3).then(()=>{throw new Mc})]),console.debug("[vue-qrcode-reader] video element loaded"),await $a(500);const[h]=f.getVideoTracks(),d=(m=(c=h?.getCapabilities)==null?void 0:c.call(h))!=null?m:{};let g=!1;return a&&d.torch&&(await h.applyConstraints({advanced:[{torch:!0}]}),g=!0),console.debug("[vue-qrcode-reader] camera ready"),{type:"start",data:{videoEl:e,stream:f,capabilities:d,constraints:n,isTorchOn:g}}}async function ld(e,{constraints:n,torch:a,restart:l=!1}){St=St.then(m=>{if(m.type==="start"){const{data:{videoEl:f,stream:h,constraints:d,isTorchOn:g}}=m;return!l&&e===f&&n===d&&a===g?m:vn(f,h,g).then(()=>Pa(e,n,a))}else if(m.type==="stop"||m.type==="failed")return Pa(e,n,a);Ta()}).catch(m=>(console.debug(`[vue-qrcode-reader] starting camera failed with "${m}"`),{type:"failed",error:m}));const c=await St;if(c.type==="stop")throw new Error("Something went wrong with the camera task queue (start task).");if(c.type==="failed")throw c.error;if(c.type==="start")return c.data.capabilities;Ta()}async function vn(e,n,a){console.debug("[vue-qrcode-reader] stopping camera"),e.src="",e.srcObject=null,e.load(),await en(e,"error");for(const l of n.getTracks())a!=null||await l.applyConstraints({advanced:[{torch:!1}]}),n.removeTrack(l),l.stop();return{type:"stop",data:{}}}async function Zt(){if(St=St.then(e=>{if(e.type==="stop"||e.type==="failed")return e;const{data:{videoEl:n,stream:a,isTorchOn:l}}=e;return vn(n,a,l)}),(await St).type==="start")throw new Error("Something went wrong with the camera task queue (stop task).")}const ud=ce({__name:"QrcodeStream",props:{constraints:{default:()=>({facingMode:"environment"})},formats:{default:()=>["qr_code"]},paused:{type:Boolean,default:!1},torch:{type:Boolean,default:!1},track:{type:Function,default:void 0}},emits:["detect","camera-on","camera-off","error"],setup(e,{emit:n}){const a=e,l=n,c=Q(a.constraints),m=Q(a.formats);Ue(()=>a.constraints,(B,S)=>{JSON.stringify(B)!==JSON.stringify(S)&&(c.value=B)},{deep:!0}),Ue(()=>a.formats,(B,S)=>{JSON.stringify(B)!==JSON.stringify(S)&&(m.value=B)},{deep:!0});const f=Q(),h=Q(),d=Q(),g=Q(!1),_=Q(!1);Or(()=>{_.value=!0}),xo(()=>{Zt()});const v=w(()=>({torch:a.torch,constraints:c.value,shouldStream:_.value&&!a.paused}));Ue(v,async B=>{const S=d.value;Ke(S!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus video element should always be defined.");const O=f.value;Ke(O!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus canvas should always be defined.");const q=O.getContext("2d");if(Ke(q!==null,"if cavnas is defined, canvas 2d context should also be non-null"),B.shouldStream){Zt(),g.value=!1;try{const F=await ld(S,B);_.value?(g.value=!0,l("camera-on",F)):await Zt()}catch(F){l("error",F)}}else O.width=S.videoWidth,O.height=S.videoHeight,q.drawImage(S,0,0,S.videoWidth,S.videoHeight),Zt(),g.value=!1,l("camera-off")},{deep:!0}),Ue(m,B=>{_.value&&an(B)});const k=w(()=>v.value.shouldStream&&g.value);Ue(k,B=>{if(B){Ke(f.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus pause frame canvas is defined"),$(f.value),Ke(h.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus tracking canvas is defined"),$(h.value);const S=()=>a.track===void 0?500:40;Ke(d.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus video element is defined"),Ec(d.value,{detectHandler:O=>l("detect",O),formats:m.value,locateHandler:y,minDelay:S()})}});const $=B=>{const S=B.getContext("2d");Ke(S!==null,"canvas 2d context should always be non-null"),S.clearRect(0,0,B.width,B.height)},y=B=>{const S=h.value;Ke(S!==void 0,"onLocate handler should only be called when component is mounted. Thus tracking canvas is always defined.");const O=d.value;if(Ke(O!==void 0,"onLocate handler should only be called when component is mounted. Thus video element is always defined."),B.length===0||a.track===void 0)$(S);else{const q=O.offsetWidth,F=O.offsetHeight,re=O.videoWidth,ee=O.videoHeight,H=Math.max(q/re,F/ee),ve=re*H,je=ee*H,de=ve/re,se=je/ee,G=(q-ve)/2,Z=(F-je)/2,ie=({x:ge,y:Pe})=>({x:Math.floor(ge*de),y:Math.floor(Pe*se)}),W=({x:ge,y:Pe})=>({x:Math.floor(ge+G),y:Math.floor(Pe+Z)}),ae=B.map(ge=>{const{boundingBox:Pe,cornerPoints:dt}=ge,{x:at,y:Be}=W(ie({x:Pe.x,y:Pe.y})),{x:nt,y:gt}=ie({x:Pe.width,y:Pe.height});return{...ge,cornerPoints:dt.map(bt=>W(ie(bt))),boundingBox:DOMRectReadOnly.fromRect({x:at,y:Be,width:nt,height:gt})}});S.width=O.offsetWidth,S.height=O.offsetHeight;const he=S.getContext("2d");Ke(he!==null,"canvas 2d context should always be non-null"),a.track(ae,he)}},R={width:"100%",height:"100%",position:"relative","z-index":"0"},L={width:"100%",height:"100%",position:"absolute",top:"0",left:"0"},z={width:"100%",height:"100%","object-fit":"cover"},K=w(()=>k.value?z:{...z,visibility:"hidden",position:"absolute"});return(B,S)=>(P(),I("div",{style:R},[u("video",{ref_key:"videoRef",ref:d,style:ot(K.value),autoplay:"",muted:"",playsinline:""},null,4),Dt(u("canvas",{id:"qrcode-stream-pause-frame",ref_key:"pauseFrameRef",ref:f,style:z},null,512),[[Rr,!k.value]]),u("canvas",{id:"qrcode-stream-tracking-layer",ref_key:"trackingLayerRef",ref:h,style:L},null,512),u("div",{style:L},[_o(B.$slots,"default")])]))}}),cd={class:"flex items-start justify-between gap-3"},dd={class:"mt-4 flex items-center gap-4"},fd={class:"relative h-20 w-20 shrink-0"},md={class:"h-full w-full -rotate-90",viewBox:"0 0 80 80","aria-hidden":"true"},pd=["stroke","stroke-dashoffset"],vd={class:"absolute inset-0 flex items-center justify-center text-sm font-bold text-foreground"},hd={class:"space-y-2"},gd={class:"space-y-3"},bd={class:"flex items-center justify-between gap-3"},yd={class:"overflow-hidden rounded-2xl border border-border bg-black/90"},wd={key:0,class:"rounded-xl border border-destructive/35 bg-destructive/10 px-3 py-2 text-xs text-destructive"},xd={class:"space-y-4"},_d={class:"inline-flex rounded-3xl border border-border bg-white p-4 shadow-sm"},kd={class:"text-xs text-muted-foreground"},$d={class:"font-medium text-foreground"},Er=34,Cd=ce({__name:"QRQuest",props:{scanned:{default:2},target:{default:5},userUuid:{default:""},teamColor:{default:"#22c55e"}},emits:["update:scanned","scan"],setup(e,{emit:n}){const a=e,l=n,c=Ge(),m=Q(!1),f=Q(!1),h=Q(""),d=Q(Math.max(0,Math.floor(a.scanned))),g=Q(""),_=2*Math.PI*Er,v=w(()=>Math.max(1,Math.floor(a.target))),k=w(()=>Math.min(1,d.value/v.value)),$=w(()=>_*(1-k.value)),y=w(()=>a.userUuid.trim()||"user-uuid-missing");Ue(()=>a.scanned,B=>{d.value=Math.max(0,Math.floor(B))});const R=()=>{h.value="",m.value=!0},L=B=>{if(!Array.isArray(B)||!B.length)return"";const S=B[0];if(!S)return"";const O=typeof S.rawValue=="string"?S.rawValue.trim():"";return O||(typeof S.raw=="string"?S.raw.trim():"")},z=B=>{const S=L(B);!S||S===g.value||(g.value=S,d.value=Math.min(v.value,d.value+1),l("update:scanned",d.value),l("scan",S),c.push({level:"success",title:"QR Ğ·Ğ°ÑÑ‡Ğ¸Ñ‚Ğ°Ğ½",message:`ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½: ${d.value}/${v.value}`}),m.value=!1)},K=B=>{const S=B instanceof Error?B.message:"ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚ÑŒ ĞºĞ°Ğ¼ĞµÑ€Ñƒ.";h.value=S,c.push({level:"warning",title:"ĞšĞ°Ğ¼ĞµÑ€Ğ° Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ°",message:S})};return(B,S)=>{const O=Aa;return P(),I(be,null,[x(o(Ee),{class:"rounded-3xl border border-border p-4 sm:p-5"},{default:M(()=>[u("div",cd,[S[3]||(S[3]=u("div",null,[u("p",{class:"text-[11px] font-semibold uppercase tracking-[0.2em] text-muted-foreground"},"QR Quest"),u("h3",{class:"mt-1 text-base font-semibold text-foreground"},"Ğ¡ĞºĞ°Ğ½Ğ¸Ñ€ÑƒĞ¹ ÑƒÑ‡Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ¾Ğ²")],-1)),x(o(qe),{variant:"secondary"},{default:M(()=>[D(U(o(d))+"/"+U(o(v)),1)]),_:1})]),u("div",dd,[u("div",fd,[(P(),I("svg",md,[u("circle",{cx:"40",cy:"40",r:Er,fill:"none",stroke:"currentColor","stroke-width":"8",class:"text-muted/55"}),u("circle",{cx:"40",cy:"40",r:Er,fill:"none",stroke:e.teamColor,"stroke-width":"8","stroke-linecap":"round","stroke-dasharray":_,"stroke-dashoffset":o($)},null,8,pd)])),u("div",vd,U(o(d)),1)]),u("div",hd,[x(o(oe),{class:"w-full gap-2 sm:w-auto",onClick:R},{default:M(()=>[x(o(Bo),{class:"h-4 w-4"}),S[4]||(S[4]=D(" Scan QR ",-1))]),_:1}),x(o(oe),{variant:"outline",class:"w-full gap-2 sm:w-auto",onClick:S[0]||(S[0]=q=>f.value=!0)},{default:M(()=>[x(o(ni),{class:"h-4 w-4"}),S[5]||(S[5]=D(" My QR ",-1))]),_:1})])])]),_:1}),x(o(ar),{modelValue:o(m),"onUpdate:modelValue":S[1]||(S[1]=q=>lt(m)?m.value=q:null),class:"max-w-xl rounded-3xl p-4 sm:p-5"},{default:M(({close:q})=>[u("div",gd,[u("div",bd,[S[6]||(S[6]=u("h4",{class:"text-base font-semibold text-foreground"},"Ğ¡ĞºĞ°Ğ½Ğ¸Ñ€ÑƒĞ¹ QR ÑƒÑ‡Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ°",-1)),x(o(oe),{variant:"ghost",size:"icon",class:"h-8 w-8 rounded-full",onClick:q},{default:M(()=>[x(o(Fa),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),S[9]||(S[9]=u("p",{class:"text-xs text-muted-foreground"}," ĞĞ°Ğ²ĞµĞ´Ğ¸ ĞºĞ°Ğ¼ĞµÑ€Ñƒ Ğ½Ğ° QR-ĞºĞ¾Ğ´. ĞŸĞ¾ÑĞ»Ğµ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾Ğ³Ğ¾ ÑĞºĞ°Ğ½Ğ° Ğ¾ĞºĞ½Ğ¾ Ğ·Ğ°ĞºÑ€Ğ¾ĞµÑ‚ÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸. ",-1)),u("div",yd,[x(O,null,{fallback:M(()=>[...S[7]||(S[7]=[u("div",{class:"flex min-h-[280px] items-center justify-center text-sm text-muted-foreground"}," ĞšĞ°Ğ¼ĞµÑ€Ğ° Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ... ",-1)])]),default:M(()=>[x(o(ud),{class:"min-h-[280px] w-full",onDetect:z,onError:K})]),_:1})]),o(h)?(P(),I("p",wd,U(o(h)),1)):pe("",!0),x(o(oe),{variant:"outline",class:"w-full gap-2",onClick:q},{default:M(()=>[x(o(Fo),{class:"h-4 w-4"}),S[8]||(S[8]=D(" Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ ĞºĞ°Ğ¼ĞµÑ€Ñƒ ",-1))]),_:1},8,["onClick"])])]),_:1},8,["modelValue"]),x(o(ar),{modelValue:o(f),"onUpdate:modelValue":S[2]||(S[2]=q=>lt(f)?f.value=q:null),class:"max-w-md rounded-3xl p-5 text-center"},{default:M(({close:q})=>[u("div",xd,[S[12]||(S[12]=u("h4",{class:"text-base font-semibold text-foreground"},"ĞœĞ¾Ğ¹ QR",-1)),u("div",_d,[x(Lo,{value:o(y),size:220,level:"H"},null,8,["value"])]),u("p",kd,[S[10]||(S[10]=D(" UUID: ",-1)),u("span",$d,U(o(y)),1)]),x(o(oe),{variant:"outline",class:"w-full",onClick:q},{default:M(()=>[...S[11]||(S[11]=[D("Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ",-1)])]),_:1},8,["onClick"])])]),_:1},8,["modelValue"])],64)}}}),Sd=Object.assign(Cd,{__name:"Event[slug]BlocksState22QRQuest"}),Td={class:"flex items-center justify-between gap-3"},Pd={class:"mt-4 flex items-center gap-3"},Md={class:"min-w-0"},Ed={class:"mt-4 rounded-2xl border border-border bg-muted/30 p-3"},Rd={class:"text-[11px] font-semibold uppercase tracking-[0.18em] text-muted-foreground"},Ad={class:"mt-1.5 text-sm text-foreground"},Od=ce({__name:"SmartMatch",props:{slug:{default:""},match:{default:null},fallbackTargetUuid:{default:""}},emits:["waved"],setup(e,{emit:n}){const a=e,l=n,c=Xe(),m=Ge(),f=Q(0),h=Q(!1);let d=null;const g=w(()=>({id:0,uuid:a.fallbackTargetUuid.trim()||"00000000-0000-0000-0000-000000000000",username:"max",avatar_url:"",level:1})),_=w(()=>a.match?.target_user??g.value),v=w(()=>a.match?.compatibility_score?.trim()||"92%"),k=w(()=>{const F=(Array.isArray(a.match?.ice_breakers)?a.match?.ice_breakers??[]:[]).map(re=>re.trim()).filter(Boolean);return F.length?F.slice(0,4):["AI Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ñ‹","ĞœÑƒĞ·Ñ‹ĞºĞ°","Ğ¡Ñ‚Ğ°Ñ€Ñ‚Ğ°Ğ¿Ñ‹"]}),$=w(()=>_.value.username||"participant"),y=w(()=>$.value.slice(0,2).toUpperCase()),R=w(()=>_.value.uuid?.trim()||""),L=w(()=>a.slug.trim().length>0&&R.value.length>0),z=()=>{d&&(clearInterval(d),d=null)},K=()=>{z(),f.value=20,d=Da(()=>{f.value-=1,f.value<=0&&(f.value=0,z())},1e3)},B=w(()=>h.value?"ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ°...":f.value>0?`ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€ Ñ‡ĞµÑ€ĞµĞ· ${f.value}Ñ`:"Wave"),S=async()=>{if(h.value||f.value>0)return;h.value=!0;let q=!1;if(L.value)try{await c.apiFetch(`/api/v1/events/${encodeURIComponent(a.slug)}/wave/${encodeURIComponent(R.value)}`,{method:"POST",baseURL:Ie("/api/v1/events")}),q=!0}catch{q=!1}m.push({level:q?"success":"info",title:"Smart Match",message:q?`Ğ’Ğ¾Ğ»Ğ½Ğ° Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ ${$.value}.`:"Ğ¡Ğ¸Ğ³Ğ½Ğ°Ğ» Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ğ½ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾. Ğ”Ğ»Ñ API Ğ½ÑƒĞ¶ĞµĞ½ target uuid."}),h.value=!1,K(),l("waved",R.value)},O=()=>{R.value&&rr(`/u/${encodeURIComponent(R.value)}`)};return Lt(()=>{z()}),(q,F)=>(P(),ue(o(Ee),{class:"rounded-3xl border border-border p-4 sm:p-5"},{default:M(()=>[u("div",Td,[F[0]||(F[0]=u("div",null,[u("p",{class:"text-[11px] font-semibold uppercase tracking-[0.2em] text-muted-foreground"},"AI Recommendation"),u("h3",{class:"mt-1 text-base font-semibold text-foreground"},"Smart Match")],-1)),x(o(qe),{class:"bg-primary/10 text-primary"},{default:M(()=>[D(U(o(v)),1)]),_:1})]),u("div",Pd,[u("button",{type:"button",class:"rounded-full",onClick:O},[x(o(We),{class:"h-12 w-12 border border-border"},{default:M(()=>[x(o(ze),{src:o(_).avatar_url||"",alt:o($)},null,8,["src","alt"]),x(o(He),{class:"bg-primary/10 text-sm font-semibold text-primary"},{default:M(()=>[D(U(o(y)),1)]),_:1})]),_:1})]),u("div",Md,[u("button",{type:"button",class:"truncate text-left text-sm font-semibold text-foreground hover:underline",onClick:O},U(o($)),1),F[1]||(F[1]=u("p",{class:"text-xs text-muted-foreground"},"Ğ¡Ğ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ Ğ¿Ğ¾ Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑĞ°Ğ¼",-1))])]),u("div",Ed,[u("p",Rd,[x(o(ir),{class:"mr-1 inline h-3.5 w-3.5 align-[-2px]"}),F[2]||(F[2]=D(" Ice Breakers ",-1))]),u("p",Ad,U(o(k).join(" | ")),1)]),x(o(oe),{class:"mt-4 w-full gap-2",disabled:o(h)||o(f)>0,onClick:S},{default:M(()=>[o(h)?(P(),ue(o(La),{key:0,class:"h-4 w-4 animate-spin"})):(P(),ue(o(Ir),{key:1,class:"h-4 w-4"})),D(" "+U(o(B)),1)]),_:1},8,["disabled"])]),_:1}))}}),jd=Object.assign(Od,{__name:"Event[slug]BlocksState22SmartMatch"}),Ud={key:0,class:"fixed inset-0 z-50 overflow-hidden bg-background text-foreground"},Id={class:"mx-auto flex h-[100dvh] w-full max-w-6xl flex-col gap-3 overflow-hidden px-3 pb-3 pt-safe sm:px-4"},Dd={class:"flex shrink-0 items-center justify-between gap-3 pt-2"},Ld={class:"min-w-0"},Bd={class:"truncate text-lg font-semibold text-foreground"},Fd={class:"flex items-center justify-between gap-3"},Nd={class:"truncate text-xs font-semibold text-foreground"},Vd={class:"text-[11px] text-muted-foreground"},qd={class:"grid shrink-0 gap-3 lg:grid-cols-[minmax(0,1fr)_minmax(0,0.95fr)]"},Wd={class:"flex items-center gap-2 rounded-full bg-muted p-1"},zd={class:"mt-3 h-[calc(100%-3.25rem)] overflow-hidden"},Hd={class:"grid h-full gap-3 xl:grid-cols-2"},Gd={class:"h-full"},Qd=ce({__name:"live",props:{event:{}},setup(e){const n={GREEN:"#22c55e",RED:"#ef4444",BLUE:"#3b82f6",YELLOW:"#f59e0b",PURPLE:"#8b5cf6",Ğ—Ğ•Ğ›Ğ•ĞĞ«Ğ•:"#22c55e",ĞšĞ ĞĞ¡ĞĞ«Ğ•:"#ef4444",Ğ¡Ğ˜ĞĞ˜Ğ•:"#3b82f6",Ğ–Ğ•Ğ›Ğ¢Ğ«Ğ•:"#f59e0b",Ğ¤Ğ˜ĞĞ›Ğ•Ğ¢ĞĞ’Ğ«Ğ•:"#8b5cf6"},a=e,l=Xe(),c=ko(),m=Q("game"),f=Q(2),h=Q([]),d=Q(!1),g=Q("ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğ¹ Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³Ğ°..."),_=Q([]),v=w(()=>{const de=a.event?.state_payload;return!de||typeof de!="object"?null:de}),k=w(()=>v.value?.game_identity?.team?.trim()||"Ğ—Ğ•Ğ›Ğ•ĞĞ«Ğ•"),$=w(()=>v.value?.game_identity?.role?.trim()||"Ğ ĞĞ—Ğ’Ğ•Ğ”Ğ§Ğ˜Ğš"),y=w(()=>n[k.value.toUpperCase()]||"#22c55e"),R=w(()=>{const de=Number(v.value?.quest_status?.target_count);return!Number.isFinite(de)||de<=0?5:Math.floor(de)}),L=w(()=>v.value?.smart_match??null),z=w(()=>L.value?.target_user?.uuid?.trim()||""),K=w(()=>a.event?.participants_preview??[]),B=w(()=>{for(const de of K.value){const se=de;if(typeof se.uuid=="string"&&se.uuid.trim())return se.uuid.trim()}return""}),S=w(()=>z.value||B.value),O=w(()=>l.user?.uuid?.trim()||""),q=w(()=>[{rank:1,user_id:1,username:"max",full_name:"Max Volt",avatar_url:"",level:8,exp:1540,rank_delta:1,league_name:"Gold",is_highlighted:!1},{rank:2,user_id:2,username:"lina",full_name:"Lina V",avatar_url:"",level:7,exp:1490,rank_delta:0,league_name:"Gold",is_highlighted:!1},{rank:3,user_id:3,username:"teo",full_name:"Teo Byte",avatar_url:"",level:6,exp:1410,rank_delta:2,league_name:"Silver",is_highlighted:!1},{rank:4,user_id:77,username:"you",full_name:"Ğ¢Ñ‹",avatar_url:"",level:5,exp:1300,rank_delta:0,league_name:"Silver",is_highlighted:!0}]),F=w(()=>h.value.length?h.value:q.value),re=()=>{c.back()},ee=de=>{const se=de.slice(0,3),G=se.map(Z=>String(Z.user_id));if(_.value.length){const Z=se.find(ie=>!_.value.includes(String(ie.user_id)));if(Z){const ie=Z.full_name?.trim()||Z.username||"Player";g.value=`${ie} entered Top 3`,_.value=G;return}}if(se.length){const Z=se[0]?.full_name?.trim()||se[0]?.username||"Leader";g.value=`${Z} holds #1 | Top 3 updates every 12s`}_.value=G},H=async()=>{if(a.event?.id){d.value=!0;try{const se=await l.apiFetch("/api/v1/leaderboard",{baseURL:Ie("/api/v1/leaderboard"),query:{period:"weekly",event_id:a.event.id,limit:40}}),G=Array.isArray(se?.items)?se.items:[];h.value=G,ee(G)}catch{h.value.length||(g.value="Live ranking temporarily unavailable")}finally{d.value=!1}}},{pause:ve,resume:je}=Ba(()=>{H()},12e3,{immediate:!1});return Ue(()=>v.value?.quest_status?.scanned_count,de=>{const se=Number(de);Number.isFinite(se)&&(f.value=Math.max(0,Math.floor(se)))},{immediate:!0}),Ue(()=>a.event?.id,de=>{if(_.value=[],!de){ve();return}H(),je()},{immediate:!0}),Lt(()=>{ve()}),(de,se)=>e.event?(P(),I("div",Ud,[u("div",Id,[u("header",Dd,[u("div",Ld,[se[3]||(se[3]=u("p",{class:"text-[11px] font-semibold uppercase tracking-[0.2em] text-muted-foreground"},"State 2_2 - Inside",-1)),u("h1",Bd,U(e.event.title||"Event"),1)]),x(o(oe),{variant:"outline",size:"sm",class:"gap-2",onClick:re},{default:M(()=>[x(o(No),{class:"h-4 w-4"}),se[4]||(se[4]=D(" ĞĞ°Ğ·Ğ°Ğ´ ",-1))]),_:1})]),x(o(Ee),{class:"shrink-0 rounded-2xl border border-border px-3 py-2"},{default:M(()=>[u("div",Fd,[u("p",Nd,[x(o(Vo),{class:"mr-1.5 inline h-3.5 w-3.5 text-emerald-500 align-[-2px]"}),D(" "+U(o(g)),1)]),u("span",Vd,U(o(d)?"sync...":"live"),1)])]),_:1}),u("section",qd,[x(Mu,{slug:e.event.slug,team:o(k),role:o($),"team-color":o(y),"wave-target-uuid":o(S)},null,8,["slug","team","role","team-color","wave-target-uuid"]),x(Sd,{scanned:o(f),"onUpdate:scanned":se[0]||(se[0]=G=>lt(f)?f.value=G:null),target:o(R),"user-uuid":o(O),"team-color":o(y)},null,8,["scanned","target","user-uuid","team-color"])]),x(o(Ee),{class:"min-h-0 flex-1 overflow-hidden rounded-3xl border border-border p-3 sm:p-4"},{default:M(()=>[u("div",Wd,[u("button",{type:"button",class:Ze(["flex-1 rounded-full px-3 py-2 text-xs font-semibold uppercase tracking-[0.14em] transition",o(m)==="game"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"]),onClick:se[1]||(se[1]=G=>m.value="game")},[x(o(ir),{class:"mr-1 inline h-3.5 w-3.5 align-[-2px]"}),se[5]||(se[5]=D(" Game HUD ",-1))],2),u("button",{type:"button",class:Ze(["flex-1 rounded-full px-3 py-2 text-xs font-semibold uppercase tracking-[0.14em] transition",o(m)==="inside"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"]),onClick:se[2]||(se[2]=G=>m.value="inside")},[x(o(zo),{class:"mr-1 inline h-3.5 w-3.5 align-[-2px]"}),se[6]||(se[6]=D(" Participants ",-1))],2)]),u("div",zd,[Dt(u("div",Hd,[x(jd,{slug:e.event.slug,match:o(L),"fallback-target-uuid":o(S)},null,8,["slug","match","fallback-target-uuid"]),x(zu,{rows:o(F)},null,8,["rows"])],512),[[Rr,o(m)==="game"]]),Dt(u("div",Gd,[x(Ku,{slug:e.event.slug,participants:o(K),"fallback-wave-target-uuid":o(S)},null,8,["slug","participants","fallback-wave-target-uuid"])],512),[[Rr,o(m)==="inside"]])])]),_:1})])])):pe("",!0)}}),Yd=Object.assign(Qd,{__name:"Event[slug]BlocksState22Live"}),Jd={class:"rounded-2xl border border-white/28 bg-white/26 p-3 text-slate-900 shadow-[0_10px_36px_rgba(15,23,42,0.14)] backdrop-blur-xl transition dark:border-white/10 dark:bg-slate-900/45 dark:text-slate-100"},Kd={class:"mb-2 flex items-start justify-between gap-2"},Zd={class:"flex min-w-0 items-center gap-2"},Xd={class:"min-w-0"},ef={class:"truncate text-sm font-semibold"},tf={class:"text-[11px] uppercase tracking-[0.14em] text-slate-500 dark:text-slate-400"},rf={class:"relative"},af={key:0,class:"absolute right-0 top-9 z-20 min-w-[9rem] rounded-xl border border-white/30 bg-white/85 p-1 shadow-xl backdrop-blur-xl dark:border-white/10 dark:bg-slate-900/90"},nf={class:"whitespace-pre-line text-sm leading-relaxed"},sf=["src"],of={class:"mt-3 flex flex-wrap gap-2"},lf=["disabled","aria-label","onClick"],uf={class:"tabular-nums"},cf={key:1,class:"mt-3 rounded-xl border border-amber-400/35 bg-amber-300/12 p-2.5 dark:border-amber-500/30 dark:bg-amber-500/8"},df={class:"mt-2 flex justify-end gap-2"},ff=ce({__name:"WallMessage",props:{message:{},reacting:{type:Boolean,default:!1}},emits:["react","report"],setup(e,{emit:n}){const a=e,l=n,c=Ua({interval:6e4}),m=Ge(),f=Q(!1),h=Q(!1),d=Q(""),g=Q(!1),_=S=>S.split(/\s+/).filter(Boolean).slice(0,2).map(q=>q[0]?.toUpperCase()||"").join("")||"U",v=(S,O)=>{const q=new Date(S).getTime();if(!Number.isFinite(q))return"--";const F=Math.max(0,O.getTime()-q),re=Math.floor(F/1e3);if(re<5)return"now";if(re<60)return`${re}s ago`;const ee=Math.floor(re/60);if(ee<60)return`${ee}m ago`;const H=Math.floor(ee/60);return H<24?`${H}h ago`:`${Math.floor(H/24)}d ago`},k=w(()=>v(a.message.createdAt,c.value)),$=[{type:"fire",icon:"ğŸ”¥",label:"Fire",palette:["#f97316","#fb923c","#fdba74"]},{type:"heart",icon:"â¤ï¸",label:"Heart",palette:["#f43f5e","#fb7185","#fda4af"]},{type:"applaud",icon:"ğŸ‘",label:"Applaud",palette:["#06b6d4","#22d3ee","#67e8f9"]}],y=Q(null),R=Q(0),L=S=>{y.value=S,R.value+=1},z=S=>{l("react",{postId:a.message.id,reaction:S}),L(S)},K=async()=>{try{await navigator.clipboard.writeText(a.message.content),g.value=!0,m.push({level:"success",message:"Message copied.",ttlMs:2e3}),setTimeout(()=>{g.value=!1},900)}catch{m.push({level:"error",message:"Could not copy message.",ttlMs:2600})}finally{f.value=!1}},B=()=>{l("report",{postId:a.message.id,reason:d.value.trim()||"Inappropriate content"}),d.value="",h.value=!1,f.value=!1};return(S,O)=>(P(),I("article",Jd,[u("div",Kd,[u("div",Zd,[x(o(We),{class:"h-9 w-9 border border-white/40 dark:border-white/10"},{default:M(()=>[x(o(ze),{src:a.message.authorAvatar||"",alt:a.message.authorName},null,8,["src","alt"]),x(o(He),{class:"bg-slate-100 text-[11px] font-semibold text-slate-700 dark:bg-slate-800 dark:text-slate-200"},{default:M(()=>[D(U(_(a.message.authorName)),1)]),_:1})]),_:1}),u("div",Xd,[u("p",ef,U(a.message.authorName),1),u("p",tf,U(o(k)),1)])]),u("div",rf,[u("button",{type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/35 bg-white/45 text-slate-600 transition hover:bg-white/70 dark:border-white/10 dark:bg-slate-800/80 dark:text-slate-300 dark:hover:bg-slate-700/90","aria-label":"Open post actions",onClick:O[0]||(O[0]=q=>f.value=!o(f))},[x(o(Ho),{class:"h-4 w-4"})]),o(f)?(P(),I("div",af,[u("button",{type:"button",class:"flex w-full items-center gap-2 rounded-lg px-2 py-1.5 text-left text-xs font-medium transition hover:bg-slate-100 dark:hover:bg-slate-800",onClick:O[1]||(O[1]=q=>h.value=!0)},[x(o(Go),{class:"h-3.5 w-3.5"}),O[4]||(O[4]=D(" Report ",-1))]),u("button",{type:"button",class:"flex w-full items-center gap-2 rounded-lg px-2 py-1.5 text-left text-xs font-medium transition hover:bg-slate-100 dark:hover:bg-slate-800",onClick:K},[o(g)?(P(),ue(o(Qo),{key:0,class:"h-3.5 w-3.5"})):(P(),ue(o(Ko),{key:1,class:"h-3.5 w-3.5"})),O[5]||(O[5]=D(" Copy ",-1))])])):pe("",!0)])]),u("p",nf,U(a.message.content),1),a.message.imageUrl?(P(),I("img",{key:0,src:a.message.imageUrl,alt:"Wall image",loading:"lazy",class:"mt-3 max-h-64 w-full rounded-xl border border-white/30 object-cover dark:border-white/10"},null,8,sf)):pe("",!0),u("div",of,[(P(),I(be,null,Re($,q=>u("button",{key:`${a.message.id}-${q.type}`,type:"button",class:Ze(["relative inline-flex items-center gap-1.5 rounded-full border px-2.5 py-1 text-xs font-semibold transition disabled:cursor-not-allowed disabled:opacity-60",a.message.myReaction===q.type?"border-cyan-400/45 bg-cyan-400/20 text-cyan-700 dark:text-cyan-200":"border-white/35 bg-white/45 text-slate-700 hover:bg-white/70 dark:border-white/10 dark:bg-slate-800/78 dark:text-slate-200 dark:hover:bg-slate-700/85"]),disabled:a.reacting,"aria-label":q.label,onClick:F=>z(q.type)},[o(y)===q.type?(P(),I("span",{key:`burst-${q.type}-${o(R)}`,class:"pointer-events-none absolute inset-0"},[(P(),I(be,null,Re(7,F=>u("span",{key:F,class:"reaction-particle",style:ot(`--particle-angle:${F*51}deg`)},null,4)),64))])):pe("",!0),u("span",null,U(q.icon),1),u("span",uf,U(a.message.reactions[q.type]),1)],10,lf)),64))]),o(h)?(P(),I("div",cf,[Dt(u("textarea",{"onUpdate:modelValue":O[2]||(O[2]=q=>lt(d)?d.value=q:null),rows:"2",placeholder:"Reason for report...",class:"w-full resize-none rounded-lg border border-white/35 bg-white/70 px-2.5 py-2 text-xs text-slate-700 outline-none transition focus:border-amber-500/40 dark:border-white/10 dark:bg-slate-800/85 dark:text-slate-100 dark:focus:border-amber-400/40"},null,512),[[Oa,o(d)]]),u("div",df,[u("button",{type:"button",class:"rounded-lg border border-white/35 bg-white/65 px-2.5 py-1.5 text-xs font-medium transition hover:bg-white/80 dark:border-white/10 dark:bg-slate-800/75 dark:hover:bg-slate-700/85",onClick:O[3]||(O[3]=q=>h.value=!1)}," Cancel "),u("button",{type:"button",class:"rounded-lg border border-amber-500/40 bg-amber-500/18 px-2.5 py-1.5 text-xs font-semibold text-amber-800 transition hover:bg-amber-500/25 dark:text-amber-200",onClick:B}," Send Report ")])])):pe("",!0)]))}}),mf=Object.assign(jr(ff,[["__scopeId","data-v-ef818c3f"]]),{__name:"Event[slug]BlocksState31WallMessage"}),pf={class:"h-full overflow-hidden rounded-3xl border border-white/26 bg-white/14 shadow-[0_24px_54px_rgba(15,23,42,0.2)] backdrop-blur-2xl dark:border-white/10 dark:bg-slate-900/34"},vf={class:"h-full overflow-y-auto px-3 py-3 sm:px-4"},hf={key:0,class:"space-y-2.5"},gf={key:1,class:"rounded-2xl border border-rose-500/35 bg-rose-500/12 p-4 text-sm text-rose-800 dark:text-rose-200"},bf={key:2,class:"rounded-2xl border border-white/28 bg-white/25 p-6 text-center text-sm text-slate-700 dark:border-white/10 dark:bg-slate-800/45 dark:text-slate-300"},yf={key:3,class:"space-y-2.5"},wf=ce({__name:"CommunityWall",props:{messages:{},pending:{type:Boolean,default:!1},errorMessage:{default:""},isReacting:{type:Function,default:void 0}},emits:["react","report","retry"],setup(e,{emit:n}){const a=e,l=n,c=m=>a.isReacting?.(m)||!1;return(m,f)=>(P(),I("section",pf,[u("div",vf,[a.pending&&!a.messages.length?(P(),I("div",hf,[(P(),I(be,null,Re(5,h=>u("div",{key:h,class:"h-28 animate-pulse rounded-2xl border border-white/25 bg-white/30 dark:border-white/10 dark:bg-slate-800/50"})),64))])):a.errorMessage&&!a.messages.length?(P(),I("div",gf,[u("p",null,U(a.errorMessage),1),u("button",{type:"button",class:"mt-2 inline-flex rounded-lg border border-rose-500/40 bg-rose-500/14 px-3 py-1.5 text-xs font-semibold transition hover:bg-rose-500/24",onClick:f[0]||(f[0]=h=>l("retry"))}," Retry ")])):a.messages.length?(P(),I("div",yf,[(P(!0),I(be,null,Re(a.messages,h=>(P(),ue(mf,{key:h.id,message:h,reacting:c(h.id),onReact:f[1]||(f[1]=d=>l("react",d)),onReport:f[2]||(f[2]=d=>l("report",d))},null,8,["message","reacting"]))),128))])):(P(),I("div",bf," The wall is quiet right now. Drop the first message. "))])]))}}),xf=Object.assign(wf,{__name:"Event[slug]BlocksState31CommunityWall"}),_f={class:"sticky top-0 z-[90] px-3 pb-2 pt-[calc(env(safe-area-inset-top)+0.5rem)] sm:px-4 md:px-6"},kf={class:"mx-auto flex w-full max-w-5xl flex-wrap items-center gap-2 rounded-2xl border border-white/30 bg-white/16 px-3 py-2 text-slate-900 shadow-[0_10px_40px_rgba(15,23,42,0.18)] backdrop-blur-xl dark:border-white/10 dark:bg-slate-900/58 dark:text-slate-100"},$f={class:"inline-flex items-center gap-1.5 rounded-full border border-white/35 bg-white/45 px-2.5 py-1 text-xs dark:border-white/10 dark:bg-slate-800/75"},Cf={class:"font-mono font-semibold tabular-nums"},Sf={class:"inline-flex items-center gap-1.5 rounded-full border border-white/35 bg-white/45 px-2.5 py-1 text-xs dark:border-white/10 dark:bg-slate-800/75"},Tf={class:"font-mono font-semibold tabular-nums"},Pf={class:"ml-auto flex items-center gap-1.5"},Mf=ce({__name:"LiveStatusBar",props:{event:{}},setup(e){const n=e,a=Ua({interval:1e3}),l=v=>{if(!v)return null;const k=new Date(v).getTime();return Number.isFinite(k)?k:null},c=w(()=>{const v=l(n.event.occurrences?.[0]?.start_time);if(v!==null)return v;const k=l(n.event.created_at);return k!==null?k:Date.now()}),m=w(()=>{const v=l(n.event.occurrences?.[0]?.end_time);return v!==null?v:c.value+10800*1e3}),f=w(()=>Math.max(0,a.value.getTime()-c.value)),h=w(()=>Math.max(0,m.value-a.value.getTime())),d=v=>{const k=Math.max(0,Math.floor(v/1e3)),$=Math.floor(k/3600),y=Math.floor(k%3600/60),R=k%60,L=String($).padStart(2,"0"),z=String(y).padStart(2,"0"),K=String(R).padStart(2,"0");return`${L}:${z}:${K}`},g=w(()=>d(f.value)),_=w(()=>d(h.value));return(v,k)=>{const $=Ra;return P(),I("header",_f,[u("div",kf,[k[4]||(k[4]=$o('<div class="inline-flex items-center gap-2 rounded-full border border-rose-500/40 bg-rose-500/12 px-2.5 py-1"><span class="relative inline-flex h-2.5 w-2.5"><span class="absolute inline-flex h-full w-full animate-ping rounded-full bg-rose-500 opacity-65"></span><span class="relative inline-flex h-2.5 w-2.5 rounded-full bg-rose-500"></span></span><span class="text-[11px] font-black uppercase tracking-[0.18em] text-rose-600 dark:text-rose-300"> LIVE </span></div>',1)),u("div",$f,[k[0]||(k[0]=u("span",{class:"text-[10px] uppercase tracking-[0.16em] text-slate-500 dark:text-slate-300"},"Elapsed",-1)),u("span",Cf,U(o(g)),1)]),u("div",Sf,[k[1]||(k[1]=u("span",{class:"text-[10px] uppercase tracking-[0.16em] text-slate-500 dark:text-slate-300"},"To the end",-1)),u("span",Tf,U(o(_)),1)]),u("div",Pf,[x($,{to:"/discovery/map",class:"inline-flex items-center gap-1.5 rounded-full border border-white/35 bg-white/45 px-3 py-1.5 text-xs font-semibold text-slate-700 transition hover:bg-white/65 dark:border-white/10 dark:bg-slate-800/75 dark:text-slate-100 dark:hover:bg-slate-700/85"},{default:M(()=>[x(o(ai),{class:"h-3.5 w-3.5"}),k[2]||(k[2]=D(" Map ",-1))]),_:1}),x($,{to:"/discovery/vibes",class:"inline-flex items-center gap-1.5 rounded-full border border-white/35 bg-white/45 px-3 py-1.5 text-xs font-semibold text-slate-700 transition hover:bg-white/65 dark:border-white/10 dark:bg-slate-800/75 dark:text-slate-100 dark:hover:bg-slate-700/85"},{default:M(()=>[x(o(ir),{class:"h-3.5 w-3.5"}),k[3]||(k[3]=D(" Vibes ",-1))]),_:1})])])])}}}),Ef=Object.assign(Mf,{__name:"Event[slug]BlocksState31LiveStatusBar"}),Rf={class:"rounded-2xl border border-white/28 bg-white/20 p-2.5 shadow-[0_16px_42px_rgba(15,23,42,0.2)] backdrop-blur-2xl dark:border-white/10 dark:bg-slate-900/52"},Af={key:0,class:"mb-2.5 grid grid-cols-10 gap-1 rounded-xl border border-white/30 bg-white/35 p-2 dark:border-white/10 dark:bg-slate-800/75"},Of=["onClick"],jf={key:1,class:"mb-2.5 rounded-xl border border-emerald-500/35 bg-emerald-500/10 p-2"},Uf={class:"mb-1.5 flex items-center justify-between"},If={class:"text-xs font-medium text-emerald-800 dark:text-emerald-200"},Df=["src"],Lf={class:"flex items-end gap-1.5"},Bf=["disabled"],Ff=["disabled"],Nf=ce({__name:"WallInput",props:{submitting:{type:Boolean,default:!1}},emits:["submit"],setup(e,{emit:n}){const a=e,l=n,c=Xe(),m=Ge(),f=Q(null),h=Q(null),d=Q(""),g=Q(!1),_=Q(!1),v=Q(""),k=Q(null),$=["ğŸ”¥","â¤ï¸","ğŸ‘","ğŸ‰","ğŸš€","ğŸ¤","ğŸ™Œ","ğŸ˜","ğŸ’¬","âœ¨"],y=()=>{const F=f.value;F&&(F.style.height="0px",F.style.height=`${Math.min(F.scrollHeight,126)}px`)};Ue(d,()=>{y()}),Or(()=>{y()});const R=w(()=>a.submitting||_.value?!1:d.value.trim().length>0||!!k.value),L=F=>{d.value=`${d.value}${F}`,g.value=!1},z=()=>{h.value?.click()},K=F=>{if(typeof F=="string")return F.trim();if(!F||typeof F!="object")return"";const re=F,ee=[re.url,re.image_url,re.imageUrl,re.data?.url,re.data?.image_url];for(const H of ee)if(typeof H=="string"&&H.trim())return H.trim();return""},B=async F=>{const ee=F.target.files?.[0];if(ee){_.value=!0,v.value="";try{const H=new FormData;H.append("file",ee);const ve=await c.apiFetch("/api/v1/events/upload-image",{method:"POST",baseURL:Ie("/api/v1/events/upload-image"),body:H}),je=K(ve);if(!je)throw new Error("missing-url");k.value=je,v.value="Photo uploaded",m.push({level:"success",message:"Photo uploaded.",ttlMs:1800})}catch{v.value="Upload failed",m.push({level:"error",message:"Could not upload photo."})}finally{_.value=!1,h.value&&(h.value.value="")}}},S=()=>{k.value=null,v.value=""},O=()=>{if(!R.value)return;const F=d.value.trim()||"Shared a photo";l("submit",{content:F,imageUrl:k.value}),d.value="",g.value=!1,k.value=null,v.value="",y()},q=F=>{F.key==="Enter"&&(F.shiftKey||(F.preventDefault(),O()))};return(F,re)=>(P(),I("section",Rf,[o(g)?(P(),I("div",Af,[(P(),I(be,null,Re($,ee=>u("button",{key:ee,type:"button",class:"inline-flex h-7 w-7 items-center justify-center rounded-md text-base transition hover:bg-white/45 dark:hover:bg-slate-700/85",onClick:H=>L(ee)},U(ee),9,Of)),64))])):pe("",!0),o(k)?(P(),I("div",jf,[u("div",Uf,[u("p",If,U(o(v)||"Photo attached"),1),u("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-md border border-emerald-500/35 bg-emerald-500/12 text-emerald-700 transition hover:bg-emerald-500/20 dark:text-emerald-200","aria-label":"Remove photo",onClick:S},[x(o(Ia),{class:"h-3.5 w-3.5"})])]),u("img",{src:o(k),alt:"Uploaded preview",class:"max-h-40 w-full rounded-lg border border-emerald-500/30 object-cover"},null,8,Df)])):pe("",!0),u("div",Lf,[u("button",{type:"button",class:"inline-flex h-9 w-9 shrink-0 items-center justify-center rounded-lg border border-white/30 bg-white/45 text-slate-700 transition hover:bg-white/70 dark:border-white/10 dark:bg-slate-800/75 dark:text-slate-200 dark:hover:bg-slate-700/85","aria-label":"Open emoji picker",onClick:re[0]||(re[0]=ee=>g.value=!o(g))},[x(o(Zo),{class:"h-4 w-4"})]),u("button",{type:"button",class:"inline-flex h-9 w-9 shrink-0 items-center justify-center rounded-lg border border-white/30 bg-white/45 text-slate-700 transition hover:bg-white/70 dark:border-white/10 dark:bg-slate-800/75 dark:text-slate-200 dark:hover:bg-slate-700/85 disabled:cursor-not-allowed disabled:opacity-60",disabled:o(_),"aria-label":"Upload photo",onClick:z},[x(o(Yo),{class:"h-4 w-4"})],8,Bf),Dt(u("textarea",{ref_key:"textareaRef",ref:f,"onUpdate:modelValue":re[1]||(re[1]=ee=>lt(d)?d.value=ee:null),rows:"1",placeholder:"Share your vibe...",class:"max-h-[7.75rem] min-h-[2.25rem] flex-1 resize-none rounded-lg border border-white/30 bg-white/45 px-3 py-2 text-sm text-slate-800 outline-none transition placeholder:text-slate-500 focus:border-cyan-400/45 dark:border-white/10 dark:bg-slate-800/75 dark:text-slate-100 dark:placeholder:text-slate-400 dark:focus:border-cyan-400/45",onKeydown:q},null,544),[[Oa,o(d)]]),u("button",{type:"button",class:"inline-flex h-9 w-9 shrink-0 items-center justify-center rounded-lg border border-cyan-500/35 bg-cyan-500/18 text-cyan-800 transition hover:bg-cyan-500/28 disabled:cursor-not-allowed disabled:opacity-60 dark:text-cyan-100",disabled:!o(R),"aria-label":"Send message",onClick:O},[x(o(Xo),{class:"h-4 w-4"})],8,Ff)]),u("input",{ref_key:"uploadInputRef",ref:h,type:"file",accept:"image/*",class:"hidden",onChange:B},null,544)]))}}),Vf=Object.assign(Nf,{__name:"Event[slug]BlocksState31WallInput"}),qf={key:0,class:"fixed inset-0 z-50 relative h-[100dvh] w-screen overflow-hidden"},Wf={class:"relative h-full w-full overflow-hidden text-foreground"},zf={class:"absolute inset-x-0 top-[calc(env(safe-area-inset-top)+4.65rem)] bottom-[calc(env(safe-area-inset-bottom)+7.85rem)] px-3 sm:px-4 md:px-6"},Hf={class:"h-full rounded-3xl border border-white/25 bg-white/20 p-3 backdrop-blur-xl dark:border-white/10 dark:bg-slate-900/45"},Gf={class:"space-y-2.5"},Qf={class:"pointer-events-none absolute bottom-[calc(env(safe-area-inset-bottom)+8rem)] right-3 z-[88] flex flex-col gap-2 sm:right-5"},Yf={class:"absolute inset-x-0 bottom-[calc(env(safe-area-inset-bottom)+4.1rem)] z-[87] px-3 sm:px-4 md:px-6"},Jf=ce({__name:"State3_1Orchestrator",props:{event:{}},setup(e){const n=e,a=Xe(),l=Ge(),c=w(()=>n.event?.slug?.trim()||""),m={limit:60,offset:0},f=w(()=>a.token?{Authorization:`Bearer ${a.token}`}:void 0),h=w(()=>`/api/v1/events/${encodeURIComponent(c.value)}/wall`),{data:d,pending:g,error:_,execute:v,refresh:k}=ja(h,{server:!1,immediate:!1,lazy:!0,watch:!1,query:m,headers:f,baseURL:Ie("/api/v1/events"),default:()=>({items:[],total:0,has_more:!1})},"$9ZY18K7fqK"),$=Q([]),y=Q(!1),R=Q(new Set),L=G=>{const Z=G.user.full_name?.trim(),ie=G.user.username?.trim();return Z||ie||`User ${G.user.id}`},z=G=>({id:G.id,authorName:L(G),authorAvatar:G.user.avatar_url?.trim()||null,createdAt:G.created_at,content:G.content,imageUrl:G.image_url?.trim()||null,reactions:{fire:G.reactions?.fire??0,heart:G.reactions?.heart??0,applaud:G.reactions?.applaud??0},myReaction:G.my_reaction??null}),K=G=>{const Z=Array.isArray(G?.items)?G.items:[];$.value=[...Z].sort((ie,W)=>new Date(W.created_at).getTime()-new Date(ie.created_at).getTime()).map(z)};Ue(d,G=>{K(G)},{immediate:!0});const B=async()=>{if(c.value)try{await v()}catch{}},S=async()=>{if(c.value)try{await k()}catch{}},{pause:O,resume:q}=Ba(()=>{S()},8e3,{immediate:!1});Ue(c,()=>{B()}),Or(()=>{B(),q()}),Lt(()=>{O()});const F=w(()=>_.value?"Could not load the live wall. Please retry.":""),re=(G,Z)=>{const ie=new Set(R.value);Z?ie.add(G):ie.delete(G),R.value=ie},ee=G=>R.value.has(G),H=(G,Z)=>{$.value=$.value.map(ie=>ie.id!==G?ie:{...ie,reactions:{fire:Z.reactions?.fire??ie.reactions.fire,heart:Z.reactions?.heart??ie.reactions.heart,applaud:Z.reactions?.applaud??ie.reactions.applaud},myReaction:Z.my_reaction??null})},ve=async G=>{if(!c.value||y.value)return;y.value=!0;const Z={content:G.content.trim()||"Shared a photo",image_url:G.imageUrl,type:"general",amount:0};try{const ie=await a.apiFetch(`/api/v1/events/${c.value}/wall`,{method:"POST",baseURL:Ie("/api/v1/events"),body:Z}),W=z(ie);$.value=[W,...$.value.filter(ae=>ae.id!==W.id)]}catch{l.push({level:"error",message:"Could not send message."})}finally{y.value=!1}},je=async G=>{if(c.value&&!ee(G.postId)){re(G.postId,!0);try{const Z=await a.apiFetch(`/api/v1/events/${c.value}/wall/${G.postId}/react`,{method:"POST",baseURL:Ie("/api/v1/events"),body:{type:G.reaction}});H(G.postId,Z)}catch{l.push({level:"error",message:"Could not update reaction.",ttlMs:2300})}finally{re(G.postId,!1)}}},de=async G=>{if(c.value)try{const Z=await a.apiFetch(`/api/v1/events/${c.value}/wall/${G.postId}/report`,{method:"POST",baseURL:Ie("/api/v1/events"),body:{reason:G.reason.trim()||void 0}});l.push({level:Z.already_reported?"info":"success",message:Z.already_reported?"You already reported this post.":"Report sent. Thanks.",ttlMs:2300})}catch{l.push({level:"error",message:"Could not report this post."})}},se=G=>{l.push({level:"info",title:G,message:"Coming Soon",ttlMs:2200})};return(G,Z)=>{const ie=Aa;return P(),ue(it,{appear:"","enter-active-class":"transition duration-250 ease-out","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition duration-180 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-1"},{default:M(()=>[n.event?(P(),I("div",qf,[Z[4]||(Z[4]=u("div",{class:"pointer-events-none absolute inset-0"},[u("div",{class:"absolute inset-0 bg-gradient-to-br from-slate-200 via-slate-100 to-slate-300 dark:from-slate-950 dark:via-slate-900 dark:to-black"}),u("div",{class:"absolute -top-16 left-[-120px] h-72 w-72 rounded-full bg-cyan-400/22 blur-[110px] dark:bg-cyan-500/20"}),u("div",{class:"absolute right-[-110px] top-20 h-72 w-72 rounded-full bg-rose-400/20 blur-[110px] dark:bg-fuchsia-500/20"}),u("div",{class:"absolute bottom-10 left-1/3 h-64 w-64 rounded-full bg-emerald-300/20 blur-[105px] dark:bg-emerald-500/20"})],-1)),u("div",Wf,[x(Ef,{event:n.event},null,8,["event"]),u("div",zf,[x(ie,null,{fallback:M(()=>[u("section",Hf,[u("div",Gf,[(P(),I(be,null,Re(4,W=>u("div",{key:W,class:"h-28 animate-pulse rounded-2xl bg-white/40 dark:bg-slate-800/55"})),64))])])]),default:M(()=>[x(xf,{messages:o($),pending:o(g),"error-message":o(F),"is-reacting":ee,onReact:je,onReport:de,onRetry:S},null,8,["messages","pending","error-message"])]),_:1})]),u("div",Qf,[u("button",{type:"button",class:"pointer-events-auto inline-flex items-center gap-1.5 rounded-full border border-white/35 bg-white/45 px-3 py-1.5 text-xs font-semibold text-slate-700 shadow-lg backdrop-blur-xl transition hover:bg-white/70 dark:border-white/10 dark:bg-slate-800/82 dark:text-slate-100 dark:hover:bg-slate-700/90",onClick:Z[0]||(Z[0]=W=>se("Buddy Radar"))},[x(o(qo),{class:"h-3.5 w-3.5"}),Z[2]||(Z[2]=D(" Buddy Radar ",-1))]),u("button",{type:"button",class:"pointer-events-auto inline-flex items-center gap-1.5 rounded-full border border-white/35 bg-white/45 px-3 py-1.5 text-xs font-semibold text-slate-700 shadow-lg backdrop-blur-xl transition hover:bg-white/70 dark:border-white/10 dark:bg-slate-800/82 dark:text-slate-100 dark:hover:bg-slate-700/90",onClick:Z[1]||(Z[1]=W=>se("Networking Deck"))},[x(o(si),{class:"h-3.5 w-3.5"}),Z[3]||(Z[3]=D(" Networking Deck ",-1))])]),u("div",Yf,[x(Vf,{submitting:o(y),onSubmit:ve},null,8,["submitting"])])])])):pe("",!0)]),_:1})}}}),Kf=Object.assign(Jf,{__name:"Event[slug]BlocksState31Orchestrator"}),Zf=ce({__name:"OrganizerBlock",props:{event:{}},setup(e){const n=e;return(a,l)=>(P(),ue(jo,{event:n.event},null,8,["event"]))}}),Xf=Object.assign(Zf,{__name:"Event[slug]BlocksSharedOrganizerBlock"}),em=ce({__name:"VenueWidget",props:{event:{},venue:{}},setup(e){const n=e;return(a,l)=>(P(),ue(ei,{event:n.event,venue:n.venue},null,8,["event","venue"]))}}),tm=Object.assign(em,{__name:"Event[slug]BlocksSharedVenueWidget"}),rm={class:"relative mx-auto w-full max-w-6xl pb-24"},am={key:0,class:"space-y-3 pt-4"},nm={key:1,class:"space-y-6 px-4 pb-28 pt-4 md:px-0"},sm={class:"fixed bottom-4 right-4 z-[200] hidden md:block"},om={class:"grid grid-cols-2 gap-2"},im="event_state2_1_cache_v1",tp=ce({__name:"index",setup(e){const n=or(),a=Xe(),l=Ma(),c=w(()=>String(n.params.slug??"").trim()),m=w(()=>`/api/v1/events/slug/${encodeURIComponent(c.value)}`),f=Q(null),h=Q(null),d=W=>!W||typeof W!="object"?null:W,g=W=>{if(!W)return null;const he=W.state_payload?.ticket_preview;if(!he||typeof he!="object")return null;const ge=he,Pe=typeof ge.uuid=="string"?ge.uuid.trim():"";if(!Pe)return null;const dt=typeof ge.ticket_type=="string"?ge.ticket_type.trim():"Standard",at=typeof ge.holder_name=="string"?ge.holder_name.trim():"Guest";return{uuid:Pe,ticket_type:dt||"Standard",holder_name:at||"Guest"}},_=W=>W?Xt(W.current_mode)==="check_in"?!0:!!g(W):!1,v=W=>{const ae=d(W);if(!ae)return null;const he=typeof ae.slug=="string"?ae.slug.trim():"",ge=typeof ae.title=="string"?ae.title.trim():"";return!he||!ge?null:{...ae,current_mode:Xt(ae.current_mode)}},k=W=>W?`${im}:${W}`:"",$=W=>{if(!W)return null;try{const ae=localStorage.getItem(k(W));if(!ae)return null;const he=JSON.parse(ae);if(!he||typeof he!="object")return null;const ge=typeof he.slug=="string"?he.slug.trim():"";return!ge||ge!==W?null:v(he.event)}catch{return null}},y=W=>{const ae=W.slug?.trim()||c.value;if(!ae||!_(W))return;const he={slug:ae,cached_at:new Date().toISOString(),event:W};try{localStorage.setItem(k(ae),JSON.stringify(he))}catch{}},{data:R,pending:L,error:z,refresh:K}=ja(m,{baseURL:Ie("/api/v1/events/slug"),key:()=>`event-hub-${c.value}`,server:!0,immediate:!1,watch:!1,default:()=>null,transform:W=>W?ci(W):null},"$QiVrFCqdhr"),B=w(()=>R.value??null),S=w(()=>B.value??h.value),O=w(()=>!B.value&&!!h.value),q=w(()=>f.value??Xt(S.value?.current_mode)),F=w(()=>q.value==="pre_event"),re=w(()=>S.value?.default_venue??S.value?.occurrences?.[0]?.venue??null),ee={check_in:ri,live:Wo,networking_game:Kf,afterparty:ti,done:Yd},H=w(()=>ee[q.value]??Jo),ve=[{label:"Pre",value:"pre_event"},{label:"Check-In",value:"check_in"},{label:"Live",value:"live"},{label:"Network",value:"networking_game"},{label:"Afterparty",value:"afterparty"},{label:"Done",value:"done"}],je=W=>{f.value=W},de=()=>{f.value=null},se=()=>{q.value==="check_in"&&(f.value="done")};Ue(c,()=>{f.value=null,h.value=$(c.value),c.value&&K()},{immediate:!0}),Ue(B,W=>{W&&a.isGuest&&l.trackView({eventId:W.id,eventSlug:W.slug||c.value,title:W.title||null}),W&&y(W)},{immediate:!0});const G=w(()=>{const W=S.value?.title?.trim();return W?`${W} | Smart Events`:"Event | Smart Events"}),Z=w(()=>{const W=S.value?.description?.trim();return W||"Event details, participants, and social actions in Smart Events."}),ie=w(()=>S.value?.images?.[0]?.url?.trim()||"");return Co({title:()=>G.value,description:()=>Z.value,ogTitle:()=>G.value,ogDescription:()=>Z.value,twitterTitle:()=>G.value,twitterDescription:()=>Z.value,ogImage:()=>ie.value||void 0,twitterCard:"summary_large_image"}),(W,ae)=>(P(),I("div",rm,[o(L)&&!o(S)?(P(),I("section",am,[...ae[1]||(ae[1]=[u("div",{class:"h-44 animate-pulse rounded-3xl bg-muted"},null,-1),u("div",{class:"h-36 animate-pulse rounded-3xl bg-muted"},null,-1),u("div",{class:"h-36 animate-pulse rounded-3xl bg-muted"},null,-1)])])):o(z)&&!o(S)?(P(),ue(o(Ee),{key:1,class:"mt-5 rounded-2xl border-destructive/25 bg-destructive/10 p-4 text-sm text-destructive"},{default:M(()=>[ae[2]||(ae[2]=D(" Failed to load event. ",-1)),u("button",{type:"button",class:"ml-2 underline",onClick:ae[0]||(ae[0]=()=>o(K)())},"Retry")]),_:1})):o(S)?o(S)?(P(),I(be,{key:3},[o(O)&&o(q)==="check_in"?(P(),ue(o(Ee),{key:0,class:"mt-4 rounded-2xl border-amber-500/30 bg-amber-500/10 p-3 text-xs text-amber-700"},{default:M(()=>[...ae[4]||(ae[4]=[D(" You are viewing an offline ticket copy. Keep internet enabled for live updates. ",-1)])]),_:1})):pe("",!0),o(F)?(P(),I("div",nm,[x(Nl,{event:o(S)},null,8,["event"]),x(fu,{event:o(S)},null,8,["event"]),x($u,{event:o(S)},null,8,["event"]),x(Al,{event:o(S)},null,8,["event"]),x(Xf,{event:o(S)},null,8,["event"]),x(tm,{event:o(S),venue:o(re)},null,8,["event","venue"]),x(Ql,{event:o(S),venue:o(re)},null,8,["event","venue"]),x(pi,{event:o(S)},null,8,["event"])])):(P(),ue(it,{key:2,mode:"out-in","enter-active-class":"transition duration-250 ease-out","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition duration-180 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-1"},{default:M(()=>[(P(),ue(So(o(H)),{key:o(q),event:o(S),onCheckedIn:se},null,40,["event"]))]),_:1}))],64)):pe("",!0):(P(),ue(o(Ee),{key:2,class:"mt-5 rounded-2xl p-5 text-sm text-muted-foreground"},{default:M(()=>[...ae[3]||(ae[3]=[D(" Event not found. ",-1)])]),_:1})),u("div",sm,[x(o(Ee),{class:"pointer-events-auto rounded-2xl border border-border bg-card/95 p-2 shadow-elevated backdrop-blur"},{default:M(()=>[ae[6]||(ae[6]=u("p",{class:"mb-2 px-1 text-[11px] font-semibold uppercase tracking-[0.16em] text-muted-foreground"}," Debug State ",-1)),u("div",om,[(P(),I(be,null,Re(ve,he=>x(o(oe),{key:he.value,size:"sm",variant:o(q)===he.value?"default":"outline",class:"min-w-[92px]",onClick:ge=>je(he.value)},{default:M(()=>[D(U(he.label),1)]),_:2},1032,["variant","onClick"])),64))]),x(o(oe),{variant:"ghost",size:"sm",class:"mt-2 w-full text-[11px] uppercase tracking-[0.14em]",onClick:de},{default:M(()=>[...ae[5]||(ae[5]=[D(" Use API Mode ",-1)])]),_:1})]),_:1})])]))}});export{tp as default};
