import{n as H,r,d as $,o as l,c as i,F as I,h as e,u as s,A as O,t as v,e as o,j as M,D as X,B as C,w as p,b as R,Y as z,f as w,R as q,V as U,H as E,S as Y,a6 as J,g as K}from"./BO0_OeXi.js";import{Q as F}from"./D4bSBMEb.js";import W from"./BP2r0KF4.js";import{c as A}from"./ChLhOB94.js";import{M as Z}from"./oEsFR4E0.js";import{G as ee}from"./D2UZSJW0.js";import{X as L}from"./kDTr-kfK.js";import{_ as te}from"./DlAUqK2U.js";const se=A("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const ae=A("qr-code",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),oe=H("ticket-flow",()=>{const T=r([{id:1,ticket_uuid:"b42c8f17-1d66-4fa2-9b1f-1a3d713efb91",event_title:"Signal Night",event_slug:"signal-night",start_time:"2026-02-14T19:00:00+03:00",venue:"Клуб Джао Да",city:"Москва",ticket_type:"VIP",status:"active"},{id:2,ticket_uuid:"a9fbf1db-2aa7-4f8b-8e66-6e2f4a6a3b2a",event_title:"Neon Streets",event_slug:"neon-streets",start_time:"2026-03-02T21:00:00+03:00",venue:"Main Stage",city:"Санкт-Петербург",ticket_type:"Танцпол",status:"active"},{id:3,ticket_uuid:"3f6ef68d-4f0b-4c5c-93dd-9fd25b9b3d45",event_title:"Garage Pulse",event_slug:"garage-pulse",start_time:"2025-12-01T20:00:00+03:00",venue:"Сцена 2",city:"Москва",ticket_type:"Танцпол",status:"used"}]),b=r(null),u=r(1),m=r(!1),x=r(""),y=r(""),g=r("default"),c=r(""),f=r(!1),k=n=>{b.value=n,n||(u.value=1)},_=n=>{u.value=Math.max(1,Math.min(10,n))};return{userTickets:T,selectedTicketId:b,quantity:u,isGift:m,giftEmail:x,giftMessage:y,wrappingStyle:g,referralCode:c,referralApplied:f,setSelectedTicket:k,setQuantity:_,incrementQuantity:()=>{_(u.value+1)},decrementQuantity:()=>{_(u.value-1)},setGift:n=>{m.value=n,n||(x.value="",y.value="",g.value="default")},setReferralCode:n=>{c.value=n,f.value=!1},applyReferralMock:()=>(f.value=c.value.trim().length>=4,f.value),markGifted:n=>{const h=T.value.find(G=>G.ticket_uuid===n);h&&(h.is_gifted=!0)},reset:()=>{b.value=null,u.value=1,m.value=!1,x.value="",y.value="",g.value="default",c.value="",f.value=!1}}}),le={class:"space-y-6 pb-24"},re={key:0,class:"rounded-2xl border border-border bg-card p-6 text-sm text-muted-foreground"},ie={key:1,class:"grid gap-4"},ne={class:"flex flex-wrap items-start justify-between gap-3"},de={class:"text-lg font-bold text-foreground"},ce={class:"mt-2 space-y-1 text-sm text-muted-foreground"},ue={class:"flex items-center gap-2"},fe={class:"flex items-center gap-2"},ve={class:"flex flex-wrap items-center justify-between gap-3"},pe={class:"text-base font-semibold text-foreground"},me={class:"flex flex-wrap items-center gap-2"},xe={key:1,class:"text-xs text-muted-foreground"},ye={class:"mt-4 flex flex-wrap items-center gap-4"},ge={class:"rounded-xl border border-border bg-background p-2"},_e={class:"text-xs text-muted-foreground"},be={class:"mt-1 break-all"},ke={class:"max-h-[90vh] w-full max-w-sm overflow-y-auto rounded-3xl border border-border bg-card p-6 shadow-elevated"},he={class:"flex items-center justify-between"},we={key:0,class:"mt-5 flex flex-col items-center gap-3 text-center"},Me={class:"rounded-2xl border border-border bg-background p-4"},Ce={class:"max-h-[90vh] w-full max-w-sm overflow-y-auto rounded-3xl border border-border bg-card p-6 shadow-elevated"},Te={class:"flex items-center justify-between"},Qe={class:"mt-4 space-y-3"},ze={key:0,class:"text-xs text-destructive"},Ge={key:1,class:"text-xs text-emerald-600"},Re=$({__name:"MyTicketsList",setup(T){const b=oe(),u=K(()=>b.userTickets),m=r(!1),x=r(null),y=r(!1),g=r(null),c=r(""),f=r(""),k=r(""),_=r(""),V=new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"long",hour:"2-digit",minute:"2-digit"}),S=d=>{const t=new Date(d);return Number.isNaN(t.getTime())?"Дата уточняется":V.format(t)},j=d=>d==="active"?"Active":"Used",D=d=>d==="active"?"bg-emerald-500/10 text-emerald-600":"bg-muted text-muted-foreground",N=d=>d.status==="active"&&!d.is_gifted,B=d=>{x.value=d,m.value=!0},Q=()=>{m.value=!1,x.value=null},n=d=>{g.value=d,c.value="",f.value="",k.value="",_.value="",y.value=!0},h=()=>{y.value=!1,g.value=null},G=()=>{if(g.value){if(!c.value.trim()){k.value="Укажи email получателя.";return}k.value="",b.markGifted(g.value.ticket_uuid),_.value="Билет отправлен другу!",setTimeout(()=>{h()},900)}};return(d,t)=>(l(),i(I,null,[e("div",le,[t[9]||(t[9]=e("header",{class:"space-y-2"},[e("h1",{class:"text-2xl font-bold text-foreground"},"Мои билеты"),e("p",{class:"text-sm text-muted-foreground"}," Здесь собраны все билеты. Покажи QR на входе или отправь другу. ")],-1)),s(u).length?(l(),i("div",ie,[(l(!0),i(I,null,O(s(u),a=>(l(),i("article",{key:a.ticket_uuid,class:"ticket-card card-surface rounded-2xl border border-dashed border-border p-4 shadow-soft"},[e("div",ne,[e("div",null,[t[2]||(t[2]=e("p",{class:"text-xs font-semibold uppercase tracking-[0.2em] text-muted-foreground"},"Событие",-1)),e("h2",de,v(a.event_title),1),e("div",ce,[e("p",ue,[o(s(se),{class:"h-4 w-4 text-primary"}),M(" "+v(S(a.start_time)),1)]),e("p",fe,[o(s(Z),{class:"h-4 w-4 text-primary"}),M(" "+v(a.venue)+", "+v(a.city),1)])])]),e("span",{class:X(["rounded-full px-3 py-1 text-xs font-semibold",D(a.status)])},v(j(a.status)),3)]),t[8]||(t[8]=e("div",{class:"ticket-divider"},null,-1)),e("div",ve,[e("div",null,[t[3]||(t[3]=e("p",{class:"text-xs font-semibold uppercase tracking-[0.2em] text-muted-foreground"},"Тип билета",-1)),e("p",pe,v(a.ticket_type),1)]),e("div",me,[o(s(C),{variant:"outline",size:"sm",class:"gap-2",onClick:P=>B(a)},{default:p(()=>[o(s(ae),{class:"h-4 w-4"}),t[4]||(t[4]=M(" Показать QR на весь экран ",-1))]),_:1},8,["onClick"]),N(a)?(l(),R(s(C),{key:0,variant:"outline",size:"sm",class:"gap-2",onClick:P=>n(a)},{default:p(()=>[o(s(ee),{class:"h-4 w-4"}),t[5]||(t[5]=M(" Подарить ",-1))]),_:1},8,["onClick"])):(l(),i("span",xe,v(a.is_gifted?"Подарен":"Недоступно"),1))])]),e("div",ye,[e("div",ge,[o(F,{value:a.ticket_uuid,size:96,level:"M"},null,8,["value"])]),e("div",_e,[t[6]||(t[6]=e("p",{class:"font-semibold text-foreground"},"UUID билета",-1)),e("p",be,v(a.ticket_uuid),1),t[7]||(t[7]=e("p",{class:"mt-2"},"Покажи QR-код на входе для быстрого сканирования.",-1))])])]))),128))])):(l(),i("div",re," Пока нет билетов. Самое время выбрать событие! "))]),(l(),R(U,{to:"body"},[o(z,{"enter-active-class":"transition-opacity duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:p(()=>[s(m)?(l(),i("div",{key:0,class:"fixed inset-0 z-50 bg-black/70",onClick:Q})):w("",!0)]),_:1}),o(z,{"enter-active-class":"transition-transform duration-300 ease-out","enter-from-class":"scale-95 opacity-0","enter-to-class":"scale-100 opacity-100","leave-active-class":"transition-transform duration-200 ease-in","leave-from-class":"scale-100 opacity-100","leave-to-class":"scale-95 opacity-0"},{default:p(()=>[s(m)?(l(),i("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center px-4 py-4",onClick:q(Q,["self"])},[e("div",ke,[e("div",he,[t[10]||(t[10]=e("h3",{class:"text-lg font-bold text-foreground"},"QR-код билета",-1)),o(s(C),{variant:"ghost",size:"icon",class:"rounded-full",onClick:Q},{default:p(()=>[o(s(L),{class:"h-5 w-5"})]),_:1})]),s(x)?(l(),i("div",we,[e("div",Me,[o(F,{value:s(x).ticket_uuid,size:220,level:"M"},null,8,["value"])]),t[11]||(t[11]=e("p",{class:"text-xs text-muted-foreground"},"Покажи QR на входе для сканирования.",-1))])):w("",!0)])])):w("",!0)]),_:1})])),(l(),R(U,{to:"body"},[o(z,{"enter-active-class":"transition-opacity duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:p(()=>[s(y)?(l(),i("div",{key:0,class:"fixed inset-0 z-50 bg-black/60",onClick:h})):w("",!0)]),_:1}),o(z,{"enter-active-class":"transition-transform duration-300 ease-out","enter-from-class":"translate-y-4 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition-transform duration-200 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-4 opacity-0"},{default:p(()=>[s(y)?(l(),i("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center px-4 py-4",onClick:q(h,["self"])},[e("div",Ce,[e("div",Te,[t[12]||(t[12]=e("h3",{class:"text-lg font-bold text-foreground"},"Подарить билет",-1)),o(s(C),{variant:"ghost",size:"icon",class:"rounded-full",onClick:h},{default:p(()=>[o(s(L),{class:"h-5 w-5"})]),_:1})]),e("div",Qe,[o(s(W),{modelValue:s(c),"onUpdate:modelValue":t[0]||(t[0]=a=>E(c)?c.value=a:null),type:"email",placeholder:"Email друга"},null,8,["modelValue"]),Y(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=a=>E(f)?f.value=a:null),rows:"3",placeholder:"Сообщение другу",class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[J,s(f)]]),s(k)?(l(),i("p",ze,v(s(k)),1)):w("",!0),s(_)?(l(),i("p",Ge,v(s(_)),1)):w("",!0)]),o(s(C),{class:"mt-4 w-full",disabled:!s(c).trim(),onClick:G},{default:p(()=>[...t[13]||(t[13]=[M(" Отправить ",-1)])]),_:1},8,["disabled"])])])):w("",!0)]),_:1})]))],64))}}),Ve=te(Re,[["__scopeId","data-v-af168fb1"]]),Se={class:"page-wrapper"},Fe=$({__name:"index",setup(T){return(b,u)=>(l(),i("div",Se,[o(Ve)]))}});export{Fe as default};
