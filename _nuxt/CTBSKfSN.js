import{d as K,v as J,o as s,c as n,h as o,F as q,A as G,e,w as a,b as L,y as W,D as P,t as k,_ as ee,a7 as Se,q as te,Y as R,f as z,R as de,j as _,u as t,B as x,V as ce,g as m,s as Z,i as Q,l as fe,K as je,G as Le,S as Ae,a6 as Be,a8 as ne,r as j,z as me,a9 as Te,Z as Ue,O as Ie}from"./BO0_OeXi.js";import{H as ve}from"./BjFBAuHz.js";import{c as U}from"./ChLhOB94.js";import{W as X,u as Fe}from"./BlQ4NI5O.js";import pe from"./D3_kkgb7.js";import he from"./Bwd13lVT.js";import ye from"./B8j67S1y.js";import{X as se}from"./kDTr-kfK.js";import{C as be}from"./CCEYP2gX.js";import{L as De}from"./BWQX0J8z.js";import{B as re}from"./DR4eY2n-.js";import{C as Ne}from"./BEi-9kO8.js";import{T as Oe}from"./ByIxft14.js";import"./D92jAQRS.js";const ge=U("compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const qe=U("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]);const xe=U("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);const Ee=U("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]);const ke=U("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]);const _e=U("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);const we=U("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const $e=U("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const ae=U("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const Ce=U("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),He={class:"fixed bottom-0 left-0 right-0 z-50 border-t border-border bg-white surface-soft shadow-elevated dark:bg-neutral-900 md:hidden","aria-label":"Нижняя навигация"},We={class:"flex h-[60px] items-center justify-around px-2"},Re={class:"relative flex h-8 w-8 items-center justify-center transition-transform duration-150 group-active:scale-90"},Ge=K({__name:"BottomNav",setup(A){const i=J(),d=[{id:"home",to:"/",icon:ve,label:"Home"},{id:"discovery",to:"/discovery/trends",icon:ge,label:"Discovery"},{id:"community",to:"/community/feed",icon:Ce,label:"Community"},{id:"wallet",to:"/profile/wallet",icon:X,label:"Wallet"},{id:"profile",to:"/profile/me",icon:ae,label:"Profile"}],v=w=>{const p=i.path;return w==="home"?p==="/":w==="discovery"?p.startsWith("/discovery"):w==="community"?p.startsWith("/community"):w==="wallet"?p.startsWith("/profile/wallet"):w==="profile"?p.startsWith("/profile")&&!p.startsWith("/profile/wallet"):!1};return(w,p)=>{const B=ee;return s(),n("nav",He,[o("div",We,[(s(),n(q,null,G(d,c=>e(B,{key:c.id,to:c.to,class:P(["group flex flex-1 flex-col items-center justify-center gap-1 text-[10px] font-medium transition-colors",v(c.id)?"text-primary":"text-muted-foreground"])},{default:a(()=>[o("span",Re,[(s(),L(W(c.icon),{class:P(["h-5 w-5",v(c.id)?"text-primary":"text-muted-foreground"]),fill:v(c.id)?"currentColor":"none","stroke-width":v(c.id)?1.5:2},null,8,["class","fill","stroke-width"]))]),o("span",null,k(c.label),1)]),_:2},1032,["to","class"])),64))])])}}}),Ve=Object.assign(Ge,{__name:"LayoutBottomNav"}),Me=()=>Se("color-mode").value,Pe={class:"flex shrink-0 items-center justify-between px-5 pt-4 pb-2"},Ke={class:"flex-1 overflow-y-auto px-4 py-2 space-y-6 [&::-webkit-scrollbar]:hidden [-ms-overflow-style:'none'] [scrollbar-width:'none']"},Qe={class:"space-y-1"},Xe={class:"space-y-1"},Ye={class:"shrink-0 border-t border-border bg-card/30 p-4 pb-8 backdrop-blur-sm"},Ze={key:0,class:"space-y-2"},Je={class:"min-w-0 flex-1"},et={class:"truncate text-sm font-semibold text-foreground"},tt={key:1,class:"space-y-3"},st={class:"flex items-center gap-3 px-2"},at={class:"flex h-10 w-10 items-center justify-center rounded-full bg-muted"},ot=K({__name:"MobileSidebar",props:{isOpen:{type:Boolean}},emits:["close"],setup(A,{emit:i}){const d=i,v=te(),w=J(),p=Me(),B=m(()=>!v.isAuthInitialized||v.isGuest),c=m(()=>v.user?.full_name||v.user?.username||"Гость"),M=m(()=>v.user?.avatar_url||""),b=m(()=>c.value.trim().charAt(0).toUpperCase()),f=m(()=>p.value==="dark"),I=()=>{p.preference=f.value?"light":"dark"},N=[{id:"home",label:"Главная",icon:ve,to:"/"},{id:"discovery",label:"Discovery",icon:ge,to:"/discovery/trends"},{id:"community",label:"Community",icon:Ce,to:"/community/feed"}],E=[{id:"wallet",label:"Кошелек",icon:X,to:"/profile/wallet"},{id:"settings",label:"Настройки",icon:we,to:"/profile/settings"},{id:"help",label:"Помощь",icon:be,to:"/help"}],V=T=>w.path===T,$=T=>w.path.startsWith(T),S=async()=>{await v.logout(),d("close"),await Z("/auth/login")};return(T,l)=>{const F=ee;return s(),L(ce,{to:"body"},[e(R,{"enter-active-class":"transition-opacity duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:a(()=>[A.isOpen?(s(),n("div",{key:0,class:"fixed inset-0 z-[150] bg-black/60 backdrop-blur-sm",onClick:l[0]||(l[0]=u=>d("close"))})):z("",!0)]),_:1}),e(R,{"enter-active-class":"transition-transform duration-300 ease-out","enter-from-class":"translate-x-full","enter-to-class":"translate-x-0","leave-active-class":"transition-transform duration-200 ease-in","leave-from-class":"translate-x-0","leave-to-class":"translate-x-full"},{default:a(()=>[A.isOpen?(s(),n("div",{key:0,class:"fixed inset-y-0 right-0 z-[200] flex h-[100dvh] w-full max-w-[300px] flex-col bg-background shadow-2xl sm:max-w-sm",onClick:l[6]||(l[6]=de(()=>{},["stop"]))},[o("div",Pe,[l[7]||(l[7]=o("span",{class:"text-xl font-bold tracking-tight text-foreground"},[_(" Smart"),o("span",{class:"text-primary"},"Events")],-1)),e(t(x),{variant:"ghost",size:"icon",class:"h-9 w-9 rounded-full hover:bg-muted",onClick:l[1]||(l[1]=u=>d("close"))},{default:a(()=>[e(t(se),{class:"h-5 w-5"})]),_:1})]),o("nav",Ke,[o("div",Qe,[l[8]||(l[8]=o("p",{class:"px-4 pb-2 text-[11px] font-semibold uppercase tracking-wider text-muted-foreground/70"}," Меню ",-1)),(s(),n(q,null,G(N,u=>e(F,{key:u.id,to:u.to,class:P(["flex items-center gap-3 rounded-xl px-4 py-3 text-sm font-medium transition-all active:scale-[0.98]",V(u.to)?"bg-primary text-primary-foreground shadow-sm":"text-foreground hover:bg-muted"]),onClick:l[2]||(l[2]=H=>d("close"))},{default:a(()=>[(s(),L(W(u.icon),{class:"h-5 w-5"})),_(" "+k(u.label),1)]),_:2},1032,["to","class"])),64))]),o("div",Xe,[l[9]||(l[9]=o("p",{class:"px-4 pb-2 text-[11px] font-semibold uppercase tracking-wider text-muted-foreground/70"}," Дополнительно ",-1)),(s(),n(q,null,G(E,u=>e(F,{key:u.id,to:u.to,class:P(["flex items-center gap-3 rounded-xl px-4 py-3 text-sm font-medium transition-colors hover:bg-muted active:scale-[0.98]",$(u.to)?"bg-primary/10 text-primary":"text-foreground"]),onClick:l[3]||(l[3]=H=>d("close"))},{default:a(()=>[(s(),L(W(u.icon),{class:P(["h-5 w-5",$(u.to)?"text-primary":"text-muted-foreground"])},null,8,["class"])),_(" "+k(u.label),1)]),_:2},1032,["to","class"])),64))])]),o("div",Ye,[e(t(x),{variant:"ghost",class:"mb-4 w-full justify-start gap-3 text-muted-foreground hover:text-foreground",onClick:I},{default:a(()=>[(s(),L(W(f.value?t($e):t(ke)),{class:"h-5 w-5"})),_(" "+k(f.value?"Включить светлую":"Включить тёмную"),1)]),_:1}),B.value?(s(),n("div",tt,[o("div",st,[o("div",at,[e(t(ae),{class:"h-5 w-5 text-muted-foreground"})]),l[12]||(l[12]=o("div",null,[o("p",{class:"text-sm font-medium"},"Вы гость"),o("p",{class:"text-xs text-muted-foreground"},"Войдите в аккаунт")],-1))]),e(F,{to:"/auth/login",onClick:l[5]||(l[5]=u=>d("close"))},{default:a(()=>[e(t(x),{class:"w-full gap-2 font-semibold shadow-lg shadow-primary/20"},{default:a(()=>[e(t(qe),{class:"h-4 w-4"}),l[13]||(l[13]=_(" Войти / Регистрация ",-1))]),_:1})]),_:1})])):(s(),n("div",Ze,[e(F,{to:"/profile/me",class:"flex items-center gap-3 rounded-xl border border-border bg-background p-3 transition hover:border-primary/50 active:scale-[0.98]",onClick:l[4]||(l[4]=u=>d("close"))},{default:a(()=>[e(t(pe),{class:"h-10 w-10 border border-border"},{default:a(()=>[e(t(he),{src:M.value},null,8,["src"]),e(t(ye),null,{default:a(()=>[_(k(b.value),1)]),_:1})]),_:1}),o("div",Je,[o("p",et,k(c.value),1),l[10]||(l[10]=o("p",{class:"truncate text-xs text-muted-foreground"},"Мой профиль",-1))])]),_:1}),e(t(x),{variant:"outline",class:"w-full justify-start gap-3 border-destructive/20 text-destructive hover:bg-destructive/10 hover:text-destructive active:scale-[0.98]",onClick:S},{default:a(()=>[e(t(xe),{class:"h-4 w-4"}),l[11]||(l[11]=_(" Выйти из аккаунта ",-1))]),_:1})]))])])):z("",!0)]),_:1})])}}}),lt=Object.assign(ot,{__name:"LayoutMobileSidebar"}),nt={class:"flex items-center gap-2"},rt={class:"relative flex-1"},it=["placeholder","onKeydown"],ut={key:0,class:"absolute left-0 right-0 top-[calc(100%+0.45rem)] z-50 overflow-hidden rounded-2xl border border-border bg-card shadow-elevated"},dt={key:0,class:"flex items-center gap-2 px-4 py-3 text-sm text-muted-foreground"},ct={key:1,class:"max-h-80 overflow-y-auto py-2"},ft=["onClick"],mt={class:"h-10 w-14 shrink-0 overflow-hidden rounded-lg bg-muted/60"},vt=["src","alt"],pt={key:1,class:"flex h-full w-full items-center justify-center text-[10px] text-muted-foreground"},ht={class:"line-clamp-2 text-sm font-medium text-foreground"},yt={key:2,class:"px-4 py-3 text-sm text-muted-foreground"},ie=3,bt=K({__name:"GlobalSearch",props:{placeholder:{default:"Поиск событий..."},autofocus:{type:Boolean,default:!1},showSubmitButton:{type:Boolean,default:!1},submitLabel:{default:"Search"}},emits:["submitted","selected"],setup(A,{emit:i}){const d=A,v=i,w=te(),p=j(null),B=j(null),c=j(""),M=j([]),b=j(!1),f=j(!1),I=j(!1),N=m(()=>c.value.trim()),E=m(()=>N.value.length>=ie),V=m(()=>b.value&&E.value&&(f.value||I.value||M.value.length>0));let $=null,S=0;const T=async g=>{const h=++S;f.value=!0,I.value=!1;try{const C=await w.apiFetch("/api/v1/discovery/search",{baseURL:me("/api/v1/discovery/search"),query:{q:g,semantic:!0,limit:8}});if(h!==S)return;M.value=C??[]}catch{if(h!==S)return;M.value=[]}finally{h===S&&(f.value=!1,I.value=!0)}};Q(N,g=>{if($&&(clearTimeout($),$=null),g.length<ie){M.value=[],I.value=!1,f.value=!1;return}$=setTimeout(()=>{T(g)},260)},{immediate:!1});const l=()=>{c.value="",M.value=[],I.value=!1,B.value?.focus()},F=async()=>{const g=N.value;g&&(b.value=!1,v("submitted",g),await Z(`/discovery/catalog?q=${encodeURIComponent(g)}`))},u=async g=>{b.value=!1,v("selected",g),await Z(`/e/${g.slug}`)},H=g=>{const h=g.target;!h||!p.value||p.value.contains(h)||(b.value=!1)};return fe(()=>{document.addEventListener("mousedown",H),d.autofocus&&je(()=>{B.value?.focus()})}),Le(()=>{document.removeEventListener("mousedown",H),$&&clearTimeout($)}),(g,h)=>(s(),n("div",{ref_key:"rootEl",ref:p,class:"relative w-full"},[o("div",nt,[o("div",rt,[e(t(_e),{class:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),Ae(o("input",{ref_key:"inputEl",ref:B,"onUpdate:modelValue":h[0]||(h[0]=C=>c.value=C),type:"search",placeholder:A.placeholder,class:"flex h-10 w-full rounded-md border border-input bg-background pl-9 pr-10 text-sm ring-offset-background transition-colors placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 [&::-webkit-search-cancel-button]:hidden",onFocus:h[1]||(h[1]=C=>b.value=!0),onKeydown:[ne(de(F,["prevent"]),["enter"]),h[2]||(h[2]=ne(C=>b.value=!1,["esc"]))]},null,40,it),[[Be,c.value]]),c.value?(s(),n("button",{key:0,type:"button",class:"absolute right-1.5 top-1/2 -translate-y-1/2 rounded-full p-1 text-muted-foreground transition-colors hover:text-foreground",onClick:l},[e(t(se),{class:"h-4 w-4"})])):z("",!0)]),A.showSubmitButton?(s(),L(t(x),{key:0,type:"button",class:"h-10 shrink-0 rounded-md px-4",disabled:!N.value,onClick:F},{default:a(()=>[_(k(A.submitLabel),1)]),_:1},8,["disabled"])):z("",!0)]),e(R,{"enter-active-class":"transition duration-150 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-120 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:a(()=>[V.value?(s(),n("div",ut,[f.value?(s(),n("div",dt,[e(t(De),{class:"h-4 w-4 animate-spin"}),h[3]||(h[3]=_(" Ищем события... ",-1))])):M.value.length?(s(),n("ul",ct,[(s(!0),n(q,null,G(M.value,C=>(s(),n("li",{key:C.id},[o("button",{type:"button",class:"flex w-full items-center gap-3 px-3 py-2 text-left transition-colors hover:bg-muted/60",onClick:oe=>u(C)},[o("div",mt,[C.main_image?(s(),n("img",{key:0,src:C.main_image,alt:C.title,class:"h-full w-full object-cover",loading:"lazy"},null,8,vt)):(s(),n("div",pt," event "))]),o("span",ht,k(C.title),1)],8,ft)]))),128))])):(s(),n("div",yt," Ничего не нашли. Нажми Enter для перехода в каталог. "))])):z("",!0)]),_:1})],512))}}),ue=Object.assign(bt,{__name:"SharedGlobalSearch"}),gt={class:"sticky top-0 z-40 w-full border-b border-border bg-card surface-soft shadow-soft"},xt={class:"mx-auto flex h-16 max-w-7xl items-center justify-between gap-2 px-3 sm:gap-4 sm:px-6 lg:px-8"},kt={class:"hidden items-center gap-6 text-sm font-medium md:flex"},_t={class:"mx-4 hidden max-w-md flex-1 md:flex"},wt={class:"hidden items-center gap-2 md:flex"},$t={class:"text-sm font-semibold"},Ct={key:0,class:"absolute right-1.5 top-1.5 flex h-4 w-4 items-center justify-center rounded-full bg-destructive text-[10px] font-bold text-white ring-2 ring-background"},Mt={key:1,class:"h-10 w-10 animate-pulse rounded-full bg-muted/70"},zt={key:3,class:"relative z-40"},St={class:"hidden text-sm font-medium lg:inline-block"},jt={class:"flex shrink-0 items-center gap-2 md:hidden"},Lt={key:0,class:"h-8 w-20 animate-pulse rounded-full bg-muted/70"},At={class:"truncate"},Bt={key:0,class:"absolute right-1.5 top-1.5 h-2 w-2 rounded-full bg-destructive ring-2 ring-background"},Tt={key:0,class:"fixed inset-x-0 bottom-0 z-[95] rounded-t-3xl border-t border-border bg-card p-4 shadow-elevated md:hidden"},Ut={class:"mb-3 flex items-center justify-between"},It=K({__name:"TheHeader",setup(A){const i=te(),d=Fe(),v=J(),w=Me(),p=m(()=>w.value==="dark"),B=j(!1),c=m(()=>B.value&&i.isAuthInitialized),M=j(!1),b=j(!1),f=j(!1),I=()=>{w.preference=p.value?"light":"dark"},N=[{name:"Discovery",to:"/discovery/trends"},{name:"Community",to:"/community/feed"}],{data:E,refresh:V}=Te("/api/v1/me/notifications/unread-count",{key:"unread-count",baseURL:me("/api/v1/me/notifications/unread-count"),$fetch:i.apiFetch,server:!1,lazy:!0,immediate:!1,default:()=>({count:0})},"$Tij_uSoUlR");Q(()=>c.value&&i.isFullUser,O=>{O?V():E.value={count:0}},{immediate:!0});const $=m(()=>c.value&&i.isFullUser?E.value?.count??0:0),S=m(()=>!c.value||i.isGuest),T=m(()=>i.user?.full_name||i.user?.username||"Гость"),l=m(()=>i.user?.avatar_url||""),F=m(()=>T.value.trim().charAt(0).toUpperCase()),u=m(()=>({path:"/auth/login",query:{redirect:v.fullPath}})),H=m(()=>({path:"/auth/register",query:{redirect:v.fullPath}})),g=[{label:"Мой профиль",to:"/profile/me",icon:ae},{label:"Настройки",to:"/profile/settings",icon:we},{label:"Помощь",to:"/help",icon:be}],h=m(()=>d.loaded?`${new Intl.NumberFormat("ru-RU").format(d.balance)} ₽`:"— ₽"),C=m(()=>{if(!d.loaded)return"—";const O=d.balance;return O>=1e3?`${(O/1e3).toFixed(1).replace(".0","")}k`:`${O}`}),oe=()=>{f.value=!f.value},Y=()=>{f.value=!1},ze=async()=>{Y(),await i.logout(),window.location.reload()};return fe(()=>{B.value=!0,i.isFullUser&&!d.loaded&&d.fetchWallet()}),Q(()=>i.isFullUser,O=>{O?d.fetchWallet():(d.clear(),f.value=!1)}),Q(()=>v.fullPath,()=>{f.value=!1}),(O,r)=>{const D=ee,le=Ue;return s(),n("header",gt,[o("div",xt,[e(D,{to:"/",class:"flex min-w-0 max-w-[calc(100vw-9.5rem)] items-center gap-2 font-bold tracking-tighter text-foreground sm:max-w-none"},{default:a(()=>[...r[9]||(r[9]=[o("span",{class:"flex h-8 w-8 shrink-0 items-center justify-center rounded-lg bg-primary/10 text-primary"}," ✨ ",-1),o("span",{class:"truncate text-base leading-none sm:text-xl"},"SmartEvents",-1)])]),_:1}),o("nav",kt,[(s(),n(q,null,G(N,y=>e(D,{key:y.to,to:y.to,class:"text-muted-foreground transition-colors hover:text-primary","active-class":"font-semibold text-foreground"},{default:a(()=>[_(k(y.name),1)]),_:2},1032,["to"])),64))]),o("div",_t,[e(ue,{class:"hidden md:block"})]),e(le,null,{default:a(()=>[o("div",wt,[t(i).isAuthInitialized&&!S.value?(s(),L(D,{key:0,to:"/profile/wallet"},{default:a(()=>[e(t(x),{variant:"secondary",size:"sm",class:"gap-2 rounded-full px-3"},{default:a(()=>[e(t(X),{class:"h-4 w-4 text-primary"}),o("span",$t,k(h.value),1)]),_:1})]),_:1})):z("",!0),e(t(x),{variant:"ghost",size:"icon",class:"rounded-full hover:bg-muted",onClick:I},{default:a(()=>[(s(),L(W(p.value?t($e):t(ke)),{class:"h-5 w-5"}))]),_:1}),e(D,{to:S.value?u.value:"/notifications"},{default:a(()=>[e(t(x),{variant:"ghost",size:"icon",class:"relative rounded-full hover:bg-muted"},{default:a(()=>[e(t(re),{class:"h-5 w-5"}),$.value>0?(s(),n("span",Ct,k($.value>9?"9+":$.value),1)):z("",!0)]),_:1})]),_:1},8,["to"]),t(i).isAuthInitialized?S.value?(s(),n(q,{key:2},[e(D,{to:u.value},{default:a(()=>[e(t(x),{size:"sm",class:"rounded-full"},{default:a(()=>[...r[10]||(r[10]=[_("Войти",-1)])]),_:1})]),_:1},8,["to"]),e(D,{to:H.value},{default:a(()=>[e(t(x),{variant:"outline",size:"sm",class:"rounded-full"},{default:a(()=>[...r[11]||(r[11]=[_("Регистрация",-1)])]),_:1})]),_:1},8,["to"])],64)):(s(),n("div",zt,[e(t(x),{variant:"ghost",class:"gap-2 px-2 hover:bg-muted",onClick:oe,onMouseenter:r[0]||(r[0]=y=>f.value=!0)},{default:a(()=>[e(t(pe),{class:"h-8 w-8 border-2 border-border"},{default:a(()=>[e(t(he),{src:l.value,alt:T.value},null,8,["src","alt"]),e(t(ye),{class:"bg-primary/10 text-sm font-semibold text-primary"},{default:a(()=>[_(k(F.value),1)]),_:1})]),_:1}),o("span",St,k(T.value),1),e(t(Ne),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),e(R,{"enter-active-class":"transition duration-150 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-100 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:a(()=>[f.value?(s(),n("div",{key:0,class:"absolute right-0 mt-2 w-56 rounded-2xl border border-border bg-card/95 p-2 shadow-elevated backdrop-blur",onMouseleave:r[1]||(r[1]=y=>f.value=!1)},[(s(),n(q,null,G(g,y=>e(D,{key:y.to,to:y.to,class:"flex items-center gap-2 rounded-xl px-3 py-2 text-sm font-medium text-foreground transition-colors hover:bg-muted",onClick:Y},{default:a(()=>[(s(),L(W(y.icon),{class:"h-4 w-4 text-muted-foreground"})),_(" "+k(y.label),1)]),_:2},1032,["to"])),64)),o("button",{type:"button",class:"mt-1 flex w-full items-center gap-2 rounded-xl px-3 py-2 text-sm font-medium text-destructive transition-colors hover:bg-destructive/10",onClick:ze},[e(t(xe),{class:"h-4 w-4"}),r[12]||(r[12]=_(" Выйти ",-1))])],32)):z("",!0)]),_:1})])):(s(),n("div",Mt))])]),_:1}),e(le,null,{default:a(()=>[o("div",jt,[t(i).isAuthInitialized?S.value?z("",!0):(s(),L(D,{key:1,to:"/profile/wallet",class:"flex max-w-[5.5rem] items-center gap-1 rounded-full border border-border bg-card px-2 py-1 text-[11px] font-semibold text-foreground"},{default:a(()=>[e(t(X),{class:"h-3.5 w-3.5 text-primary"}),o("span",At,k(C.value)+" ₽",1)]),_:1})):(s(),n("div",Lt)),e(t(x),{variant:"ghost",size:"icon",class:"rounded-full md:hidden",onClick:r[2]||(r[2]=y=>b.value=!0)},{default:a(()=>[e(t(_e),{class:"h-5 w-5"})]),_:1}),e(D,{to:S.value?u.value:"/notifications"},{default:a(()=>[e(t(x),{variant:"ghost",size:"icon",class:"relative rounded-full"},{default:a(()=>[e(t(re),{class:"h-5 w-5"}),$.value>0?(s(),n("span",Bt)):z("",!0)]),_:1})]),_:1},8,["to"]),e(t(x),{variant:"ghost",size:"icon",class:"rounded-full",onClick:r[3]||(r[3]=y=>M.value=!0)},{default:a(()=>[e(t(Ee),{class:"h-6 w-6"})]),_:1})])]),_:1})]),e(lt,{"is-open":M.value,onClose:r[4]||(r[4]=y=>M.value=!1)},null,8,["is-open"]),f.value?(s(),n("div",{key:0,class:"fixed inset-0 z-30 hidden md:block",onClick:Y})):z("",!0),(s(),L(ce,{to:"body"},[e(R,{"enter-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:a(()=>[b.value?(s(),n("div",{key:0,class:"fixed inset-0 z-[90] bg-black/60 md:hidden",onClick:r[5]||(r[5]=y=>b.value=!1)})):z("",!0)]),_:1}),e(R,{"enter-active-class":"transition-transform duration-200 ease-out","enter-from-class":"translate-y-full","enter-to-class":"translate-y-0","leave-active-class":"transition-transform duration-200 ease-in","leave-from-class":"translate-y-0","leave-to-class":"translate-y-full"},{default:a(()=>[b.value?(s(),n("div",Tt,[o("div",Ut,[r[13]||(r[13]=o("p",{class:"text-sm font-semibold text-foreground"},"Поиск",-1)),e(t(x),{variant:"ghost",size:"icon",class:"h-8 w-8 rounded-full",onClick:r[6]||(r[6]=y=>b.value=!1)},{default:a(()=>[e(t(se),{class:"h-4 w-4"})]),_:1})]),e(ue,{autofocus:!0,"show-submit-button":!0,"submit-label":"Найти",onSubmitted:r[7]||(r[7]=y=>b.value=!1),onSelected:r[8]||(r[8]=y=>b.value=!1)})])):z("",!0)]),_:1})]))])}}}),Ft=Object.assign(It,{__name:"LayoutTheHeader"}),Dt={class:"min-h-screen bg-transparent text-inherit antialiased"},Nt={class:"pb-28 pt-4 px-4"},Jt=K({__name:"default",setup(A){return(i,d)=>(s(),n("div",Dt,[e(Ft),o("main",Nt,[Ie(i.$slots,"default")]),e(Ve),e(Oe)]))}});export{Jt as default};
