import{d as B,u as q,J as le,Q as ie,O as ue,j as r,g as xe,ae as se,G as _e,c as P,q as R,b as a,m as e,w as l,o as k,a as t,f as y,t as f,B as U,r as T,s as ae,k as L,C as I,W as he,a5 as ye,l as ce,T as X,e as D,n as de,F as H,p as Q,_ as we,z as ke,$ as $e,R as Se,K as re}from"./DIpL79ME.js";import{c as Ce}from"./gF2ZLa4d.js";import E from"./ktI8lQth.js";import j from"./BnfmgMFc.js";import W from"./DzV9VZSr.js";import K from"./D-ntXkt-.js";import Z from"./DR2O4vHs.js";import Ae from"./QaezlMZ8.js";import Ne from"./BFJbChZv.js";import me from"./CgaNsBb1.js";import{P as Pe}from"./DpkelGI7.js";import{S as ve}from"./NaR5TDkT.js";import{H as Ve}from"./CkZ00H9r.js";import{C as ne}from"./DTxndy0w.js";import{M as Me}from"./Dh-MwfXC.js";import{c as Ue}from"./Ck3zTzEc.js";import{_ as Te}from"./CNtae-L3.js";import{_ as Fe}from"./D94DbZNy.js";const ze=Ue("lock-keyhole",[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]]),Le={class:"flex items-center justify-between gap-2"},Ee={class:"mt-2 text-sm text-muted-foreground"},Be={class:"mt-3 grid gap-2"},oe=B({__name:"ActionPanel",props:{event:{},floating:{type:Boolean,default:!1}},setup(S){const w=S,$=q(),x=le(),i=ie(),g=ue(),{share:b,isSupported:_}=Ce(),c=r(()=>w.event),p=r(()=>{const F=c.value.is_participant??c.value.has_ticket??c.value.is_going;return typeof F=="boolean"?F:!!c.value.my_ticket}),d=r(()=>{const F=(w.event.tickets??[]).map(M=>Number(M.price)).filter(M=>Number.isFinite(M)&&M>0);return F.length?Math.min(...F):null}),m=r(()=>d.value!==null),h=r(()=>{const F=w.event.stats?.going_count;return typeof F=="number"&&F>0?F:0}),N=r(()=>d.value===null?"":new Intl.NumberFormat("ru-RU",{maximumFractionDigits:0}).format(d.value)),C=r(()=>p.value?"Ð£ Ð²Ð°Ñ ÐµÑÑ‚ÑŒ Ð±Ð¸Ð»ÐµÑ‚":m.value?"Ð¢Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ Ð±Ð¸Ð»ÐµÑ‚":"Ð’Ñ…Ð¾Ð´ Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ñ‹Ð¹"),n=T("idle"),s=T(null),v=T(null),z=()=>{s.value&&clearTimeout(s.value),v.value&&clearTimeout(v.value),s.value=null,v.value=null},V=()=>{n.value==="idle"&&(n.value="loading",z(),s.value=setTimeout(()=>{n.value="success",$.push({level:"success",title:"ÐžÐ¿Ð»Ð°Ñ‚Ð°",message:"ÐŸÐµÑ€ÐµÑ…Ð¾Ð´ Ðº Ð¾Ð¿Ð»Ð°Ñ‚Ðµ"}),v.value=setTimeout(()=>{n.value="idle"},1400)},900))},u=r(()=>{if(!p.value){if(n.value==="loading")return"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°...";if(n.value==="success")return"Ð£ÑÐ¿ÐµÑ…"}return p.value?"ÐœÐ¾Ð¹ Ð±Ð¸Ð»ÐµÑ‚":m.value?`ÐšÑƒÐ¿Ð¸Ñ‚ÑŒ Ð¾Ñ‚ ${N.value} â‚½`:"Ð—Ð°Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒÑÑ"}),o=r(()=>p.value?"Ð§Ð°Ñ‚ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ":"ÐŸÐ¾Ð´ÐµÐ»Ð¸Ñ‚ÑŒÑÑ"),A=r(()=>w.event.slug?.trim()||""),G=r(()=>A.value?`${window.location.origin}/e/${encodeURIComponent(A.value)}`:""),J=r(()=>({title:w.event.title?.trim()||"Ð¡Ð¾Ð±Ñ‹Ñ‚Ð¸Ðµ",text:w.event.description?.trim()||"Ð¡Ð¾Ð±Ñ‹Ñ‚Ð¸Ðµ Ð² Smart Events",url:G.value})),ee=()=>{$.push({level:"success",title:"ÐŸÐ¾Ð´ÐµÐ»Ð¸Ñ‚ÑŒÑÑ",message:"Ð¡ÑÑ‹Ð»ÐºÐ° ÑÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð°"})},Y=()=>{const F=navigator.maxTouchPoints>0,M=window.matchMedia?.("(pointer: coarse)").matches??!1,O=/Android|iPhone|iPad|iPod|Mobile|Opera Mini|IEMobile/i.test(navigator.userAgent);return F&&(M||O)},fe=()=>_.value&&Y(),pe=()=>{i.openAuthPrompt({id:"event-buy-ticket",route:g.fullPath,context:{eventSlug:A.value,source:"event-action-panel"}})},ge=async()=>{if(p.value){await ae("/tickets");return}if(x.isGuest){pe();return}V()},be=async()=>{const F=A.value;if(p.value){await ae(`/community?event=${encodeURIComponent(F)}`);return}const M=G.value;if(M){if(fe())try{await b(J.value);return}catch(O){if(O instanceof Error&&O.name==="AbortError")return}if(navigator.clipboard?.writeText)try{await navigator.clipboard.writeText(M),ee();return}catch{}$.push({level:"error",title:"ÐŸÐ¾Ð´ÐµÐ»Ð¸Ñ‚ÑŒÑÑ",message:"ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ ÑÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÑÑÑ‹Ð»ÐºÑƒ"})}},te=F=>{const M=F.detail;if(!M||M.id!=="event-buy-ticket")return;const O=typeof M.context?.eventSlug=="string"?M.context.eventSlug:"";O&&O!==A.value||V()};return xe(()=>{window.addEventListener(se,te)}),_e(()=>{z(),window.removeEventListener(se,te)}),(F,M)=>(k(),P("div",{class:R(S.floating?"fixed inset-x-0 bottom-0 z-50 border-t border-border bg-background/85 px-3 py-3 backdrop-blur":"")},[a(e(j),{class:"rounded-2xl border border-border p-4 shadow-soft"},{default:l(()=>[t("div",Le,[M[0]||(M[0]=t("p",{class:"text-[11px] font-semibold uppercase tracking-[0.16em] text-muted-foreground"}," Action Panel ",-1)),a(e(E),{variant:"secondary"},{default:l(()=>[y(f(e(C)),1)]),_:1})]),t("p",Ee," Ð’ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¸ ÑƒÐ¶Ðµ "+f(e(h))+" ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð². ",1),t("div",Be,[a(e(U),{class:R(["w-full",e(n)==="success"?"bg-emerald-500 text-white hover:bg-emerald-500/90":""]),disabled:e(n)!=="idle"&&!e(p),onClick:ge},{default:l(()=>[y(f(e(u)),1)]),_:1},8,["class","disabled"]),a(e(U),{variant:"outline",class:"w-full",onClick:be},{default:l(()=>[y(f(e(o)),1)]),_:1})])]),_:1})],2))}}),je={class:"space-y-4"},Ie={class:"space-y-2"},Re={class:"space-y-2"},De={class:"grid gap-2 sm:grid-cols-2"},Oe=B({__name:"BuddyCreateForm",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(S,{emit:w}){const $=S,x=w,i=q(),g=r({get:()=>$.modelValue,set:d=>x("update:modelValue",d)}),b=T("Ð¢Ð°ÐºÑÐ¸"),_=T("ÐŸÐ»Ð°Ð½Ð¸Ñ€ÑƒÑŽ Ð²Ñ‹ÐµÑ…Ð°Ñ‚ÑŒ Ð² 18:00, ÐµÑÑ‚ÑŒ ÑÐ²Ð¾Ð±Ð¾Ð´Ð½Ð¾Ðµ Ð¼ÐµÑÑ‚Ð¾."),c=()=>{g.value=!1},p=()=>{i.push({level:"success",title:"Buddy Finder",message:"ÐžÐ¿ÑƒÐ±Ð»Ð¸ÐºÐ¾Ð²Ð°Ð½Ð¾"}),c()};return(d,m)=>(k(),L(e(Ne),{modelValue:e(g),"onUpdate:modelValue":m[2]||(m[2]=h=>I(g)?g.value=h:null),class:"max-w-lg border-border bg-card text-foreground"},{default:l(()=>[t("div",je,[m[8]||(m[8]=t("div",null,[t("p",{class:"text-xs font-semibold uppercase tracking-[0.2em] text-muted-foreground"},"ÐÐ¾Ð²Ð°Ñ Ð·Ð°ÑÐ²ÐºÐ°"),t("h3",{class:"text-lg font-semibold text-foreground"},"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð·Ð°ÑÐ²ÐºÑƒ")],-1)),t("div",Ie,[m[4]||(m[4]=t("label",{class:"text-xs font-semibold uppercase tracking-[0.18em] text-muted-foreground"},"Ð¦ÐµÐ»ÑŒ",-1)),he(t("select",{"onUpdate:modelValue":m[0]||(m[0]=h=>I(b)?b.value=h:null),class:"h-10 w-full rounded-md border border-input bg-background px-3 text-sm text-foreground"},[...m[3]||(m[3]=[t("option",{value:"Ð¢Ð°ÐºÑÐ¸"},"Ð¢Ð°ÐºÑÐ¸",-1),t("option",{value:"Ð‘Ð°Ñ€"},"Ð‘Ð°Ñ€",-1),t("option",{value:"ÐÐµÑ‚Ð²Ð¾Ñ€ÐºÐ¸Ð½Ð³"},"ÐÐµÑ‚Ð²Ð¾Ñ€ÐºÐ¸Ð½Ð³",-1)])],512),[[ye,e(b)]])]),t("div",Re,[m[5]||(m[5]=t("label",{class:"text-xs font-semibold uppercase tracking-[0.18em] text-muted-foreground"},"Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ",-1)),a(e(Ae),{modelValue:e(_),"onUpdate:modelValue":m[1]||(m[1]=h=>I(_)?_.value=h:null),rows:"4"},null,8,["modelValue"])]),t("div",De,[a(e(U),{variant:"outline",onClick:c},{default:l(()=>[...m[6]||(m[6]=[y("ÐžÑ‚Ð¼ÐµÐ½Ð°",-1)])]),_:1}),a(e(U),{onClick:p},{default:l(()=>[...m[7]||(m[7]=[y("ÐžÐ¿ÑƒÐ±Ð»Ð¸ÐºÐ¾Ð²Ð°Ñ‚ÑŒ",-1)])]),_:1})])])]),_:1},8,["modelValue"]))}}),Ge={class:"flex items-center justify-between gap-2"},He={class:"mt-4"},qe={class:"mt-4 max-h-[60vh] space-y-2 overflow-y-auto pr-1"},Qe={class:"flex items-start gap-3"},We={class:"text-sm font-semibold text-foreground"},Ke={class:"text-xs text-muted-foreground"},Ze={class:"mt-1 text-xs text-muted-foreground"},Je=B({__name:"BuddyListSheet",props:{modelValue:{type:Boolean},event:{}},emits:["update:modelValue"],setup(S,{emit:w}){const $=S,x=w,i=T(""),g=T(new Set),b=()=>x("update:modelValue",!1),_=r(()=>$.event),c=r(()=>_.value.state_payload??null),p=["Ð¢Ð°ÐºÑÐ¸","Ð‘Ð°Ñ€","ÐÐµÑ‚Ð²Ð¾Ñ€ÐºÐ¸Ð½Ð³"],d=r(()=>{const C=Array.isArray(c.value?.buddy_preview)?c.value?.buddy_preview:[];return C.length?C.map((s,v)=>({id:String(s.request_id??v+1),name:s.user?.username?.trim()||`Guest ${v+1}`,intent:p[v%p.length]||"ÐÐµÑ‚Ð²Ð¾Ñ€ÐºÐ¸Ð½Ð³",message:s.message?.trim()||"Ð¥Ð¾Ñ‡Ñƒ Ð½Ð°Ð¹Ñ‚Ð¸ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸ÑŽ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿Ñ€Ð¸ÐµÑ…Ð°Ñ‚ÑŒ Ð²Ð¼ÐµÑÑ‚Ðµ.",avatar:s.user?.avatar_url||""})):(Array.isArray(_.value.participants_preview)?_.value.participants_preview:[]).map((s,v)=>({id:String(s.id??v+1),name:s.username?.trim()||`Guest ${v+1}`,intent:p[v%p.length]||"ÐÐµÑ‚Ð²Ð¾Ñ€ÐºÐ¸Ð½Ð³",message:"Ð¥Ð¾Ñ‡Ñƒ Ð½Ð°Ð¹Ñ‚Ð¸ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸ÑŽ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿Ñ€Ð¸ÐµÑ…Ð°Ñ‚ÑŒ Ð²Ð¼ÐµÑÑ‚Ðµ.",avatar:s.avatar_url||""}))}),m=r(()=>{const C=i.value.trim().toLowerCase();return C?d.value.filter(n=>n.name.toLowerCase().includes(C)):d.value}),h=C=>g.value.has(C),N=C=>{const n=new Set(g.value);n.has(C)?n.delete(C):n.add(C),g.value=n};return(C,n)=>(k(),L(ce,{to:"body"},[a(X,{"enter-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:l(()=>[S.modelValue?(k(),P("div",{key:0,class:"fixed inset-0 z-[70] bg-black/60",onClick:b})):D("",!0)]),_:1}),a(X,{"enter-active-class":"transition-transform duration-250 ease-out","enter-from-class":"translate-y-8 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition-transform duration-200 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-8 opacity-0"},{default:l(()=>[S.modelValue?(k(),P("div",{key:0,class:"fixed inset-0 z-[80] flex items-end justify-center px-4 pb-4",onClick:b},[a(e(j),{class:"w-full max-w-xl rounded-3xl border border-border bg-card p-5 shadow-2xl",onClick:n[1]||(n[1]=de(()=>{},["stop"]))},{default:l(()=>[t("div",Ge,[n[2]||(n[2]=t("h3",{class:"text-lg font-semibold text-foreground"},"Ð—Ð°ÑÐ²ÐºÐ¸ Buddy Finder",-1)),a(e(E),{variant:"secondary"},{default:l(()=>[y(f(e(m).length),1)]),_:1})]),t("div",He,[a(e(me),{modelValue:e(i),"onUpdate:modelValue":n[0]||(n[0]=s=>I(i)?i.value=s:null),placeholder:"ÐŸÐ¾Ð¸ÑÐº"},null,8,["modelValue"])]),t("div",qe,[(k(!0),P(H,null,Q(e(m),s=>(k(),P("div",{key:s.id,class:"flex items-start justify-between gap-3 rounded-2xl border border-border p-3"},[t("div",Qe,[a(e(W),{class:"mt-1 h-10 w-10 border border-border"},{default:l(()=>[a(e(K),{src:s.avatar,alt:s.name},null,8,["src","alt"]),a(e(Z),{class:"bg-primary/10 text-xs font-semibold text-primary"},{default:l(()=>[y(f(s.name.charAt(0).toUpperCase()),1)]),_:2},1024)]),_:2},1024),t("div",null,[t("p",We,f(s.name),1),t("p",Ke,"Ð¦ÐµÐ»ÑŒ: "+f(s.intent),1),t("p",Ze,f(s.message),1)])]),a(e(U),{variant:"outline",size:"sm",onClick:v=>N(s.id)},{default:l(()=>[y(f(h(s.id)?"ðŸ‘‹":"ÐŸÐ¾Ð´Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ"),1)]),_:2},1032,["onClick"])]))),128))]),a(e(U),{variant:"ghost",class:"mt-4 w-full",onClick:b},{default:l(()=>[...n[3]||(n[3]=[y("Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ",-1)])]),_:1})]),_:1})])):D("",!0)]),_:1})]))}}),Xe={class:"mb-3 flex items-center justify-between gap-2"},Ye={class:"flex gap-3 overflow-x-auto pb-2"},et={class:"min-w-[230px] flex-shrink-0 rounded-2xl border border-border bg-card p-4 border-dashed bg-gradient-to-br from-primary/5 to-foreground/5"},tt={class:"flex h-full flex-col justify-between"},st={class:"space-y-2"},at={class:"inline-flex h-11 w-11 items-center justify-center rounded-full bg-primary/10 text-primary"},rt={class:"flex h-full flex-col justify-between"},nt={class:"flex items-start justify-between gap-3"},ot={class:"flex items-center gap-3"},lt={class:"text-sm font-semibold text-foreground"},it={class:"text-xs text-muted-foreground"},ut={key:0,class:"min-w-[230px] flex-shrink-0 rounded-2xl border border-border bg-card/60 p-4"},ct={class:"flex h-full flex-col justify-between"},dt={class:"text-xs text-muted-foreground"},mt=3,vt=B({__name:"BuddyFinder",props:{event:{}},setup(S){const w=S,$=q(),x=["Ð˜Ñ‰Ñƒ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸ÑŽ","Ð˜Ñ‰Ñƒ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ","Ð˜Ð´Ñƒ Ð¿ÐµÑ€Ð²Ñ‹Ð¹ Ñ€Ð°Ð·","ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ Ðº Ð·Ð½Ð°ÐºÐ¾Ð¼ÑÑ‚Ð²Ð°Ð¼"],i=V=>x[V%x.length]??"Ð˜Ñ‰Ñƒ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸ÑŽ",g=r(()=>w.event),b=r(()=>g.value.state_payload??null),_=(V,u)=>{const o=Number.parseInt(String(V||"").replace(/[^\d]/g,""),10);return Number.isFinite(o)?Math.max(0,Math.min(100,o)):u},c=r(()=>{const V=Array.isArray(b.value?.buddy_preview)?b.value?.buddy_preview:[];return V.length?V.slice(0,12).map((o,A)=>({id:String(o.request_id??A),name:o.user?.username?.trim()||`Guest ${A+1}`,avatar:o.user?.avatar_url||"",intent:o.message?.trim()||i(A),match:_(o.compatibility_score,72+A%4*6)})):(Array.isArray(g.value.participants_preview)?g.value.participants_preview:[]).slice(0,12).map((o,A)=>({id:String(o.id??A),name:o.username?.trim()||`Guest ${A+1}`,avatar:o.avatar_url||"",intent:i(A),match:72+A%4*6}))}),p=r(()=>c.value.slice(0,mt)),d=r(()=>Math.max(c.value.length-p.value.length,0)),m=T(new Set),h=T(!1),N=T(!1),C=V=>m.value.has(V),n=V=>{const u=new Set(m.value);u.add(V),m.value=u},s=V=>{C(V)||(n(V),$.push({level:"success",title:"Buddy Finder",message:"Ð—Ð°ÑÐ²ÐºÐ° Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð°! (Mock)"}))},v=()=>{h.value=!0},z=()=>{N.value=!0};return(V,u)=>(k(),L(e(j),{class:"rounded-3xl border border-border p-5"},{default:l(()=>[t("div",Xe,[u[2]||(u[2]=t("h3",{class:"text-lg font-semibold text-foreground"},"Buddy Finder",-1)),a(e(E),{variant:"secondary"},{default:l(()=>[y(f(e(c).length)+" Ñ€ÑÐ´Ð¾Ð¼",1)]),_:1})]),t("div",Ye,[t("article",et,[t("div",tt,[t("div",st,[t("div",at,[a(e(Pe),{class:"h-5 w-5"})]),u[3]||(u[3]=t("div",null,[t("p",{class:"text-sm font-semibold text-foreground"},"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ ÑÐ²Ð¾ÑŽ Ð·Ð°ÑÐ²ÐºÑƒ"),t("p",{class:"text-xs text-muted-foreground"},"ÐÐ°Ð¹Ð´Ð¸ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸ÑŽ Ð·Ð°Ñ€Ð°Ð½ÐµÐµ")],-1))]),a(e(U),{variant:"secondary",size:"sm",class:"mt-4 w-full",onClick:v},{default:l(()=>[...u[4]||(u[4]=[y(" Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ ",-1)])]),_:1})])]),(k(!0),P(H,null,Q(e(p),o=>(k(),P("article",{key:o.id,class:"min-w-[230px] flex-shrink-0 rounded-2xl border border-border bg-card p-4"},[t("div",rt,[t("div",nt,[t("div",ot,[a(e(W),{class:"h-10 w-10 border border-border"},{default:l(()=>[a(e(K),{src:o.avatar,alt:o.name},null,8,["src","alt"]),a(e(Z),{class:"bg-primary/10 text-xs font-semibold text-primary"},{default:l(()=>[y(f(o.name.charAt(0).toUpperCase()),1)]),_:2},1024)]),_:2},1024),t("div",null,[t("p",lt,f(o.name),1),t("p",it,f(o.intent),1)])]),a(e(E),{variant:"outline"},{default:l(()=>[y(f(o.match)+"%",1)]),_:2},1024)]),a(e(U),{variant:"outline",size:"sm",class:"mt-3 w-full",disabled:C(o.id),onClick:A=>s(o.id)},{default:l(()=>[y(f(C(o.id)?"ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¾":"ÐŸÐ¾Ð·Ð´Ð¾Ñ€Ð¾Ð²Ð°Ñ‚ÑŒÑÑ"),1)]),_:2},1032,["disabled","onClick"])])]))),128)),e(d)>0?(k(),P("article",ut,[t("div",ct,[t("div",null,[u[5]||(u[5]=t("p",{class:"text-sm font-semibold text-foreground"},"ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð²ÑÐµ",-1)),t("p",dt,"+"+f(e(d))+" Ð·Ð°ÑÐ²Ð¾Ðº",1)]),a(e(U),{variant:"outline",size:"sm",class:"mt-4 w-full",onClick:z},{default:l(()=>[...u[6]||(u[6]=[y(" Ð¡Ð¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ ",-1)])]),_:1})])])):D("",!0)]),a(Oe,{modelValue:e(h),"onUpdate:modelValue":u[0]||(u[0]=o=>I(h)?h.value=o:null)},null,8,["modelValue"]),a(Je,{modelValue:e(N),"onUpdate:modelValue":u[1]||(u[1]=o=>I(N)?N.value=o:null),event:S.event},null,8,["modelValue","event"])]),_:1}))}}),ft={class:"relative h-[320px] w-full sm:h-[380px]"},pt=["src","alt"],gt={key:1,class:"h-full w-full bg-gradient-to-br from-slate-900 via-slate-700 to-slate-800"},bt={class:"absolute left-4 top-4 z-10 inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/10 px-3 py-1 text-xs font-semibold text-white backdrop-blur-md"},xt=["aria-pressed"],_t={class:"absolute inset-x-0 bottom-0 space-y-4 p-5 text-white sm:p-7"},ht={class:"rounded-2xl bg-black/35 p-4 backdrop-blur-sm sm:p-5"},yt={class:"flex flex-wrap items-center gap-2"},wt={class:"mt-3 max-w-3xl break-words text-2xl font-bold tracking-tight sm:text-4xl"},kt={class:"mt-3 space-y-1 text-sm text-white/90"},$t={class:"flex items-start gap-2"},St={class:"min-w-0 break-words"},Ct={class:"flex items-start gap-2"},At={class:"min-w-0 break-words"},Nt=B({__name:"HeroBlock",props:{event:{}},setup(S){const w=S,$=le(),x=ie(),i=r(()=>w.event),g=r(()=>i.value.state_payload??null),b=r(()=>w.event.title?.trim()||"Event Hub"),_=r(()=>{const u=i.value.images?.[0]?.url?.trim()||"",o=i.value.main_image?.trim()||"";return u||o}),c=r(()=>{const u=i.value.occurrences?.[0]?.start_time;if(!u)return"Ð”Ð°Ñ‚Ð° ÑƒÑ‚Ð¾Ñ‡Ð½ÑÐµÑ‚ÑÑ";const o=new Date(u);return Number.isNaN(o.getTime())?"Ð”Ð°Ñ‚Ð° ÑƒÑ‚Ð¾Ñ‡Ð½ÑÐµÑ‚ÑÑ":new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"long",hour:"2-digit",minute:"2-digit"}).format(o)}),p=r(()=>{const u=i.value.default_venue?.name?.trim(),o=i.value.default_venue?.address?.trim();return u&&o?`${u} â€¢ ${o}`:u||o||"Ð›Ð¾ÐºÐ°Ñ†Ð¸Ñ ÑƒÑ‚Ð¾Ñ‡Ð½ÑÐµÑ‚ÑÑ"}),d=r(()=>{const u=i.value.tags?.find(A=>A?.name?.trim())?.name?.trim(),o=i.value.category?.trim();return u||o||"Smart Event"}),m=r(()=>{const u=i.value.age_restriction??i.value.age_limit;return typeof u=="number"&&Number.isFinite(u)?`${Math.round(u)}+`:"18+"}),h=r(()=>{const u=g.value?.compatibility_score?.trim()||"";if(u){const A=Number.parseInt(u.replace(/[^\d]/g,""),10);return Number.isFinite(A)?`${Math.max(0,Math.min(100,A))}%`:u}const o=i.value.match_score??i.value.compatibility_percent;return typeof o=="number"&&Number.isFinite(o)?`${Math.max(0,Math.min(100,Math.round(o)))}%`:"88%"}),N=r(()=>`Ð¡Ð¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ð¾ÑÑ‚ÑŒ ${h.value}`),C=r(()=>{const u=(w.event.tickets??[]).map(o=>Number(o.price)).filter(o=>Number.isFinite(o)&&o>0);return u.length?Math.min(...u):null}),n=r(()=>C.value===null?"Free":`ÐžÑ‚ ${new Intl.NumberFormat("ru-RU",{maximumFractionDigits:0}).format(C.value)} â‚½`),s=r(()=>{const u=i.value.occurrences?.[0]?.start_time;if(!u)return"";const o=new Date(u);if(Number.isNaN(o.getTime()))return"";const A=i.value.occurrences?.[0]?.end_time,G=A?new Date(A):new Date(o.getTime()+7200*1e3);if(Number.isNaN(G.getTime()))return"";const J=Y=>Y.toISOString().replace(/[-:]/g,"").replace(/\.\d{3}Z$/,"Z");return`https://calendar.google.com/calendar/render?${new URLSearchParams({action:"TEMPLATE",text:b.value,dates:`${J(o)}/${J(G)}`,details:w.event.description?.trim()||"Ð¡Ð¾Ð±Ñ‹Ñ‚Ð¸Ðµ Ð² Smart Events",location:p.value}).toString()}`}),v=()=>{s.value&&window.open(s.value,"_blank","noopener,noreferrer")},z=T(!1),V=()=>{z.value=!z.value,$.isGuest&&x.setFavorite(w.event.id,z.value)};return(u,o)=>(k(),L(e(j),{class:"relative overflow-hidden rounded-3xl border-0 p-0 shadow-elevated"},{default:l(()=>[t("div",ft,[e(_)?(k(),P("img",{key:0,src:e(_),alt:e(b),class:"h-full w-full object-cover object-center"},null,8,pt)):(k(),P("div",gt)),o[1]||(o[1]=t("div",{class:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent"},null,-1)),t("div",bt,[a(e(ve),{class:"h-4 w-4 text-amber-200"}),t("span",null,f(e(N)),1)]),t("button",{type:"button",class:"absolute right-4 top-4 z-10 inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/40 bg-black/40 text-white backdrop-blur transition hover:bg-black/60","aria-pressed":e(z),onClick:V},[a(e(Ve),{class:R(["h-4 w-4",e(z)?"fill-rose-500 text-rose-500":"text-white"])},null,8,["class"])],8,xt),t("div",_t,[t("div",ht,[t("div",yt,[a(e(E),{class:"border-white/25 bg-white/15 text-white"},{default:l(()=>[y(f(e(d)),1)]),_:1}),a(e(E),{class:"border-white/30 bg-black/40 text-white"},{default:l(()=>[y(f(e(m)),1)]),_:1}),a(e(E),{class:"border-white/25 bg-black/40 text-white"},{default:l(()=>[y(f(e(n)),1)]),_:1})]),t("h1",wt,f(e(b)),1),t("div",kt,[t("p",$t,[a(e(ne),{class:"mt-0.5 h-4 w-4 shrink-0"}),t("span",St,f(e(c)),1)]),t("p",Ct,[a(e(Me),{class:"mt-0.5 h-4 w-4 shrink-0"}),t("span",At,f(e(p)),1)])]),a(e(U),{variant:"outline",size:"sm",class:"mt-4 h-10 gap-2 border-white/30 bg-white/10 px-4 text-white backdrop-blur hover:bg-white/20",disabled:!e(s),onClick:v},{default:l(()=>[a(e(ne),{class:"h-4 w-4"}),o[0]||(o[0]=y(" Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð² ÐºÐ°Ð»ÐµÐ½Ð´Ð°Ñ€ÑŒ ",-1))]),_:1},8,["disabled"])])])])]),_:1}))}}),Pt={class:"space-y-4"},Vt={class:"whitespace-pre-line text-sm leading-relaxed text-muted-foreground"},Mt={class:"mt-6"},Ut={class:"flex items-center justify-between"},Tt={class:"text-xs text-muted-foreground"},Ft={class:"mt-3 grid grid-cols-2 gap-3 sm:grid-cols-3"},zt=B({__name:"InfoBlock",props:{event:{}},setup(S){const w=S,$=T(!1),x=r(()=>w.event),i=r(()=>x.value.state_payload??null),g=r(()=>x.value.full_text?.trim()||x.value.description?.trim()||"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ ÑÐºÐ¾Ñ€Ð¾ Ð¿Ð¾ÑÐ²Ð¸Ñ‚ÑÑ."),b=r(()=>{const _=Array.isArray(i.value?.partners)?i.value?.partners:[],c=Array.isArray(x.value.sponsors)?x.value.sponsors:[];return(_.length?_:c).map((d,m)=>({id:String(d.id??m+1),name:d.name?.trim()||""})).filter(d=>d.name.length>0)});return(_,c)=>(k(),L(e(j),{class:"rounded-3xl border border-border p-5"},{default:l(()=>[t("div",Pt,[c[1]||(c[1]=t("div",null,[t("p",{class:"text-xs font-semibold uppercase tracking-[0.2em] text-muted-foreground"},"Ðž ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¸"),t("h3",{class:"text-lg font-semibold text-foreground"},"Ð’Ð´Ð¾Ñ…Ð½Ð¾Ð²Ð»ÑÑŽÑ‰Ð°Ñ Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ñ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ")],-1)),t("div",{class:R(["overflow-hidden transition-all duration-300 ease-in-out",e($)?"max-h-[520px]":"max-h-24"])},[t("p",Vt,f(e(g)),1)],2),a(e(U),{variant:"outline",size:"sm",class:"w-fit",onClick:c[0]||(c[0]=p=>$.value=!e($))},{default:l(()=>[y(f(e($)?"Ð¡Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ":"Ð§Ð¸Ñ‚Ð°Ñ‚ÑŒ Ð´Ð°Ð»ÐµÐµ"),1)]),_:1})]),t("div",Mt,[t("div",Ut,[c[2]||(c[2]=t("h4",{class:"text-sm font-semibold text-foreground"},"ÐŸÐ°Ñ€Ñ‚Ð½ÐµÑ€Ñ‹",-1)),t("span",Tt,f(e(b).length)+" Ð±Ñ€ÐµÐ½Ð´Ð¾Ð²",1)]),t("div",Ft,[(k(!0),P(H,null,Q(e(b),p=>(k(),P("div",{key:p.id,class:"flex h-14 items-center justify-center rounded-2xl border border-border bg-muted/30 text-xs font-semibold text-muted-foreground"},f(p.name),1))),128))])])]),_:1}))}}),Lt={class:"flex items-center justify-between gap-2"},Et={class:"mt-3 flex items-center gap-3"},Bt={class:"min-w-0"},jt={class:"mt-4 grid gap-2 sm:grid-cols-2"},It=B({__name:"OrganizerBlock",props:{event:{}},setup(S){const w=S,$=q(),x=r(()=>w.event.organizer??null),i=r(()=>x.value?.name?.trim()||"Organizer"),g=r(()=>{if(!x.value)return null;const m=x.value.slug?.trim()||"";if(m)return`/organizer/${encodeURIComponent(m)}`;const h=x.value.id;return typeof h=="number"&&Number.isFinite(h)?`/organizer/${h}`:null}),b=r(()=>x.value?.avatar_url||x.value?.logo_url||""),_=r(()=>{const m=x.value?.rating;return typeof m=="number"&&Number.isFinite(m)?m.toFixed(1):"5.0"}),c=r(()=>i.value.charAt(0).toUpperCase()),p=T(!1),d=()=>{p.value=!0,$.push({level:"success",title:"Success",message:"Subscribed"})};return(m,h)=>{const N=we;return e(x)?(k(),L(e(j),{key:0,class:"rounded-3xl border border-border p-5"},{default:l(()=>[t("div",Lt,[h[0]||(h[0]=t("h3",{class:"text-base font-semibold text-foreground"},"ÐžÑ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ‚Ð¾Ñ€",-1)),a(e(E),{variant:"secondary"},{default:l(()=>[y("Rating "+f(e(_)),1)]),_:1})]),t("div",Et,[a(N,{to:e(g)||"#",class:R({"pointer-events-none":!e(g)})},{default:l(()=>[a(e(W),{class:"h-12 w-12 border border-border transition-opacity hover:opacity-80"},{default:l(()=>[a(e(K),{src:e(b),alt:e(i)},null,8,["src","alt"]),a(e(Z),{class:"bg-primary/10 text-sm font-semibold text-primary"},{default:l(()=>[y(f(e(c)),1)]),_:1})]),_:1})]),_:1},8,["to","class"]),t("div",Bt,[a(N,{to:e(g)||"#",class:R(["truncate text-sm font-semibold text-foreground hover:underline",{"pointer-events-none hover:no-underline":!e(g)}])},{default:l(()=>[y(f(e(i)),1)]),_:1},8,["to","class"]),h[1]||(h[1]=t("p",{class:"text-xs text-muted-foreground"},"ÐÐ²Ñ‚Ð¾Ñ€ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ",-1))])]),t("div",jt,[e(g)?(k(),L(N,{key:0,to:e(g),class:"w-full"},{default:l(()=>[a(e(U),{variant:"outline",class:"w-full"},{default:l(()=>[...h[2]||(h[2]=[y("ÐŸÑ€Ð¾Ñ„Ð¸Ð»ÑŒ",-1)])]),_:1})]),_:1},8,["to"])):(k(),L(e(U),{key:1,variant:"outline",disabled:"",class:"w-full"},{default:l(()=>[...h[3]||(h[3]=[y(" ÐŸÑ€Ð¾Ñ„Ð¸Ð»ÑŒ ÑÐºÑ€Ñ‹Ñ‚ ",-1)])]),_:1})),a(e(U),{variant:e(p)?"default":"outline",class:"w-full",disabled:e(p),onClick:d},{default:l(()=>[y(f(e(p)?"Ð’Ñ‹ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐ°Ð½Ñ‹":"ÐŸÐ¾Ð´Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ"),1)]),_:1},8,["variant","disabled"])])]),_:1})):D("",!0)}}}),Rt={class:"flex items-center justify-between gap-2"},Dt={class:"mt-4"},Ot={class:"mt-4 max-h-[60vh] space-y-2 overflow-y-auto pr-1"},Gt={class:"flex items-center gap-3"},Ht={class:"text-sm font-semibold text-foreground"},qt={class:"text-xs text-muted-foreground"},Qt=B({__name:"ParticipantsList",props:{modelValue:{type:Boolean},event:{}},emits:["update:modelValue"],setup(S,{emit:w}){const $=S,x=w,i=T(""),g=T(new Set),b=()=>x("update:modelValue",!1),_=r(()=>$.event),c=r(()=>_.value.state_payload??null),p=r(()=>c.value?.participants_summary??null),d=r(()=>{const n=p.value?.friends_preview;if(Array.isArray(n)&&n.length)return n;const s=_.value.participants_preview;return Array.isArray(s)&&s.length?s:[]}),m=r(()=>d.value.map((n,s)=>({id:String(n.id??s+1),name:n.username?.trim()||`Guest ${s+1}`,status:"Ð£Ñ‡Ð°ÑÑ‚Ð½Ð¸Ðº",avatar:n.avatar_url||""}))),h=r(()=>{const n=i.value.trim().toLowerCase();return n?m.value.filter(s=>s.name.toLowerCase().includes(n)):m.value}),N=n=>g.value.has(n),C=n=>{const s=new Set(g.value);s.has(n)?s.delete(n):s.add(n),g.value=s};return(n,s)=>(k(),L(ce,{to:"body"},[a(X,{"enter-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:l(()=>[S.modelValue?(k(),P("div",{key:0,class:"fixed inset-0 z-[70] bg-black/60",onClick:b})):D("",!0)]),_:1}),a(X,{"enter-active-class":"transition-transform duration-250 ease-out","enter-from-class":"translate-y-8 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition-transform duration-200 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-8 opacity-0"},{default:l(()=>[S.modelValue?(k(),P("div",{key:0,class:"fixed inset-0 z-[80] flex items-end justify-center px-4 pb-4",onClick:b},[a(e(j),{class:"w-full max-w-xl rounded-3xl border border-border bg-card p-5 shadow-2xl",onClick:s[1]||(s[1]=de(()=>{},["stop"]))},{default:l(()=>[t("div",Rt,[s[2]||(s[2]=t("h3",{class:"text-lg font-semibold text-foreground"},"Ð£Ñ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¸",-1)),a(e(E),{variant:"secondary"},{default:l(()=>[y(f(e(h).length),1)]),_:1})]),t("div",Dt,[a(e(me),{modelValue:e(i),"onUpdate:modelValue":s[0]||(s[0]=v=>I(i)?i.value=v:null),placeholder:"ÐŸÐ¾Ð¸ÑÐº"},null,8,["modelValue"])]),t("div",Ot,[(k(!0),P(H,null,Q(e(h),v=>(k(),P("div",{key:v.id,class:"flex items-center justify-between gap-3 rounded-2xl border border-border p-3"},[t("div",Gt,[a(e(W),{class:"h-10 w-10 border border-border"},{default:l(()=>[a(e(K),{src:v.avatar,alt:v.name},null,8,["src","alt"]),a(e(Z),{class:"bg-primary/10 text-xs font-semibold text-primary"},{default:l(()=>[y(f(v.name.charAt(0).toUpperCase()),1)]),_:2},1024)]),_:2},1024),t("div",null,[t("p",Ht,f(v.name),1),t("p",qt,f(v.status),1)])]),a(e(U),{variant:"outline",size:"sm",onClick:z=>C(v.id)},{default:l(()=>[y(f(N(v.id)?"ðŸ‘‹":"ÐŸÐ¾Ð´Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ"),1)]),_:2},1032,["onClick"])]))),128))]),a(e(U),{variant:"ghost",class:"mt-4 w-full",onClick:b},{default:l(()=>[...s[3]||(s[3]=[y("Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ",-1)])]),_:1})]),_:1})])):D("",!0)]),_:1})]))}}),Wt={class:"flex items-center justify-between gap-2"},Kt={class:"mt-4 flex flex-col items-start gap-3 sm:flex-row sm:items-center sm:gap-4"},Zt={class:"flex -space-x-3"},Jt={class:"text-sm leading-relaxed text-muted-foreground"},Xt={class:"font-semibold text-foreground"},Yt={class:"font-semibold text-foreground"},es={class:"font-semibold text-foreground"},ts=B({__name:"ParticipantsStrip",props:{event:{}},setup(S){const w=S,$=r(()=>w.event),x=r(()=>$.value.state_payload??null),i=r(()=>x.value?.participants_summary??null),g=r(()=>{const n=i.value?.friends_preview;if(Array.isArray(n)&&n.length)return n;const s=$.value.participants_preview;return Array.isArray(s)&&s.length?s:[]}),b=["Alex","Oleg","Mila","Roma","Nika"],_=r(()=>(g.value.length?g.value:b.map((s,v)=>({id:v+1,username:s,avatar_url:""}))).slice(0,5).map((s,v)=>({id:String(s.id??v),name:s.username?.trim()||b[v]||`Guest ${v+1}`,avatar:s.avatar_url||""}))),c=r(()=>{const n=_.value.map(s=>s.name).filter(s=>s.trim());return{first:n[0]||"Alex",second:n[1]||"Oleg"}}),p=r(()=>{const n=Number(i.value?.total_count??0);if(Number.isFinite(n)&&n>0)return Math.round(n);const s=Number(w.event.stats?.going_count??0);return Number.isFinite(s)&&s>0?Math.round(s):_.value.length}),d=r(()=>Math.max(p.value-2,0)),m=["bg-gradient-to-br from-amber-200 to-rose-200 text-slate-900","bg-gradient-to-br from-sky-200 to-indigo-200 text-slate-900","bg-gradient-to-br from-emerald-200 to-teal-200 text-slate-900","bg-gradient-to-br from-fuchsia-200 to-violet-200 text-slate-900","bg-gradient-to-br from-orange-200 to-yellow-200 text-slate-900"],h=n=>m[n%m.length],N=T(!1),C=()=>{N.value=!0};return(n,s)=>(k(),P(H,null,[a(e(j),{class:"rounded-2xl border border-border p-4 transition hover:border-primary/30 hover:bg-primary/5",role:"button",tabindex:"0",onClick:C},{default:l(()=>[t("div",Wt,[s[1]||(s[1]=t("h3",{class:"text-sm font-semibold text-foreground"},"Ð£Ñ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¸",-1)),a(e(E),{variant:"secondary"},{default:l(()=>[y(f(e(p)),1)]),_:1})]),t("div",Kt,[t("div",Zt,[(k(!0),P(H,null,Q(e(_),(v,z)=>(k(),L(e(W),{key:v.id,class:"h-10 w-10 border-2 border-white shadow-sm"},{default:l(()=>[a(e(K),{src:v.avatar,alt:v.name},null,8,["src","alt"]),a(e(Z),{class:R(["text-xs font-semibold",h(z)])},{default:l(()=>[y(f(v.name.charAt(0).toUpperCase()),1)]),_:2},1032,["class"])]),_:2},1024))),128))]),t("p",Jt,[s[2]||(s[2]=y(" Ð˜Ð´ÑƒÑ‚: ",-1)),t("span",Xt,f(e(c).first),1),s[3]||(s[3]=y(", ",-1)),t("span",Yt,f(e(c).second),1),s[4]||(s[4]=y(" Ð¸ ÐµÑ‰Ðµ ",-1)),t("span",es,f(e(d)),1)])])]),_:1}),a(Qt,{modelValue:e(N),"onUpdate:modelValue":s[0]||(s[0]=v=>I(N)?N.value=v:null),event:S.event},null,8,["modelValue","event"])],64))}}),ss={class:"mb-3 flex items-center justify-between gap-2"},as={class:"flex items-center gap-2"},rs={class:"relative"},ns={class:"text-sm leading-relaxed text-foreground"},os={key:0,class:"absolute inset-0 flex items-center justify-center rounded-2xl backdrop-blur-md"},ls={class:"mx-auto max-w-xs space-y-3 text-center"},is={class:"mx-auto inline-flex h-11 w-11 items-center justify-center rounded-full bg-card/80"},us={class:"text-sm font-medium text-foreground"},cs={class:"mt-4"},ds={class:"h-2 w-full overflow-hidden rounded-full bg-muted"},ms={class:"mt-2 text-xs text-muted-foreground"},vs=B({__name:"SecretContent",props:{event:{}},setup(S){const w=S,$=q(),x=r(()=>w.event),i=r(()=>x.value.state_payload??null),g=r(()=>i.value?.secret_content_progress??null),b=r(()=>{const s=Number(g.value?.target_referrals??3);return!Number.isFinite(s)||s<1?3:Math.round(s)}),_=T(0);ke(()=>[w.event.id,g.value?.current_referrals],()=>{const s=Number(g.value?.current_referrals??0);_.value=Number.isFinite(s)&&s>0?Math.round(s):0},{immediate:!0});const c=r(()=>!!g.value?.is_unlocked||_.value>=b.value),p=r(()=>!c.value),d=r(()=>{if(c.value)return 100;const s=_.value/b.value;return Math.max(0,Math.min(100,Math.round(s*100)))}),m=r(()=>x.value.full_text?.trim()||"Ð¡ÐµÐºÑ€ÐµÑ‚ Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ‚Ð¾Ñ€Ð°: Ð¿Ð¾ÑÐ»Ðµ Ñ€Ð°Ð·Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ¸ Ð¿Ð¾ÑÐ²Ð¸Ñ‚ÑÑ Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ñ‹Ð¹ Ñ‡Ð°Ñ‚ Ð¸ early-access ÐºÐ¾Ð´ Ð½Ð° afterparty."),h=r(()=>{const s=encodeURIComponent(w.event.slug?.trim()||"");return`${window.location.origin}/e/${s}?ref=buddies`}),N=()=>{const s=navigator.maxTouchPoints>0,v=window.matchMedia?.("(pointer: coarse)").matches??!1,z=/Android|iPhone|iPad|iPod|Mobile|Opera Mini|IEMobile/i.test(navigator.userAgent);return s&&(v||z)},C=()=>typeof navigator.share=="function"&&N(),n=async()=>{try{C()?await navigator.share({title:w.event.title||"SmartEvents",text:"ÐŸÐ¾Ð¹Ð´ÐµÑˆÑŒ ÑÐ¾ Ð¼Ð½Ð¾Ð¹ Ð½Ð° Ð¸Ð²ÐµÐ½Ñ‚?",url:h.value}):navigator.clipboard?.writeText?(await navigator.clipboard.writeText(h.value),$.push({level:"success",title:"ÐŸÐ¾Ð´ÐµÐ»Ð¸Ñ‚ÑŒÑÑ",message:"Ð¡ÑÑ‹Ð»ÐºÐ° ÑÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð°"})):$.push({level:"error",title:"ÐŸÐ¾Ð´ÐµÐ»Ð¸Ñ‚ÑŒÑÑ",message:"ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ ÑÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÑÑÑ‹Ð»ÐºÑƒ"})}catch(s){s instanceof Error&&s.name==="AbortError"||$.push({level:"error",title:"ÐŸÐ¾Ð´ÐµÐ»Ð¸Ñ‚ÑŒÑÑ",message:"ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¿Ð¾Ð´ÐµÐ»Ð¸Ñ‚ÑŒÑÑ ÑÑÑ‹Ð»ÐºÐ¾Ð¹"})}p.value&&(_.value=Math.min(b.value,_.value+1))};return(s,v)=>(k(),L(e(j),{class:"relative overflow-hidden rounded-3xl border border-border p-5"},{default:l(()=>[t("div",ss,[t("div",as,[a(e(ve),{class:"h-4 w-4 text-amber-500"}),v[0]||(v[0]=t("h3",{class:"text-base font-semibold text-foreground"},"Secret Content",-1))]),a(e(E),{variant:"secondary"},{default:l(()=>[y(f(e(_))+" / "+f(e(b)),1)]),_:1})]),t("div",rs,[t("div",{class:R(["rounded-2xl border border-border/80 bg-muted/20 p-4 transition duration-300",e(p)?"blur-[2px] saturate-50":""])},[t("p",ns,f(e(m)),1)],2),e(p)?(k(),P("div",os,[t("div",ls,[t("div",is,[a(e(ze),{class:"h-5 w-5 text-foreground"})]),t("p",us," ÐŸÑ€Ð¸Ð²ÐµÐ´Ð¸ "+f(e(b))+" Ð´Ñ€ÑƒÐ·ÐµÐ¹, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚ÑŒ ÑÐµÐºÑ€ÐµÑ‚ Ð¾Ñ‚ Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ‚Ð¾Ñ€Ð°. ",1),a(e(U),{size:"sm",onClick:n},{default:l(()=>[...v[1]||(v[1]=[y("ÐŸÑ€Ð¸Ð²ÐµÐ´Ð¸ Ð´Ñ€ÑƒÐ³Ð°",-1)])]),_:1})])])):D("",!0)]),t("div",cs,[t("div",ds,[t("div",{class:"h-full rounded-full bg-primary transition-all",style:$e({width:`${e(d)}%`})},null,4)]),t("p",ms,f(e(p)?`ÐžÑÑ‚Ð°Ð»Ð¾ÑÑŒ Ð´Ñ€ÑƒÐ·ÐµÐ¹: ${Math.max(e(b)-e(_),0)}`:"Ð¡ÐµÐºÑ€ÐµÑ‚ Ñ€Ð°Ð·Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½"),1)])]),_:1}))}}),fs={key:0,class:"space-y-6 px-4 pb-24 pt-4 md:px-0"},ps={class:"grid gap-6 lg:grid-cols-[minmax(0,1fr)_320px] lg:items-start"},gs={class:"w-full min-w-0 space-y-6"},bs={class:"hidden lg:sticky lg:top-6 lg:block"},Ls=B({__name:"PreEventView",props:{event:{}},setup(S){const w=S,$=ue(),x=r(()=>{const d=String($.params.slug??"").trim();return d||w.event?.slug?.trim()||""}),i=d=>Array.isArray(d)?d:[],g=d=>d?{...d,tags:i(d.tags),occurrences:i(d.occurrences),tickets:i(d.tickets),images:i(d.images),sponsors:i(d.sponsors),participants_preview:i(d.participants_preview),stats:d.stats??{going_count:0,likes_count:0},current_mode:d.current_mode||"pre_event"}:null,b=r(()=>g(w.event)),{data:_}=Se(()=>`state1-event-${x.value}`,async()=>{if(!x.value)return b.value;try{const d=await $fetch(`/api/v1/events/${encodeURIComponent(x.value)}`,{baseURL:re("/api/v1/events")});return g(d)}catch{try{const d=await $fetch(`/api/v1/events/slug/${encodeURIComponent(x.value)}`,{baseURL:re("/api/v1/events/slug")});return g(d)}catch{return b.value}}},{server:!0,lazy:!1,default:()=>b.value,watch:[x,()=>w.event?.id]}),c=r(()=>_.value??b.value),p=r(()=>c.value?.default_venue??c.value?.occurrences?.[0]?.venue??null);return(d,m)=>c.value?(k(),P("div",fs,[a(Nt,{event:c.value},null,8,["event"]),a(zt,{event:c.value},null,8,["event"]),a(oe,{class:"lg:hidden",event:c.value,floating:""},null,8,["event"]),a(ts,{event:c.value},null,8,["event"]),t("div",ps,[t("div",gs,[a(vs,{event:c.value},null,8,["event"]),a(vt,{event:c.value},null,8,["event"]),a(It,{event:c.value},null,8,["event"]),a(Fe,{event:c.value,venue:p.value},null,8,["event","venue"]),a(Te,{event:c.value,mode:"venue"},null,8,["event"])]),t("div",bs,[a(oe,{event:c.value},null,8,["event"])])])])):D("",!0)}});export{Ls as _};
