import{d as T,y as w,n as R,A as $,C as h,D as f,c as u,u as e,a,k as p,w as n,e as B,b as d,T as D,j as c,r as L,p as P,o as s,f as v,E as F,F as K,G as S,B as H,t as M}from"./DUSKV69B.js";import _ from"./DP146YdE.js";import{_ as Y}from"./CmMlg0ag.js";import{_ as z}from"./CMa1WE_x.js";import{_ as G}from"./CGjz-OaI.js";import{_ as W}from"./Crgfa1bh.js";import{_ as O}from"./1nR1X1P5.js";import{_ as U}from"./C2G2j7yf.js";import"./DpUTNxEX.js";import"./BoaTqSCC.js";import"./CTg2c_gH.js";import"./DvKiIxB7.js";import"./BiJQmSri.js";import"./DjkrQ1Kw.js";import"./vt-yVw7v.js";import"./DjmnqlvP.js";import"./CtYfy4gs.js";import"./XErQRTKJ.js";import"./BCRJ9o_f.js";import"./CXwJNjwb.js";import"./DlAUqK2U.js";import"./Drrgm-A_.js";import"./CyruGB4r.js";import"./C5svCJa4.js";import"./DT39DduS.js";import"./D6aTghvM.js";import"./YKlWW6_s.js";import"./CDWeW08I.js";import"./Cp4bn7EH.js";import"./n48iRo8_.js";import"./C94ZD2ww.js";import"./BybocLJ4.js";import"./CMKBuKYn.js";import"./Dg3Y_JdB.js";import"./WeTuH3Wz.js";import"./C6br2r2Y.js";import"./Do1pQ2aw.js";import"./CdDUnHgB.js";import"./DyhqVQhY.js";import"./CLLyjaf5.js";import"./CIcOc61n.js";import"./RV7DZdDJ.js";import"./BIl-Lyw3.js";import"./BkVHlTuu.js";import"./XYv9vNS7.js";import"./CMfQk-tH.js";const j={class:"relative mx-auto w-full max-w-6xl pb-24"},q={key:0,class:"space-y-3 pt-4"},J={class:"fixed bottom-4 right-4 z-[200] hidden md:block"},Q={class:"grid grid-cols-2 gap-2"},Oe=T({__name:"index",setup(X){const b=w(),E=R(),g=$(),o=c(()=>String(b.params.slug??"").trim()),i=L("PRE_EVENT"),{data:x,pending:y,error:C,refresh:A}=h(`event-hub-${o.value}`,async()=>o.value?await $fetch(`/api/v1/events/slug/${encodeURIComponent(o.value)}`,{baseURL:P("/api/v1/events/slug")}):null,{server:!0,lazy:!1}),l=c(()=>x.value??null),k={PRE_EVENT:U,CHECK_IN_WAY:G,CHECK_IN_DONE:z,LIVE_AFK:O,LIVE_ACTIVE:W,AFTERPARTY:Y},V=c(()=>k[i.value]),N=[{label:"Pre",value:"PRE_EVENT"},{label:"Way",value:"CHECK_IN_WAY"},{label:"Inside",value:"CHECK_IN_DONE"},{label:"Live (AFK)",value:"LIVE_AFK"},{label:"Live (Active)",value:"LIVE_ACTIVE"},{label:"Afterparty",value:"AFTERPARTY"}],I=r=>{i.value=r};return f(o,()=>{i.value="PRE_EVENT"}),f(l,r=>{!r||!E.isGuest||g.trackView({eventId:r.id,eventSlug:r.slug||o.value,title:r.title||null})},{immediate:!0}),(r,t)=>(s(),u("div",j,[e(y)&&!e(l)?(s(),u("section",q,[...t[1]||(t[1]=[a("div",{class:"h-44 animate-pulse rounded-3xl bg-muted"},null,-1),a("div",{class:"h-36 animate-pulse rounded-3xl bg-muted"},null,-1),a("div",{class:"h-36 animate-pulse rounded-3xl bg-muted"},null,-1)])])):e(C)?(s(),p(e(_),{key:1,class:"mt-5 rounded-2xl border-destructive/25 bg-destructive/10 p-4 text-sm text-destructive"},{default:n(()=>[t[2]||(t[2]=v(" Не удалось загрузить событие. ",-1)),a("button",{type:"button",class:"ml-2 underline",onClick:t[0]||(t[0]=()=>e(A)())},"Обновить")]),_:1})):e(l)?B("",!0):(s(),p(e(_),{key:2,class:"mt-5 rounded-2xl p-5 text-sm text-muted-foreground"},{default:n(()=>[...t[3]||(t[3]=[v(" Событие не найдено. ",-1)])]),_:1})),d(D,{mode:"out-in","enter-active-class":"transition duration-250 ease-out","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition duration-180 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-1"},{default:n(()=>[(s(),p(F(e(V)),{key:e(i),event:e(l)},null,8,["event"]))]),_:1}),a("div",J,[d(e(_),{class:"pointer-events-auto rounded-2xl border border-border bg-card/95 p-2 shadow-elevated backdrop-blur"},{default:n(()=>[t[4]||(t[4]=a("p",{class:"mb-2 px-1 text-[11px] font-semibold uppercase tracking-[0.16em] text-muted-foreground"}," Debug State ",-1)),a("div",Q,[(s(),u(K,null,S(N,m=>d(e(H),{key:m.value,size:"sm",variant:e(i)===m.value?"default":"outline",class:"min-w-[92px]",onClick:Z=>I(m.value)},{default:n(()=>[v(M(m.label),1)]),_:2},1032,["variant","onClick"])),64))])]),_:1})])]))}});export{Oe as default};
