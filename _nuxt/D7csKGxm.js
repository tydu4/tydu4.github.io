import{d as Fe,J as _t,n as g,g as xt,p as ht,y as kt,o as m,c as f,b as d,w,a,a7 as wt,u as n,E as re,f as ae,F as Et,D as Lt,t as y,U as Oe,q as ne,Z as Ie,e as E,T as B,r as p,s as se,j as _,G as Ct,ab as St,K as Re,k as Dt}from"./DXztqjCQ.js";/* empty css        */import{d as Tt,H as Nt}from"./DMGK1GPA.js";import{_ as Mt}from"./D-BRiSXT.js";import{u as zt}from"./DI-Yuxzy.js";import{S as Pt}from"./Bw-WnDok.js";import{M as Ot}from"./DJXsfEn5.js";import{U as It}from"./CQBiaOXw.js";import{C as Rt}from"./CMZl5Fal.js";import{P as Ft}from"./eZzJLh9S.js";import{c as Ae}from"./CG4HLnLt.js";import{X as At}from"./pIa8rBID.js";import{d as Ut}from"./Bs8T81Ad.js";import{_ as $t}from"./DlAUqK2U.js";import"./DTwSdy3O.js";import"./BVpqY5PZ.js";import"./BCI1LTVQ.js";import"./Cw-xcs6-.js";import"./BtdQ4RrR.js";import"./BBdJDuwr.js";import"./C-Eyoouw.js";import"./DczGufqd.js";import"./JpoSsffY.js";import"./Cu-fVLOj.js";import"./C2LYs-kw.js";const Vt=Ae("locate-fixed",[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Bt=Ae("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),jt={class:"relative h-[100dvh] w-screen overflow-hidden bg-background text-foreground"},Yt={class:"pointer-events-none absolute left-0 top-0 z-40 w-full p-2 pt-[calc(env(safe-area-inset-top)+0.5rem)] lg:w-auto lg:p-6 lg:pt-6"},Zt={class:"pointer-events-none absolute right-3 top-[calc(env(safe-area-inset-top)+4.75rem)] z-40 lg:right-6 lg:top-6"},qt={class:"pointer-events-auto flex flex-col items-end gap-2"},Ht={key:0,class:"w-[min(22rem,calc(100vw-1.5rem))] rounded-2xl border border-border/60 bg-card/80 p-4 text-foreground shadow-2xl backdrop-blur-md"},Gt={class:"mt-3 rounded-xl border border-border/70 bg-background/50 p-1"},Wt={class:"grid grid-cols-2 gap-1"},Kt={class:"mt-4 space-y-2"},Qt={class:"flex items-center gap-2 text-xs font-medium text-muted-foreground"},Jt={class:"flex flex-wrap gap-2"},Xt=["onClick"],eo={key:1,class:"text-[11px] text-muted-foreground"},to={class:"mt-4 block space-y-1.5"},oo={class:"flex items-center justify-between text-xs font-medium text-muted-foreground"},ro={class:"text-foreground"},ao={class:"pointer-events-none absolute bottom-[calc(env(safe-area-inset-bottom)+1rem)] right-4 z-40 lg:right-6"},no={class:"pointer-events-auto flex flex-col gap-2"},so={key:0,class:"pointer-events-none absolute left-1/2 top-[calc(env(safe-area-inset-top)+4.5rem)] z-40 -translate-x-1/2 rounded-full border border-border/70 bg-card/85 px-3 py-1.5 text-xs font-medium text-foreground backdrop-blur-md"},io={key:0,class:"pointer-events-none absolute left-4 top-[calc(env(safe-area-inset-top)+4.5rem)] z-40 max-w-[18rem] rounded-xl border border-destructive/40 bg-destructive/15 px-3 py-2 text-xs text-destructive backdrop-blur-md lg:left-6"},lo={key:0,class:"pointer-events-none absolute bottom-[calc(env(safe-area-inset-bottom)+1rem)] left-4 z-40 rounded-xl border border-destructive/40 bg-destructive/15 px-3 py-2 text-xs text-destructive backdrop-blur-md lg:left-6"},co={key:0,class:"pointer-events-none absolute inset-x-0 bottom-[calc(env(safe-area-inset-bottom)+1rem)] z-50 px-4"},uo={class:"pointer-events-auto mx-auto max-w-xl rounded-2xl border border-border/70 bg-card/90 shadow-2xl backdrop-blur-md"},po={class:"flex items-start gap-3 p-3"},mo=["src","alt"],vo={class:"min-w-0 flex-1"},fo={class:"text-[11px] font-semibold uppercase tracking-[0.16em] text-muted-foreground"},yo={class:"mt-1 line-clamp-2 text-sm font-semibold text-foreground"},bo={class:"mt-1 text-xs text-muted-foreground"},go={class:"text-xs text-muted-foreground"},_o={class:"mt-2 flex items-center gap-2"},xo=["disabled"],ho=11.5,x="discovery-events-source",z="discovery-events-clusters",ie="discovery-events-cluster-count",P="discovery-events-points-bg",O="discovery-events-points-icon",h="discovery-people-source",I="discovery-people-clusters",le="discovery-people-cluster-count",R="discovery-people-points-hit",ko=Fe({__name:"MapMainBlock",setup(Ue){const ce=[37.6173,55.7558],ue=[z,ie,P,O],$e=[I,le,R],Ve={version:8,sources:{"base-light":{type:"raster",tiles:["https://a.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png","https://b.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png","https://c.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png","https://d.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png"],tileSize:256,maxzoom:20,attribution:"&copy; OpenStreetMap contributors &copy; CARTO"}},layers:[{id:"base-light-layer",type:"raster",source:"base-light"}]},Be={version:8,sources:{"base-dark":{type:"raster",tiles:["https://a.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png","https://b.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png","https://c.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png","https://d.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png"],tileSize:256,maxzoom:20,attribution:"&copy; OpenStreetMap contributors &copy; CARTO"}},layers:[{id:"base-dark-layer",type:"raster",source:"base-dark"}]},je=[{value:"today",label:"Today"},{value:"tomorrow",label:"Tomorrow"},{value:"weekend",label:"Weekend"},{value:"custom",label:"Custom"}],Ye={music:"MU",tech:"TC",startup:"ST",food:"FD",art:"AR",wellness:"WL",nightlife:"NT",cinema:"CM",event:"EV"},Ze={music:"#fb7185",tech:"#22c55e",startup:"#f59e0b",food:"#f97316",art:"#8b5cf6",wellness:"#14b8a6",nightlife:"#3b82f6",cinema:"#ef4444",event:"#ec4899"},de=_t(),j=zt(),K=p(null),i=se(null),pe=se(null),Y=p(!1),L=se(new Map),l=p("events"),v=p("today"),C=p(""),k=p(10),Q=p(!0),J=p(!1),F=p(""),Z=p(""),A=p([]),U=p([]),c=p(null),S=p(null),b=p(!1),D=p(0);let $=null;const qe=_(()=>new Map(A.value.map(e=>[e.id,e]))),me=_(()=>new Map(U.value.map(e=>[e.id,e]))),He=_(()=>j.value==="dark"||j.value==="system"&&j.preference==="dark"),Ge=_(()=>!!c.value?.slug),V=e=>`https://i.pravatar.cc/160?img=${e%70+1}`,ve=()=>He.value?Be:Ve,We=_(()=>nt(c.value?.start_time??null)),Ke=_(()=>{const e=c.value;if(!e)return"Location pending";const t=e.venue_name?.trim(),o=e.city?.trim();return t&&o?`${t}, ${o}`:t||o||"Location pending"}),Qe=_(()=>{const e=c.value;if(!e)return"";const t=e.main_image?.trim();return t||`https://picsum.photos/seed/discovery-event-${e.id}/640/360`}),Je=_(()=>{const e=S.value;if(!e)return null;const t=e.full_name?.trim()||e.username?.trim()||`User #${e.id}`,o=Number(e.level??1),r=Number.isFinite(o)&&o>0?Math.round(o):1;return{id:String(e.id),uuid:e.uuid?.trim()||`user-${e.id}`,name:t,title:`Level ${r} networker`,avatar:e.avatar_url||V(e.id),badges:[`Level ${r}`,"Nearby"],bio:e.bio?.trim()||"Open for nearby networking right now.",contacts:{telegram:"@hidden",phone:"+0 000 000 00 00",email:"hidden@network.local"}}}),Xe=e=>String(e??"event").trim().toLowerCase()||"event",fe=e=>Xe(e.category??e.type??"event"),et=e=>{if(String(e.type??"").toLowerCase()==="buddy_request")return"BR";const o=fe(e);return Ye[o]??"EV"},tt=e=>Ze[e]??"#f97316",q=e=>{const t=new Date(e);return t.setHours(0,0,0,0),t},H=e=>{const t=new Date(e);return t.setHours(23,59,59,999),t},ot=e=>{if(!/^\d{4}-\d{2}-\d{2}$/.test(e))return null;const[t,o,r]=e.split("-").map(s=>Number(s));return!Number.isFinite(t)||!Number.isFinite(o)||!Number.isFinite(r)?null:new Date(t,o-1,r)},rt=()=>{const t=q(new Date),o=t.getDay(),r=o===6?0:(6-o+7)%7;t.setDate(t.getDate()+r);const s=new Date(t);return s.setDate(t.getDate()+1),{start_date:t.toISOString(),end_date:H(s).toISOString()}},at=()=>{if(l.value!=="events")return{};if(v.value==="today"){const e=new Date;return{start_date:q(e).toISOString(),end_date:H(e).toISOString()}}if(v.value==="tomorrow"){const e=new Date;return e.setDate(e.getDate()+1),{start_date:q(e).toISOString(),end_date:H(e).toISOString()}}if(v.value==="weekend")return rt();if(v.value==="custom"){const e=ot(C.value);return e?{start_date:q(e).toISOString(),end_date:H(e).toISOString()}:{}}return{}},nt=e=>{if(!e)return"Date TBD";const t=new Date(e);return Number.isNaN(t.getTime())?"Date TBD":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)},st=()=>{const e=i.value;if(!e)return null;const t=e.getBounds(),o=e.getCenter(),r=s=>s.toFixed(5);return{bbox:`${r(t.getWest())},${r(t.getSouth())},${r(t.getEast())},${r(t.getNorth())}`,centerLat:Number(o.lat.toFixed(6)),centerLon:Number(o.lng.toFixed(6)),zoom:Number(e.getZoom().toFixed(2))}},ye=()=>{const e=[];return A.value.forEach(t=>{if(!Number.isFinite(t.lat)||!Number.isFinite(t.lon))return;const o=fe(t);e.push({type:"Feature",id:t.id,geometry:{type:"Point",coordinates:[t.lon,t.lat]},properties:{id:t.id,category:o,category_icon:et(t),color:tt(o),title:t.title||`Event #${t.id}`,slug:t.slug||"",main_image:t.main_image||"",city:t.city||"",venue_name:t.venue_name||"",start_time:t.start_time||"",description:t.description||""}})}),{type:"FeatureCollection",features:e}},be=()=>{const e=[];return U.value.forEach(t=>{!Number.isFinite(t.lat)||!Number.isFinite(t.lon)||e.push({type:"Feature",id:t.id,geometry:{type:"Point",coordinates:[t.lon,t.lat]},properties:{id:t.id,avatar_url:t.avatar_url||V(t.id),level:Math.max(1,Number(t.level??1)),username:t.username||"",full_name:t.full_name||"",uuid:t.uuid||"",bio:t.bio||""}})}),{type:"FeatureCollection",features:e}},X=e=>{const t=i.value?.getSource(e);return t||null},ge=(e,t)=>{const o=i.value;!o||!o.getLayer(e)||o.setLayoutProperty(e,"visibility",t?"visible":"none")},ee=()=>{for(const e of L.value.values())e.remove();L.value.clear()},_e=e=>{S.value=e,b.value=!0,c.value=null},it=e=>{const t=document.createElement("button");t.type="button",t.className="map-avatar-marker";const o=document.createElement("img");return o.src=e.avatar_url||V(e.id),o.alt=e.username||e.full_name||`User #${e.id}`,o.loading="lazy",t.appendChild(o),t.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),_e(e)}),t},te=()=>{const e=i.value,t=pe.value;if(!e||!t||l.value!=="people"){ee();return}let o=[];try{o=e.querySourceFeatures(h,{filter:["!",["has","point_count"]]})}catch{return}const r=new Set;o.forEach(s=>{const u=Number(s.properties?.id);if(!Number.isFinite(u)||r.has(u))return;r.add(u);const M=s.geometry.coordinates,bt=me.value.get(u)||{id:u,lat:M[1],lon:M[0],level:Number(s.properties?.level??1),avatar_url:s.properties?.avatar_url||V(u),username:s.properties?.username||null,full_name:s.properties?.full_name||null,uuid:s.properties?.uuid||null,bio:s.properties?.bio||null},Pe=L.value.get(u);if(Pe){Pe.setLngLat(M);return}const gt=new t.Marker({element:it(bt),anchor:"center"}).setLngLat(M).addTo(e);L.value.set(u,gt)});for(const[s,u]of L.value.entries())r.has(s)||(u.remove(),L.value.delete(s))},T=()=>{X(x)?.setData(ye()),X(h)?.setData(be()),l.value==="people"&&te()},G=()=>{const e=l.value==="events";ue.forEach(t=>ge(t,e)),$e.forEach(t=>ge(t,!e)),e?ee():te()},xe=()=>{const e=i.value;e&&(e.getSource(x)||e.addSource(x,{type:"geojson",data:ye(),cluster:!0,clusterRadius:56,clusterMaxZoom:14}),e.getSource(h)||e.addSource(h,{type:"geojson",data:be(),cluster:!0,clusterRadius:56,clusterMaxZoom:14}),e.getLayer(z)||e.addLayer({id:z,type:"circle",source:x,filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],"#7c3aed",20,"#8b5cf6",50,"#a78bfa",100,"#c4b5fd"],"circle-radius":["step",["get","point_count"],18,20,24,50,30,100,36],"circle-opacity":.92,"circle-stroke-color":"#ffffff","circle-stroke-width":1.6}}),e.getLayer(ie)||e.addLayer({id:ie,type:"symbol",source:x,filter:["has","point_count"],layout:{"text-field":["get","point_count_abbreviated"],"text-size":12},paint:{"text-color":"#f8fafc"}}),e.getLayer(P)||e.addLayer({id:P,type:"circle",source:x,filter:["!",["has","point_count"]],paint:{"circle-color":["coalesce",["get","color"],"#f97316"],"circle-radius":18,"circle-stroke-color":"#ffffff","circle-stroke-width":2,"circle-opacity":.96}}),e.getLayer(O)||e.addLayer({id:O,type:"symbol",source:x,filter:["!",["has","point_count"]],layout:{"text-field":["coalesce",["get","category_icon"],"EV"],"text-size":12,"text-allow-overlap":!0,"text-ignore-placement":!0},paint:{"text-color":"#ffffff","text-halo-color":"rgba(2,6,23,0.85)","text-halo-width":.8}}),e.getLayer(I)||e.addLayer({id:I,type:"circle",source:h,filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],"#2563eb",20,"#3b82f6",50,"#60a5fa",100,"#93c5fd"],"circle-radius":["step",["get","point_count"],18,20,24,50,30,100,36],"circle-opacity":.92,"circle-stroke-color":"#ffffff","circle-stroke-width":1.6}}),e.getLayer(le)||e.addLayer({id:le,type:"symbol",source:h,filter:["has","point_count"],layout:{"text-field":["get","point_count_abbreviated"],"text-size":12},paint:{"text-color":"#f8fafc"}}),e.getLayer(R)||e.addLayer({id:R,type:"circle",source:h,filter:["!",["has","point_count"]],paint:{"circle-radius":20,"circle-color":"#2563eb","circle-opacity":0,"circle-stroke-opacity":0}}))},lt=()=>{i.value?.getCanvas().style.setProperty("cursor","pointer")},ct=()=>{i.value?.getCanvas().style.setProperty("cursor","")},he=(e,t)=>{const o=i.value;if(!o)return;const r=t.features?.[0];if(!r)return;const s=r.properties?.cluster_id;if(s==null)return;const u=X(e);if(!u||typeof u.getClusterExpansionZoom!="function")return;const M=r.geometry.coordinates;u.getClusterExpansionZoom(Number(s)).then(ze=>{o.easeTo({center:M,zoom:Math.min(ze,17),duration:420})}).catch(()=>{})},ke=e=>{he(x,e)},we=e=>{he(h,e)},W=e=>{const t=e.features?.[0];if(!t)return;const o=Number(t.properties?.id);if(!Number.isFinite(o))return;const r=qe.value.get(o);c.value=r||{id:o,lat:t.geometry.coordinates[1],lon:t.geometry.coordinates[0],type:"event",has_active_buddy_requests:!1,category:t.properties?.category||"event",title:t.properties?.title||`Event #${o}`,slug:t.properties?.slug||"",main_image:t.properties?.main_image||"",city:t.properties?.city||"",venue_name:t.properties?.venue_name||"",start_time:t.properties?.start_time||"",description:t.properties?.description||""},b.value=!1,S.value=null},Ee=e=>{const t=e.features?.[0];if(!t)return;const o=Number(t.properties?.id);if(!Number.isFinite(o))return;const r=t.geometry.coordinates,u=me.value.get(o)||{id:o,lat:r[1],lon:r[0],avatar_url:t.properties?.avatar_url||V(o),level:Number(t.properties?.level??1),username:t.properties?.username||null,full_name:t.properties?.full_name||null,uuid:t.properties?.uuid||null,bio:t.properties?.bio||null};_e(u)},Le=()=>{lt()},Ce=()=>{ct()},Se=()=>{const e=i.value;if(!e)return;e.off("click",z,ke),e.off("click",I,we),e.off("click",P,W),e.off("click",O,W),e.off("click",R,Ee),e.on("click",z,ke),e.on("click",I,we),e.on("click",P,W),e.on("click",O,W),e.on("click",R,Ee),[z,P,O,I,R].forEach(o=>{e.off("mouseenter",o,Le),e.off("mouseleave",o,Ce),e.on("mouseenter",o,Le),e.on("mouseleave",o,Ce)})},De=async()=>{if(!Y.value)return;const e=st();if(!e)return;const t=++D.value;J.value=!0,F.value="";try{if(l.value==="events"){const o={bbox:e.bbox,zoom:e.zoom,center_lat:e.centerLat,center_lon:e.centerLon,radius_km:k.value,limit:200},r=at();r.start_date&&(o.start_date=r.start_date),r.end_date&&(o.end_date=r.end_date);const s=await de.apiFetch("/api/v1/discovery/map",{baseURL:Re("/api/v1/discovery/map"),query:o});if(t!==D.value)return;A.value=Array.isArray(s)?s:[]}else{const o=await de.apiFetch("/api/v1/discovery/map/people",{baseURL:Re("/api/v1/discovery/map/people"),query:{bbox:e.bbox,lat:e.centerLat,lon:e.centerLon,radius_km:k.value,limit:200}});if(t!==D.value)return;U.value=Array.isArray(o)?o:[]}if(t!==D.value)return;T(),G()}catch{if(t!==D.value)return;F.value=l.value==="events"?"Unable to load events for this area.":"Unable to load people for this area.",l.value==="events"?A.value=[]:U.value=[],T()}finally{t===D.value&&(J.value=!1)}},N=Ut(()=>{De()},300),Te=()=>{l.value==="people"&&te(),N()},oe=e=>{Z.value=e,$&&clearTimeout($),$=setTimeout(()=>{Z.value=""},3400)},ut=()=>{i.value?.zoomIn({duration:180})},dt=()=>{i.value?.zoomOut({duration:180})},pt=()=>{const e=i.value;if(!e||!navigator.geolocation){oe("Geolocation is not available.");return}navigator.geolocation.getCurrentPosition(t=>{const o=[t.coords.longitude,t.coords.latitude];e.easeTo({center:o,zoom:Math.max(e.getZoom(),13.5),duration:780}),N()},t=>{if(t.code===t.PERMISSION_DENIED){oe("Location access was denied.");return}oe("Unable to determine your location.")},{enableHighAccuracy:!0,timeout:9e3,maximumAge:0})},Ne=()=>{c.value=null},mt=()=>{c.value?.slug&&Ct(`/e/${c.value.slug}`)},vt=()=>{b.value=!1,S.value=null},ft=()=>{vt()},Me=()=>{i.value?.resize()},yt=async()=>{if(!K.value)return;const e=await St(()=>import("./kZj0XkdK.js").then(o=>o.m),[],import.meta.url);pe.value=e;const t=new e.Map({container:K.value,style:ve(),center:ce,zoom:ho,minZoom:3,maxZoom:19,attributionControl:!1});t.addControl(new e.NavigationControl({showCompass:!1}),"bottom-right"),t.on("load",()=>{Y.value=!0,xe(),Se(),G(),T(),De(),requestAnimationFrame(()=>{t.resize()})}),t.on("style.load",()=>{Y.value&&(xe(),Se(),G(),T())}),t.on("moveend",Te),t.on("zoomend",Te),t.on("click",()=>{c.value=null}),i.value=t};return g(l,()=>{c.value=null,S.value=null,b.value=!1,G(),N()}),g(k,()=>{N()}),g(v,e=>{e!=="custom"&&(C.value=""),l.value==="events"&&N()}),g(C,()=>{l.value!=="events"||v.value!=="custom"||N()}),g(()=>j.value,()=>{!i.value||!Y.value||i.value.setStyle(ve())}),g(b,e=>{e||(S.value=null)}),g(A,()=>{T()}),g(U,()=>{T()}),xt(async()=>{await ht();try{await yt()}catch{F.value="Map failed to initialize."}window.addEventListener("resize",Me)}),kt(()=>{$&&clearTimeout($),window.removeEventListener("resize",Me),ee(),i.value&&(i.value.remove(),i.value=null)}),(e,t)=>{const o=wt;return m(),f("div",jt,[d(o,null,{fallback:w(()=>[...t[6]||(t[6]=[a("div",{class:"absolute inset-0 z-0 bg-muted/70"},null,-1)])]),default:w(()=>[a("div",{ref_key:"mapContainerRef",ref:K,class:"absolute inset-0 z-0"},null,512)]),_:1}),t[12]||(t[12]=a("div",{class:"pointer-events-none absolute inset-x-0 top-0 z-10 h-24 bg-gradient-to-b from-background/70 to-transparent"},null,-1)),a("div",Yt,[d(Nt,{items:n(Tt),class:"pointer-events-auto lg:!static lg:!top-0"},null,8,["items"])]),a("div",Zt,[a("div",qt,[a("button",{type:"button",class:"inline-flex h-10 w-10 items-center justify-center rounded-xl border border-border/60 bg-card/80 text-foreground shadow-lg backdrop-blur-md transition hover:bg-card","aria-label":"Toggle map filters",onClick:t[0]||(t[0]=r=>Q.value=!n(Q))},[d(n(Pt),{class:"h-4 w-4"})]),d(B,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-2 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-2 opacity-0"},{default:w(()=>[n(Q)?(m(),f("aside",Ht,[t[11]||(t[11]=a("p",{class:"text-xs font-semibold uppercase tracking-[0.2em] text-muted-foreground"}," Search Filters ",-1)),a("div",Gt,[a("div",Wt,[a("button",{type:"button",class:re(["inline-flex items-center justify-center gap-1.5 rounded-lg px-3 py-2 text-xs font-semibold transition",n(l)==="events"?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-muted/60 hover:text-foreground"]),onClick:t[1]||(t[1]=r=>l.value="events")},[d(n(Ot),{class:"h-3.5 w-3.5"}),t[7]||(t[7]=ae(" Events ",-1))],2),a("button",{type:"button",class:re(["inline-flex items-center justify-center gap-1.5 rounded-lg px-3 py-2 text-xs font-semibold transition",n(l)==="people"?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-muted/60 hover:text-foreground"]),onClick:t[2]||(t[2]=r=>l.value="people")},[d(n(It),{class:"h-3.5 w-3.5"}),t[8]||(t[8]=ae(" People ",-1))],2)])]),a("div",Kt,[a("p",Qt,[d(n(Rt),{class:"h-3.5 w-3.5"}),t[9]||(t[9]=ae(" Date ",-1))]),a("div",Jt,[(m(),f(Et,null,Lt(je,r=>a("button",{key:r.value,type:"button",class:re(["rounded-full border px-3 py-1.5 text-xs font-medium transition",n(v)===r.value?"border-primary bg-primary/15 text-primary":"border-border bg-background/60 text-muted-foreground hover:text-foreground"]),onClick:s=>v.value=r.value},y(r.label),11,Xt)),64))]),n(v)==="custom"?Oe((m(),f("input",{key:0,"onUpdate:modelValue":t[3]||(t[3]=r=>ne(C)?C.value=r:null),type:"date",class:"h-10 w-full rounded-lg border border-border bg-background/70 px-3 text-sm text-foreground outline-none transition focus:border-primary"},null,512)),[[Ie,n(C)]]):E("",!0),n(l)==="people"?(m(),f("p",eo," Date filtering is applied to events mode. ")):E("",!0)]),a("label",to,[a("span",oo,[t[10]||(t[10]=a("span",null,"Radius around center",-1)),a("span",ro,y(n(k))+" km",1)]),Oe(a("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>ne(k)?k.value=r:null),type:"range",min:"1",max:"50",step:"1",class:"h-1.5 w-full cursor-pointer appearance-none rounded-full bg-muted accent-primary"},null,512),[[Ie,n(k),void 0,{number:!0}]])])])):E("",!0)]),_:1})])]),a("div",ao,[a("div",no,[a("button",{type:"button",class:"inline-flex h-11 w-11 items-center justify-center rounded-xl border border-border/60 bg-card/80 text-foreground shadow-lg backdrop-blur-md transition hover:bg-card","aria-label":"Zoom in",onClick:ut},[d(n(Ft),{class:"h-4 w-4"})]),a("button",{type:"button",class:"inline-flex h-11 w-11 items-center justify-center rounded-xl border border-border/60 bg-card/80 text-foreground shadow-lg backdrop-blur-md transition hover:bg-card","aria-label":"Zoom out",onClick:dt},[d(n(Bt),{class:"h-4 w-4"})]),a("button",{type:"button",class:"inline-flex h-11 w-11 items-center justify-center rounded-xl border border-border/60 bg-card/80 text-foreground shadow-lg backdrop-blur-md transition hover:bg-card","aria-label":"Locate me",onClick:pt},[d(n(Vt),{class:"h-4 w-4"})])])]),d(B,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-2 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-2 opacity-0"},{default:w(()=>[n(J)?(m(),f("div",so," Loading nearby "+y(n(l)==="events"?"events":"people")+"... ",1)):E("",!0)]),_:1}),d(B,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-2 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-2 opacity-0"},{default:w(()=>[n(F)?(m(),f("p",io,y(n(F)),1)):E("",!0)]),_:1}),d(B,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-2 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-2 opacity-0"},{default:w(()=>[n(Z)?(m(),f("p",lo,y(n(Z)),1)):E("",!0)]),_:1}),d(B,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-4 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-4 opacity-0"},{default:w(()=>[n(c)?(m(),f("div",co,[a("article",uo,[a("div",po,[a("img",{src:n(Qe),alt:n(c).title||`Event ${n(c).id}`,class:"h-20 w-28 rounded-xl object-cover"},null,8,mo),a("div",vo,[a("p",fo,y(n(c).category||"Event"),1),a("h3",yo,y(n(c).title||`Event #${n(c).id}`),1),a("p",bo,y(n(We)),1),a("p",go,y(n(Ke)),1),a("div",_o,[a("button",{type:"button",class:"rounded-lg bg-primary px-2.5 py-1.5 text-xs font-semibold text-primary-foreground disabled:cursor-not-allowed disabled:opacity-50",disabled:!n(Ge),onClick:mt}," Open Event ",8,xo),a("button",{type:"button",class:"rounded-lg border border-border px-2.5 py-1.5 text-xs font-medium text-muted-foreground transition hover:text-foreground",onClick:Ne}," Dismiss ")])]),a("button",{type:"button",class:"inline-flex h-7 w-7 shrink-0 items-center justify-center rounded-full border border-border text-muted-foreground transition hover:text-foreground","aria-label":"Close preview",onClick:Ne},[d(n(At),{class:"h-3.5 w-3.5"})])])])])):E("",!0)]),_:1}),d(Mt,{isOpen:n(b),"onUpdate:isOpen":t[5]||(t[5]=r=>ne(b)?b.value=r:null),user:n(Je),onScan:ft},null,8,["isOpen","user"])])}}}),wo=$t(ko,[["__scopeId","data-v-226b40b4"]]),Wo=Fe({__name:"index",setup(Ue){return(ce,ue)=>(m(),Dt(wo))}});export{Wo as default};
