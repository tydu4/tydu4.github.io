import{d as T,O as R,J as w,Q as $,j as u,R as h,z as f,c as p,m as t,a,k as d,w as n,e as B,b as c,T as K,r as L,K as P,o as s,f as v,S as D,F,p as S,B as z,t as H}from"./DIpL79ME.js";import _ from"./BnfmgMFc.js";import{_ as M}from"./BuNUjgc-.js";import{_ as Y}from"./g79Pr5Ol.js";import{_ as O}from"./DoL6yDwG.js";import{_ as W}from"./D93CA7PO.js";import{_ as G}from"./DKfHyifu.js";import{_ as U}from"./BkDtFCsd.js";import"./CNtae-L3.js";import"./ktI8lQth.js";import"./DCAmGDfH.js";import"./Ck3zTzEc.js";import"./y900d0nl.js";import"./Xeao8hWn.js";import"./5jP3ovOk.js";import"./DzV9VZSr.js";import"./D-ntXkt-.js";import"./DR2O4vHs.js";import"./BwSGWVKi.js";import"./CgaNsBb1.js";import"./DlAUqK2U.js";import"./Dr6T78HV.js";import"./gF2ZLa4d.js";import"./DYZS_ngB.js";import"./oMUAEtVJ.js";import"./BFJbChZv.js";import"./DFcLQhsV.js";import"./B0Whmy7M.js";import"./ByXHckbg.js";import"./BvuqPo7h.js";import"./CK8lNEQy.js";import"./W2FZ7VNj.js";import"./C94ZD2ww.js";import"./D_8MfZy3.js";import"./BTA2ybKl.js";import"./BOkAGTVX.js";import"./D94DbZNy.js";import"./Dh-MwfXC.js";import"./BnYV1jhC.js";import"./CRHb7muC.js";import"./DSoaomjP.js";import"./BXM_d79t.js";import"./CH85w-LZ.js";import"./QaezlMZ8.js";import"./DpkelGI7.js";import"./NaR5TDkT.js";import"./CkZ00H9r.js";import"./DTxndy0w.js";const j={class:"relative mx-auto w-full max-w-6xl pb-24"},J={key:0,class:"space-y-3 pt-4"},Q={class:"fixed bottom-4 right-4 z-[200] hidden md:block"},q={class:"grid grid-cols-2 gap-2"},jt=T({__name:"index",setup(X){const b=R(),E=w(),g=$(),o=u(()=>String(b.params.slug??"").trim()),i=L("PRE_EVENT"),{data:x,pending:y,error:C,refresh:k}=h(`event-hub-${o.value}`,async()=>o.value?await $fetch(`/api/v1/events/slug/${encodeURIComponent(o.value)}`,{baseURL:P("/api/v1/events/slug")}):null,{server:!0,lazy:!1}),l=u(()=>x.value??null),A={PRE_EVENT:U,CHECK_IN_WAY:O,CHECK_IN_DONE:Y,LIVE_AFK:G,LIVE_ACTIVE:W,AFTERPARTY:M},V=u(()=>A[i.value]),N=[{label:"Pre",value:"PRE_EVENT"},{label:"Way",value:"CHECK_IN_WAY"},{label:"Inside",value:"CHECK_IN_DONE"},{label:"Live (AFK)",value:"LIVE_AFK"},{label:"Live (Active)",value:"LIVE_ACTIVE"},{label:"Afterparty",value:"AFTERPARTY"}],I=r=>{i.value=r};return f(o,()=>{i.value="PRE_EVENT"}),f(l,r=>{!r||!E.isGuest||g.trackView({eventId:r.id,eventSlug:r.slug||o.value,title:r.title||null})},{immediate:!0}),(r,e)=>(s(),p("div",j,[t(y)&&!t(l)?(s(),p("section",J,[...e[1]||(e[1]=[a("div",{class:"h-44 animate-pulse rounded-3xl bg-muted"},null,-1),a("div",{class:"h-36 animate-pulse rounded-3xl bg-muted"},null,-1),a("div",{class:"h-36 animate-pulse rounded-3xl bg-muted"},null,-1)])])):t(C)?(s(),d(t(_),{key:1,class:"mt-5 rounded-2xl border-destructive/25 bg-destructive/10 p-4 text-sm text-destructive"},{default:n(()=>[e[2]||(e[2]=v(" Не удалось загрузить событие. ",-1)),a("button",{type:"button",class:"ml-2 underline",onClick:e[0]||(e[0]=()=>t(k)())},"Обновить")]),_:1})):t(l)?B("",!0):(s(),d(t(_),{key:2,class:"mt-5 rounded-2xl p-5 text-sm text-muted-foreground"},{default:n(()=>[...e[3]||(e[3]=[v(" Событие не найдено. ",-1)])]),_:1})),c(K,{mode:"out-in","enter-active-class":"transition duration-250 ease-out","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition duration-180 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-1"},{default:n(()=>[(s(),d(D(t(V)),{key:t(i),event:t(l)},null,8,["event"]))]),_:1}),a("div",Q,[c(t(_),{class:"pointer-events-auto rounded-2xl border border-border bg-card/95 p-2 shadow-elevated backdrop-blur"},{default:n(()=>[e[4]||(e[4]=a("p",{class:"mb-2 px-1 text-[11px] font-semibold uppercase tracking-[0.16em] text-muted-foreground"}," Debug State ",-1)),a("div",q,[(s(),p(F,null,S(N,m=>c(t(z),{key:m.value,size:"sm",variant:t(i)===m.value?"default":"outline",class:"min-w-[92px]",onClick:Z=>I(m.value)},{default:n(()=>[v(H(m.label),1)]),_:2},1032,["variant","onClick"])),64))])]),_:1})])]))}});export{jt as default};
